<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Programming in R | STAT 362 R for Data Science</title>
  <meta name="description" content="Notes for STAT 362" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Programming in R | STAT 362 R for Data Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Notes for STAT 362" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Programming in R | STAT 362 R for Data Science" />
  
  <meta name="twitter:description" content="Notes for STAT 362" />
  

<meta name="author" content="Brian Ling" />


<meta name="date" content="2021-01-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="probability.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Syllabus</a></li>
<li class="chapter" data-level="" data-path="schedule.html"><a href="schedule.html"><i class="fa fa-check"></i>Schedule</a></li>
<li class="chapter" data-level="" data-path="annoucement.html"><a href="annoucement.html"><i class="fa fa-check"></i>Annoucement</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-r-and-rstudio"><i class="fa fa-check"></i><b>1.1</b> What is R and RStudio?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#what-will-you-learn-in-this-course"><i class="fa fa-check"></i><b>1.2</b> What will you learn in this course?</a><ul>
<li class="chapter" data-level="1.2.1" data-path="introduction.html"><a href="introduction.html#r-and-r-as-a-programming-language"><i class="fa fa-check"></i><b>1.2.1</b> R and R as a programming language</a></li>
<li class="chapter" data-level="1.2.2" data-path="introduction.html"><a href="introduction.html#data-wrangling"><i class="fa fa-check"></i><b>1.2.2</b> Data Wrangling</a></li>
<li class="chapter" data-level="1.2.3" data-path="introduction.html"><a href="introduction.html#data-visualization"><i class="fa fa-check"></i><b>1.2.3</b> Data Visualization</a></li>
<li class="chapter" data-level="1.2.4" data-path="introduction.html"><a href="introduction.html#statistical-inference"><i class="fa fa-check"></i><b>1.2.4</b> Statistical Inference</a></li>
<li class="chapter" data-level="1.2.5" data-path="introduction.html"><a href="introduction.html#machine-learning"><i class="fa fa-check"></i><b>1.2.5</b> Machine Learning</a></li>
<li class="chapter" data-level="1.2.6" data-path="introduction.html"><a href="introduction.html#some-numerical-methods"><i class="fa fa-check"></i><b>1.2.6</b> Some Numerical Methods</a></li>
<li class="chapter" data-level="1.2.7" data-path="introduction.html"><a href="introduction.html#lastly"><i class="fa fa-check"></i><b>1.2.7</b> Lastly</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#lets-get-started"><i class="fa fa-check"></i><b>1.3</b> Let’s Get Started</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#r-data-structures"><i class="fa fa-check"></i><b>1.4</b> R Data Structures</a><ul>
<li class="chapter" data-level="1.4.1" data-path="introduction.html"><a href="introduction.html#vectors"><i class="fa fa-check"></i><b>1.4.1</b> Vectors</a></li>
<li class="chapter" data-level="1.4.2" data-path="introduction.html"><a href="introduction.html#factors"><i class="fa fa-check"></i><b>1.4.2</b> Factors</a></li>
<li class="chapter" data-level="1.4.3" data-path="introduction.html"><a href="introduction.html#matrix"><i class="fa fa-check"></i><b>1.4.3</b> Matrix</a></li>
<li class="chapter" data-level="1.4.4" data-path="introduction.html"><a href="introduction.html#lists"><i class="fa fa-check"></i><b>1.4.4</b> Lists</a></li>
<li class="chapter" data-level="1.4.5" data-path="introduction.html"><a href="introduction.html#data-frames"><i class="fa fa-check"></i><b>1.4.5</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#operators"><i class="fa fa-check"></i><b>1.5</b> Operators</a><ul>
<li class="chapter" data-level="1.5.1" data-path="introduction.html"><a href="introduction.html#vectorized-operators"><i class="fa fa-check"></i><b>1.5.1</b> Vectorized Operators</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#built-in-functions"><i class="fa fa-check"></i><b>1.6</b> Built-in Functions</a><ul>
<li class="chapter" data-level="1.6.1" data-path="introduction.html"><a href="introduction.html#sort"><i class="fa fa-check"></i><b>1.6.1</b> <code>sort()</code></a></li>
<li class="chapter" data-level="1.6.2" data-path="introduction.html"><a href="introduction.html#seq"><i class="fa fa-check"></i><b>1.6.2</b> <code>seq()</code></a></li>
<li class="chapter" data-level="1.6.3" data-path="introduction.html"><a href="introduction.html#rep"><i class="fa fa-check"></i><b>1.6.3</b> <code>rep()</code></a></li>
<li class="chapter" data-level="1.6.4" data-path="introduction.html"><a href="introduction.html#pmax-pmin"><i class="fa fa-check"></i><b>1.6.4</b> <code>pmax</code>, <code>pmin</code></a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#some-useful-rstudio-shortcuts"><i class="fa fa-check"></i><b>1.7</b> Some Useful RStudio Shortcuts</a></li>
<li class="chapter" data-level="1.8" data-path="introduction.html"><a href="introduction.html#exercises"><i class="fa fa-check"></i><b>1.8</b> Exercises</a></li>
<li class="chapter" data-level="1.9" data-path="introduction.html"><a href="introduction.html#comments-to-exercises"><i class="fa fa-check"></i><b>1.9</b> Comments to Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="probability.html"><a href="probability.html"><i class="fa fa-check"></i><b>2</b> Probability</a><ul>
<li class="chapter" data-level="2.1" data-path="probability.html"><a href="probability.html#probability-distributions"><i class="fa fa-check"></i><b>2.1</b> Probability Distributions</a><ul>
<li class="chapter" data-level="2.1.1" data-path="probability.html"><a href="probability.html#common-distributions"><i class="fa fa-check"></i><b>2.1.1</b> Common Distributions</a></li>
<li class="chapter" data-level="2.1.2" data-path="probability.html"><a href="probability.html#exercises-1"><i class="fa fa-check"></i><b>2.1.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="probability.html"><a href="probability.html#simulation"><i class="fa fa-check"></i><b>2.2</b> Simulation</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="programming-in-r.html"><a href="programming-in-r.html"><i class="fa fa-check"></i><b>3</b> Programming in R</a><ul>
<li class="chapter" data-level="3.1" data-path="programming-in-r.html"><a href="programming-in-r.html#writing-functions-in-r"><i class="fa fa-check"></i><b>3.1</b> Writing functions in R</a></li>
<li class="chapter" data-level="3.2" data-path="programming-in-r.html"><a href="programming-in-r.html#control-flow"><i class="fa fa-check"></i><b>3.2</b> Control Flow</a><ul>
<li class="chapter" data-level="3.2.1" data-path="programming-in-r.html"><a href="programming-in-r.html#for-loop"><i class="fa fa-check"></i><b>3.2.1</b> for loop</a></li>
<li class="chapter" data-level="3.2.2" data-path="programming-in-r.html"><a href="programming-in-r.html#while-loop"><i class="fa fa-check"></i><b>3.2.2</b> while loop</a></li>
<li class="chapter" data-level="3.2.3" data-path="programming-in-r.html"><a href="programming-in-r.html#if-cond"><i class="fa fa-check"></i><b>3.2.3</b> if (cond)</a></li>
<li class="chapter" data-level="3.2.4" data-path="programming-in-r.html"><a href="programming-in-r.html#if-cond-else-expr"><i class="fa fa-check"></i><b>3.2.4</b> if (cond) else expr</a></li>
<li class="chapter" data-level="3.2.5" data-path="programming-in-r.html"><a href="programming-in-r.html#if-else-ladder"><i class="fa fa-check"></i><b>3.2.5</b> If else ladder</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="programming-in-r.html"><a href="programming-in-r.html#automatically-reindent-code"><i class="fa fa-check"></i><b>3.3</b> Automatically Reindent Code</a></li>
<li class="chapter" data-level="3.4" data-path="programming-in-r.html"><a href="programming-in-r.html#speed-consideration"><i class="fa fa-check"></i><b>3.4</b> Speed Consideration</a></li>
<li class="chapter" data-level="3.5" data-path="programming-in-r.html"><a href="programming-in-r.html#another-simulation-example"><i class="fa fa-check"></i><b>3.5</b> Another Simulation Example</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">STAT 362 R for Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="programming-in-r" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Programming in R</h1>
<p>Optional reading: R Cookbook Ch 15, R for data science <a href="https://r4ds.had.co.nz/program-intro.html" class="uri">https://r4ds.had.co.nz/program-intro.html</a></p>
<p>Hands-on programming with R:
<a href="https://rstudio-education.github.io/hopr/" class="uri">https://rstudio-education.github.io/hopr/</a></p>
<div id="writing-functions-in-r" class="section level2">
<h2><span class="header-section-number">3.1</span> Writing functions in R</h2>
<ul>
<li><p>When you have to copy and paste some code more than 2 times, you should consider writing a function</p></li>
<li><p>Writing a function can simplify your code and isolate the main part of your program</p></li>
</ul>
<p><strong><em>General format of a function</em></strong></p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="programming-in-r.html#cb75-1"></a>function_name &lt;-<span class="st"> </span><span class="cf">function</span>(argument1, argument2) {</span>
<span id="cb75-2"><a href="programming-in-r.html#cb75-2"></a>  statements</span>
<span id="cb75-3"><a href="programming-in-r.html#cb75-3"></a>}</span></code></pre></div>
<p><strong>Example:</strong> Let’s try to write a function to compute the sample variance.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="programming-in-r.html#cb76-1"></a>my_var &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb76-2"><a href="programming-in-r.html#cb76-2"></a>  mean_x &lt;-<span class="st"> </span><span class="kw">mean</span>(x)</span>
<span id="cb76-3"><a href="programming-in-r.html#cb76-3"></a>  n &lt;-<span class="st"> </span><span class="kw">length</span>(x)</span>
<span id="cb76-4"><a href="programming-in-r.html#cb76-4"></a>  <span class="kw">return</span>(<span class="kw">sum</span>((x <span class="op">-</span><span class="st"> </span>mean_x)<span class="op">^</span><span class="dv">2</span>)<span class="op">/</span>(n<span class="dv">-1</span>))</span>
<span id="cb76-5"><a href="programming-in-r.html#cb76-5"></a>}</span>
<span id="cb76-6"><a href="programming-in-r.html#cb76-6"></a></span>
<span id="cb76-7"><a href="programming-in-r.html#cb76-7"></a>y &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">9</span></span>
<span id="cb76-8"><a href="programming-in-r.html#cb76-8"></a></span>
<span id="cb76-9"><a href="programming-in-r.html#cb76-9"></a><span class="kw">my_var</span>(y)</span>
<span id="cb76-10"><a href="programming-in-r.html#cb76-10"></a><span class="co">## [1] 7.5</span></span>
<span id="cb76-11"><a href="programming-in-r.html#cb76-11"></a></span>
<span id="cb76-12"><a href="programming-in-r.html#cb76-12"></a><span class="kw">var</span>(y) <span class="co"># compared with the bulit-in function</span></span>
<span id="cb76-13"><a href="programming-in-r.html#cb76-13"></a><span class="co">## [1] 7.5</span></span>
<span id="cb76-14"><a href="programming-in-r.html#cb76-14"></a></span>
<span id="cb76-15"><a href="programming-in-r.html#cb76-15"></a>x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1000</span>, <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">sd =</span> <span class="dv">2</span>)</span>
<span id="cb76-16"><a href="programming-in-r.html#cb76-16"></a><span class="kw">my_var</span>(x)</span>
<span id="cb76-17"><a href="programming-in-r.html#cb76-17"></a><span class="co">## [1] 4.262595</span></span>
<span id="cb76-18"><a href="programming-in-r.html#cb76-18"></a><span class="kw">var</span>(x) <span class="co"># why the result is not equal to 2?</span></span>
<span id="cb76-19"><a href="programming-in-r.html#cb76-19"></a><span class="co">## [1] 4.262595</span></span></code></pre></div>
<ul>
<li>We can also write</li>
</ul>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="programming-in-r.html#cb77-1"></a>my_var2 &lt;-<span class="st"> </span><span class="cf">function</span>(x){<span class="kw">sum</span>((x<span class="op">-</span><span class="kw">mean</span>(x))<span class="op">^</span><span class="dv">2</span>)<span class="op">/</span>(<span class="kw">length</span>(x)<span class="op">-</span><span class="dv">1</span>)}</span></code></pre></div>
<ul>
<li>The variable <code>x</code> is the argument to be passed into the function. The variables <code>mean_x</code> and <code>n</code> are <strong><em>local variables</em></strong> whose scope is within this function.</li>
</ul>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="programming-in-r.html#cb78-1"></a>y &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb78-2"><a href="programming-in-r.html#cb78-2"></a></span>
<span id="cb78-3"><a href="programming-in-r.html#cb78-3"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb78-4"><a href="programming-in-r.html#cb78-4"></a>  y &lt;-<span class="st"> </span>x</span>
<span id="cb78-5"><a href="programming-in-r.html#cb78-5"></a>  x &lt;-<span class="st"> </span><span class="dv">4</span></span>
<span id="cb78-6"><a href="programming-in-r.html#cb78-6"></a>  y</span>
<span id="cb78-7"><a href="programming-in-r.html#cb78-7"></a>}</span>
<span id="cb78-8"><a href="programming-in-r.html#cb78-8"></a></span>
<span id="cb78-9"><a href="programming-in-r.html#cb78-9"></a>y</span>
<span id="cb78-10"><a href="programming-in-r.html#cb78-10"></a><span class="co">## [1] 2</span></span>
<span id="cb78-11"><a href="programming-in-r.html#cb78-11"></a></span>
<span id="cb78-12"><a href="programming-in-r.html#cb78-12"></a><span class="kw">f</span>(<span class="dv">3</span>) <span class="co"># output the value f(3)</span></span>
<span id="cb78-13"><a href="programming-in-r.html#cb78-13"></a><span class="co">## [1] 3</span></span>
<span id="cb78-14"><a href="programming-in-r.html#cb78-14"></a></span>
<span id="cb78-15"><a href="programming-in-r.html#cb78-15"></a>y <span class="co"># y is unchanged, y is defined in the global environment</span></span>
<span id="cb78-16"><a href="programming-in-r.html#cb78-16"></a><span class="co">## [1] 2</span></span>
<span id="cb78-17"><a href="programming-in-r.html#cb78-17"></a></span>
<span id="cb78-18"><a href="programming-in-r.html#cb78-18"></a>x</span>
<span id="cb78-19"><a href="programming-in-r.html#cb78-19"></a><span class="co">## Error in eval(expr, envir, enclos): object &#39;x&#39; not found</span></span></code></pre></div>
<p><strong><em>We shall write code using proper indentation (easier to read and debug)</em></strong></p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="programming-in-r.html#cb79-1"></a><span class="co"># with indentation (use this one)</span></span>
<span id="cb79-2"><a href="programming-in-r.html#cb79-2"></a>my_var &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb79-3"><a href="programming-in-r.html#cb79-3"></a>  mean_x &lt;-<span class="st"> </span><span class="kw">mean</span>(x)</span>
<span id="cb79-4"><a href="programming-in-r.html#cb79-4"></a>  n &lt;-<span class="st"> </span><span class="kw">length</span>(x)</span>
<span id="cb79-5"><a href="programming-in-r.html#cb79-5"></a>  <span class="kw">return</span>(<span class="kw">sum</span>((x <span class="op">-</span><span class="st"> </span>mean_x)<span class="op">^</span><span class="dv">2</span>)<span class="op">/</span>(n<span class="dv">-1</span>))</span>
<span id="cb79-6"><a href="programming-in-r.html#cb79-6"></a>}</span>
<span id="cb79-7"><a href="programming-in-r.html#cb79-7"></a></span>
<span id="cb79-8"><a href="programming-in-r.html#cb79-8"></a><span class="co"># no indentation</span></span>
<span id="cb79-9"><a href="programming-in-r.html#cb79-9"></a>my_var &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb79-10"><a href="programming-in-r.html#cb79-10"></a>mean_x &lt;-<span class="st"> </span><span class="kw">mean</span>(x)</span>
<span id="cb79-11"><a href="programming-in-r.html#cb79-11"></a>n &lt;-<span class="st"> </span><span class="kw">length</span>(x)</span>
<span id="cb79-12"><a href="programming-in-r.html#cb79-12"></a><span class="kw">return</span>(<span class="kw">sum</span>((x <span class="op">-</span><span class="st"> </span>mean_x)<span class="op">^</span><span class="dv">2</span>)<span class="op">/</span>(n<span class="dv">-1</span>))</span>
<span id="cb79-13"><a href="programming-in-r.html#cb79-13"></a>}</span></code></pre></div>
<p><strong><em>The number of arguments passed to a function can be more than one</em></strong></p>
<p><strong>Example:</strong> Write a function to compute the pooled sample standard deviation of two independent samples <span class="math inline">\(x_1,\ldots,x_n\)</span> and <span class="math inline">\(y_1,\ldots,y_m\)</span> of sizes <span class="math inline">\(n\)</span> and <span class="math inline">\(m\)</span>. Recall that the pooled sample standard deviation is defined as:
<span class="math display">\[
S_p := \sqrt{\frac{(n-1)S^2_X + (m-1)S^2_Y}{m+n-2}},
\]</span>
where <span class="math inline">\(S^2_X\)</span> and <span class="math inline">\(S^2_Y\)</span> are the sample variances of <span class="math inline">\(x_1,\ldots,x_n\)</span> and <span class="math inline">\(y_1,\ldots,y_m\)</span>, respectively.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="programming-in-r.html#cb80-1"></a>pooled_sd &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) {</span>
<span id="cb80-2"><a href="programming-in-r.html#cb80-2"></a>  n &lt;-<span class="st"> </span><span class="kw">length</span>(x)</span>
<span id="cb80-3"><a href="programming-in-r.html#cb80-3"></a>  m &lt;-<span class="st"> </span><span class="kw">length</span>(y)</span>
<span id="cb80-4"><a href="programming-in-r.html#cb80-4"></a>  <span class="kw">return</span>(<span class="kw">sqrt</span>(((n<span class="dv">-1</span>)<span class="op">*</span><span class="kw">var</span>(x)<span class="op">+</span>(m<span class="dv">-1</span>)<span class="op">*</span><span class="kw">var</span>(y))<span class="op">/</span>(m<span class="op">+</span>n<span class="dv">-2</span>)))</span>
<span id="cb80-5"><a href="programming-in-r.html#cb80-5"></a>}</span></code></pre></div>
<p>Remark: if the final statement will output something, it will be the output of the function. You can also use <code>return()</code> as above. That is, <code>pooled_sd</code> and <code>pooled_sd2</code> are exactly the same.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="programming-in-r.html#cb81-1"></a>pooled_sd2 &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) {</span>
<span id="cb81-2"><a href="programming-in-r.html#cb81-2"></a>  n &lt;-<span class="st"> </span><span class="kw">length</span>(x)</span>
<span id="cb81-3"><a href="programming-in-r.html#cb81-3"></a>  m &lt;-<span class="st"> </span><span class="kw">length</span>(y)</span>
<span id="cb81-4"><a href="programming-in-r.html#cb81-4"></a>  <span class="kw">sqrt</span>(((n<span class="dv">-1</span>)<span class="op">*</span><span class="kw">var</span>(x)<span class="op">+</span>(m<span class="dv">-1</span>)<span class="op">*</span><span class="kw">var</span>(y))<span class="op">/</span>(m<span class="op">+</span>n<span class="dv">-2</span>))</span>
<span id="cb81-5"><a href="programming-in-r.html#cb81-5"></a>}</span></code></pre></div>
<p><strong><em>You can return more than one value in a function</em></strong></p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="programming-in-r.html#cb82-1"></a>my_var_sd &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb82-2"><a href="programming-in-r.html#cb82-2"></a>  mean_x &lt;-<span class="st"> </span><span class="kw">mean</span>(x)</span>
<span id="cb82-3"><a href="programming-in-r.html#cb82-3"></a>  n &lt;-<span class="st"> </span><span class="kw">length</span>(x)</span>
<span id="cb82-4"><a href="programming-in-r.html#cb82-4"></a>  my_var &lt;-<span class="st"> </span><span class="kw">sum</span>((x <span class="op">-</span><span class="st"> </span>mean_x)<span class="op">^</span><span class="dv">2</span>)<span class="op">/</span>(n<span class="dv">-1</span>)</span>
<span id="cb82-5"><a href="programming-in-r.html#cb82-5"></a>  <span class="kw">return</span>(<span class="kw">c</span>(my_var, <span class="kw">sqrt</span>(my_var)))</span>
<span id="cb82-6"><a href="programming-in-r.html#cb82-6"></a>}</span></code></pre></div>
<p>You may also return a list</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="programming-in-r.html#cb83-1"></a>my_var_sd &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb83-2"><a href="programming-in-r.html#cb83-2"></a>  mean_x &lt;-<span class="st"> </span><span class="kw">mean</span>(x)</span>
<span id="cb83-3"><a href="programming-in-r.html#cb83-3"></a>  n &lt;-<span class="st"> </span><span class="kw">length</span>(x)</span>
<span id="cb83-4"><a href="programming-in-r.html#cb83-4"></a>  my_var &lt;-<span class="st"> </span><span class="kw">sum</span>((x <span class="op">-</span><span class="st"> </span>mean_x)<span class="op">^</span><span class="dv">2</span>)<span class="op">/</span>(n<span class="dv">-1</span>)</span>
<span id="cb83-5"><a href="programming-in-r.html#cb83-5"></a>  output &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">var =</span> my_var, <span class="dt">sd =</span> <span class="kw">sqrt</span>(my_var))</span>
<span id="cb83-6"><a href="programming-in-r.html#cb83-6"></a>  <span class="kw">return</span>(output)</span>
<span id="cb83-7"><a href="programming-in-r.html#cb83-7"></a>}</span></code></pre></div>
<p>Example: write a function called <code>my_summary</code> that will output a list with elements being the mean, sd, median, min and max of a given vector.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="programming-in-r.html#cb84-1"></a>my_summary &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb84-2"><a href="programming-in-r.html#cb84-2"></a>  output &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(x), <span class="dt">sd =</span> <span class="kw">sd</span>(x), <span class="dt">median =</span> <span class="kw">median</span>(x), <span class="dt">min =</span> <span class="kw">min</span>(x), <span class="dt">max =</span> <span class="kw">max</span>(x))</span>
<span id="cb84-3"><a href="programming-in-r.html#cb84-3"></a>  <span class="kw">return</span>(output)  </span>
<span id="cb84-4"><a href="programming-in-r.html#cb84-4"></a>}</span>
<span id="cb84-5"><a href="programming-in-r.html#cb84-5"></a></span>
<span id="cb84-6"><a href="programming-in-r.html#cb84-6"></a><span class="kw">my_summary</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</span>
<span id="cb84-7"><a href="programming-in-r.html#cb84-7"></a><span class="co">## $mean</span></span>
<span id="cb84-8"><a href="programming-in-r.html#cb84-8"></a><span class="co">## [1] 5.5</span></span>
<span id="cb84-9"><a href="programming-in-r.html#cb84-9"></a><span class="co">## </span></span>
<span id="cb84-10"><a href="programming-in-r.html#cb84-10"></a><span class="co">## $sd</span></span>
<span id="cb84-11"><a href="programming-in-r.html#cb84-11"></a><span class="co">## [1] 3.02765</span></span>
<span id="cb84-12"><a href="programming-in-r.html#cb84-12"></a><span class="co">## </span></span>
<span id="cb84-13"><a href="programming-in-r.html#cb84-13"></a><span class="co">## $median</span></span>
<span id="cb84-14"><a href="programming-in-r.html#cb84-14"></a><span class="co">## [1] 5.5</span></span>
<span id="cb84-15"><a href="programming-in-r.html#cb84-15"></a><span class="co">## </span></span>
<span id="cb84-16"><a href="programming-in-r.html#cb84-16"></a><span class="co">## $min</span></span>
<span id="cb84-17"><a href="programming-in-r.html#cb84-17"></a><span class="co">## [1] 1</span></span>
<span id="cb84-18"><a href="programming-in-r.html#cb84-18"></a><span class="co">## </span></span>
<span id="cb84-19"><a href="programming-in-r.html#cb84-19"></a><span class="co">## $max</span></span>
<span id="cb84-20"><a href="programming-in-r.html#cb84-20"></a><span class="co">## [1] 10</span></span></code></pre></div>
<p><strong><em>Define a function with default value</em></strong></p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="programming-in-r.html#cb85-1"></a>my_power =<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">p =</span> <span class="dv">2</span>) {</span>
<span id="cb85-2"><a href="programming-in-r.html#cb85-2"></a> <span class="kw">return</span>(x<span class="op">^</span>p)</span>
<span id="cb85-3"><a href="programming-in-r.html#cb85-3"></a>}</span>
<span id="cb85-4"><a href="programming-in-r.html#cb85-4"></a></span>
<span id="cb85-5"><a href="programming-in-r.html#cb85-5"></a><span class="kw">my_power</span>(<span class="dv">3</span>) <span class="co"># by default, p = 2, will compute 3^2</span></span>
<span id="cb85-6"><a href="programming-in-r.html#cb85-6"></a><span class="co">## [1] 9</span></span>
<span id="cb85-7"><a href="programming-in-r.html#cb85-7"></a></span>
<span id="cb85-8"><a href="programming-in-r.html#cb85-8"></a><span class="kw">my_power</span>(<span class="dv">3</span>, <span class="dv">3</span>) <span class="co"># will compute 3^3</span></span>
<span id="cb85-9"><a href="programming-in-r.html#cb85-9"></a><span class="co">## [1] 27</span></span></code></pre></div>
</div>
<div id="control-flow" class="section level2">
<h2><span class="header-section-number">3.2</span> Control Flow</h2>
<div id="for-loop" class="section level3">
<h3><span class="header-section-number">3.2.1</span> for loop</h3>
<p>You can use a for loop when you know how many times you will loop.</p>
<p>Syntax:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="programming-in-r.html#cb86-1"></a><span class="cf">for</span> (var <span class="cf">in</span> sequence) {</span>
<span id="cb86-2"><a href="programming-in-r.html#cb86-2"></a>  statement <span class="co"># do this statement for each value of i</span></span>
<span id="cb86-3"><a href="programming-in-r.html#cb86-3"></a>}</span></code></pre></div>
<p>Examples:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="programming-in-r.html#cb87-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) { <span class="co"># note: you do not have to define i beforehand</span></span>
<span id="cb87-2"><a href="programming-in-r.html#cb87-2"></a>  <span class="kw">print</span>(i)</span>
<span id="cb87-3"><a href="programming-in-r.html#cb87-3"></a>}</span>
<span id="cb87-4"><a href="programming-in-r.html#cb87-4"></a><span class="co">## [1] 1</span></span>
<span id="cb87-5"><a href="programming-in-r.html#cb87-5"></a><span class="co">## [1] 2</span></span>
<span id="cb87-6"><a href="programming-in-r.html#cb87-6"></a><span class="co">## [1] 3</span></span>
<span id="cb87-7"><a href="programming-in-r.html#cb87-7"></a><span class="co">## [1] 4</span></span>
<span id="cb87-8"><a href="programming-in-r.html#cb87-8"></a><span class="co">## [1] 5</span></span>
<span id="cb87-9"><a href="programming-in-r.html#cb87-9"></a></span>
<span id="cb87-10"><a href="programming-in-r.html#cb87-10"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">6</span>)) {</span>
<span id="cb87-11"><a href="programming-in-r.html#cb87-11"></a>  <span class="kw">print</span>(i)</span>
<span id="cb87-12"><a href="programming-in-r.html#cb87-12"></a>}</span>
<span id="cb87-13"><a href="programming-in-r.html#cb87-13"></a><span class="co">## [1] 1</span></span>
<span id="cb87-14"><a href="programming-in-r.html#cb87-14"></a><span class="co">## [1] 3</span></span>
<span id="cb87-15"><a href="programming-in-r.html#cb87-15"></a><span class="co">## [1] 6</span></span></code></pre></div>
<p>Examples</p>
<ol style="list-style-type: decimal">
<li>Write R code to find <span class="math inline">\(\sum^{10}_{i=1} \sum^4_{j=1} \frac{i^2}{(i+j)^2}\)</span>.</li>
</ol>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="programming-in-r.html#cb88-1"></a>sum &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb88-2"><a href="programming-in-r.html#cb88-2"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) {</span>
<span id="cb88-3"><a href="programming-in-r.html#cb88-3"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>) {</span>
<span id="cb88-4"><a href="programming-in-r.html#cb88-4"></a>    sum &lt;-<span class="st"> </span>sum <span class="op">+</span><span class="st"> </span>i<span class="op">^</span><span class="dv">2</span><span class="op">/</span>(i<span class="op">+</span>j)<span class="op">^</span><span class="dv">2</span></span>
<span id="cb88-5"><a href="programming-in-r.html#cb88-5"></a>  }</span>
<span id="cb88-6"><a href="programming-in-r.html#cb88-6"></a>}</span>
<span id="cb88-7"><a href="programming-in-r.html#cb88-7"></a>sum</span>
<span id="cb88-8"><a href="programming-in-r.html#cb88-8"></a><span class="co">## [1] 18.26491</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Write R code to find <span class="math inline">\(\sum^{10}_{i=1} \sum^i_{j=1} \frac{i^2}{(i+j)^3}\)</span>.</li>
</ol>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="programming-in-r.html#cb89-1"></a>sum &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb89-2"><a href="programming-in-r.html#cb89-2"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) {</span>
<span id="cb89-3"><a href="programming-in-r.html#cb89-3"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>i) {</span>
<span id="cb89-4"><a href="programming-in-r.html#cb89-4"></a>    sum &lt;-<span class="st"> </span>sum <span class="op">+</span><span class="st"> </span>i<span class="op">^</span><span class="dv">2</span><span class="op">/</span>(i<span class="op">+</span>j)<span class="op">^</span><span class="dv">3</span></span>
<span id="cb89-5"><a href="programming-in-r.html#cb89-5"></a>  }</span>
<span id="cb89-6"><a href="programming-in-r.html#cb89-6"></a>}</span>
<span id="cb89-7"><a href="programming-in-r.html#cb89-7"></a>sum</span>
<span id="cb89-8"><a href="programming-in-r.html#cb89-8"></a><span class="co">## [1] 2.779252</span></span></code></pre></div>
</div>
<div id="while-loop" class="section level3">
<h3><span class="header-section-number">3.2.2</span> while loop</h3>
<p>You can use a while loop if you want to loop until a specific condition is met. For example, when you minimize a function numerically using some iterative algorithm, you may want to stop when the objective value does not change much. You may not know how many loops are required in advance so that a while loop may be better than a for loop in this application.</p>
<p>Syntax:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="programming-in-r.html#cb90-1"></a><span class="cf">while</span> (condition) {</span>
<span id="cb90-2"><a href="programming-in-r.html#cb90-2"></a>  statement <span class="co"># while the condition is TRUE, do this</span></span>
<span id="cb90-3"><a href="programming-in-r.html#cb90-3"></a>}</span></code></pre></div>
<p>A simple example:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="programming-in-r.html#cb91-1"></a>i &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb91-2"><a href="programming-in-r.html#cb91-2"></a><span class="cf">while</span> (i <span class="op">&lt;</span><span class="st"> </span><span class="dv">6</span>) {</span>
<span id="cb91-3"><a href="programming-in-r.html#cb91-3"></a>  <span class="kw">print</span>(i)</span>
<span id="cb91-4"><a href="programming-in-r.html#cb91-4"></a>  i &lt;-<span class="st"> </span>i<span class="op">+</span><span class="dv">1</span></span>
<span id="cb91-5"><a href="programming-in-r.html#cb91-5"></a>}</span>
<span id="cb91-6"><a href="programming-in-r.html#cb91-6"></a><span class="co">## [1] 1</span></span>
<span id="cb91-7"><a href="programming-in-r.html#cb91-7"></a><span class="co">## [1] 2</span></span>
<span id="cb91-8"><a href="programming-in-r.html#cb91-8"></a><span class="co">## [1] 3</span></span>
<span id="cb91-9"><a href="programming-in-r.html#cb91-9"></a><span class="co">## [1] 4</span></span>
<span id="cb91-10"><a href="programming-in-r.html#cb91-10"></a><span class="co">## [1] 5</span></span>
<span id="cb91-11"><a href="programming-in-r.html#cb91-11"></a></span>
<span id="cb91-12"><a href="programming-in-r.html#cb91-12"></a><span class="co"># What happen if you change &quot;i &lt; 6&quot; to &quot;i &lt;= 6&quot;? Ans: will print 1 to 6</span></span>
<span id="cb91-13"><a href="programming-in-r.html#cb91-13"></a></span>
<span id="cb91-14"><a href="programming-in-r.html#cb91-14"></a><span class="co"># What happen if you change &quot;i &lt; 6&quot; to &quot;i &lt;= 5&quot;? Ans: outputs are the same</span></span></code></pre></div>
<p>Another example:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="programming-in-r.html#cb92-1"></a><span class="co"># find the smallest n such that 1^2+ 2^2+ ... + n^2 &gt; 65</span></span>
<span id="cb92-2"><a href="programming-in-r.html#cb92-2"></a>sum &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb92-3"><a href="programming-in-r.html#cb92-3"></a>i &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb92-4"><a href="programming-in-r.html#cb92-4"></a><span class="cf">while</span> (sum <span class="op">&lt;</span><span class="st"> </span><span class="dv">65</span>) {</span>
<span id="cb92-5"><a href="programming-in-r.html#cb92-5"></a>  sum &lt;-<span class="st"> </span>sum <span class="op">+</span><span class="st"> </span>i<span class="op">^</span><span class="dv">2</span></span>
<span id="cb92-6"><a href="programming-in-r.html#cb92-6"></a>  <span class="kw">print</span>(<span class="kw">c</span>(i, sum))  </span>
<span id="cb92-7"><a href="programming-in-r.html#cb92-7"></a>  i &lt;-<span class="st"> </span>i<span class="op">+</span><span class="dv">1</span></span>
<span id="cb92-8"><a href="programming-in-r.html#cb92-8"></a>}</span>
<span id="cb92-9"><a href="programming-in-r.html#cb92-9"></a><span class="co">## [1] 1 1</span></span>
<span id="cb92-10"><a href="programming-in-r.html#cb92-10"></a><span class="co">## [1] 2 5</span></span>
<span id="cb92-11"><a href="programming-in-r.html#cb92-11"></a><span class="co">## [1]  3 14</span></span>
<span id="cb92-12"><a href="programming-in-r.html#cb92-12"></a><span class="co">## [1]  4 30</span></span>
<span id="cb92-13"><a href="programming-in-r.html#cb92-13"></a><span class="co">## [1]  5 55</span></span>
<span id="cb92-14"><a href="programming-in-r.html#cb92-14"></a><span class="co">## [1]  6 91</span></span>
<span id="cb92-15"><a href="programming-in-r.html#cb92-15"></a>i <span class="co"># 6 </span></span>
<span id="cb92-16"><a href="programming-in-r.html#cb92-16"></a><span class="co">## [1] 7</span></span></code></pre></div>
</div>
<div id="if-cond" class="section level3">
<h3><span class="header-section-number">3.2.3</span> if (cond)</h3>
<p>Syntax:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="programming-in-r.html#cb93-1"></a><span class="cf">if</span> (condition) {</span>
<span id="cb93-2"><a href="programming-in-r.html#cb93-2"></a>  statement <span class="co"># do this if the condition is TRUE</span></span>
<span id="cb93-3"><a href="programming-in-r.html#cb93-3"></a>}</span></code></pre></div>
<p>Example: write a function that outputs “positive” if a positive number is entered.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="programming-in-r.html#cb94-1"></a><span class="co"># check if a number if positive</span></span>
<span id="cb94-2"><a href="programming-in-r.html#cb94-2"></a>my_pos &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb94-3"><a href="programming-in-r.html#cb94-3"></a>  <span class="cf">if</span> (x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) { </span>
<span id="cb94-4"><a href="programming-in-r.html#cb94-4"></a>    <span class="kw">print</span>(<span class="st">&quot;positive&quot;</span>)  </span>
<span id="cb94-5"><a href="programming-in-r.html#cb94-5"></a>  }</span>
<span id="cb94-6"><a href="programming-in-r.html#cb94-6"></a>}</span>
<span id="cb94-7"><a href="programming-in-r.html#cb94-7"></a></span>
<span id="cb94-8"><a href="programming-in-r.html#cb94-8"></a><span class="kw">my_pos</span>(<span class="op">-</span><span class="dv">2</span>)</span>
<span id="cb94-9"><a href="programming-in-r.html#cb94-9"></a></span>
<span id="cb94-10"><a href="programming-in-r.html#cb94-10"></a><span class="kw">my_pos</span>(<span class="dv">2</span>)</span>
<span id="cb94-11"><a href="programming-in-r.html#cb94-11"></a><span class="co">## [1] &quot;positive&quot;</span></span></code></pre></div>
</div>
<div id="if-cond-else-expr" class="section level3">
<h3><span class="header-section-number">3.2.4</span> if (cond) else expr</h3>
<p>Syntax</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="programming-in-r.html#cb95-1"></a><span class="cf">if</span> (condition) {</span>
<span id="cb95-2"><a href="programming-in-r.html#cb95-2"></a>  statement1 <span class="co"># do this if condition is TRUE</span></span>
<span id="cb95-3"><a href="programming-in-r.html#cb95-3"></a>  } <span class="cf">else</span> {</span>
<span id="cb95-4"><a href="programming-in-r.html#cb95-4"></a>  statement2 <span class="co"># do this if condition is FALSE</span></span>
<span id="cb95-5"><a href="programming-in-r.html#cb95-5"></a>}</span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="programming-in-r.html#cb96-1"></a><span class="co"># write my own absolute value function</span></span>
<span id="cb96-2"><a href="programming-in-r.html#cb96-2"></a>my_abs &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb96-3"><a href="programming-in-r.html#cb96-3"></a> <span class="cf">if</span> (x<span class="op">&gt;=</span><span class="dv">0</span>) {</span>
<span id="cb96-4"><a href="programming-in-r.html#cb96-4"></a>   <span class="kw">return</span>(x)</span>
<span id="cb96-5"><a href="programming-in-r.html#cb96-5"></a> } <span class="cf">else</span> {</span>
<span id="cb96-6"><a href="programming-in-r.html#cb96-6"></a>   <span class="kw">return</span>(<span class="op">-</span>x)</span>
<span id="cb96-7"><a href="programming-in-r.html#cb96-7"></a> }</span>
<span id="cb96-8"><a href="programming-in-r.html#cb96-8"></a>}</span>
<span id="cb96-9"><a href="programming-in-r.html#cb96-9"></a></span>
<span id="cb96-10"><a href="programming-in-r.html#cb96-10"></a><span class="kw">my_abs</span>(<span class="op">-</span><span class="dv">2</span>)</span>
<span id="cb96-11"><a href="programming-in-r.html#cb96-11"></a><span class="co">## [1] 2</span></span>
<span id="cb96-12"><a href="programming-in-r.html#cb96-12"></a></span>
<span id="cb96-13"><a href="programming-in-r.html#cb96-13"></a><span class="kw">my_abs</span>(<span class="dv">3</span>)</span>
<span id="cb96-14"><a href="programming-in-r.html#cb96-14"></a><span class="co">## [1] 3</span></span>
<span id="cb96-15"><a href="programming-in-r.html#cb96-15"></a></span>
<span id="cb96-16"><a href="programming-in-r.html#cb96-16"></a><span class="kw">my_abs</span>(<span class="dv">0</span>)</span>
<span id="cb96-17"><a href="programming-in-r.html#cb96-17"></a><span class="co">## [1] 0</span></span></code></pre></div>
<p>Error-handling in a function:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="programming-in-r.html#cb97-1"></a>my_sqrt =<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb97-2"><a href="programming-in-r.html#cb97-2"></a>  <span class="cf">if</span> (x <span class="op">&gt;=</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb97-3"><a href="programming-in-r.html#cb97-3"></a>    <span class="kw">print</span>(<span class="kw">sqrt</span>(x))             <span class="co"># do this if x &gt;= 0</span></span>
<span id="cb97-4"><a href="programming-in-r.html#cb97-4"></a>  } <span class="cf">else</span> {</span>
<span id="cb97-5"><a href="programming-in-r.html#cb97-5"></a>    <span class="kw">cat</span>(<span class="st">&quot;Error: this is a negative number!&quot;</span>)   <span class="co"># do this otherwise</span></span>
<span id="cb97-6"><a href="programming-in-r.html#cb97-6"></a>  }</span>
<span id="cb97-7"><a href="programming-in-r.html#cb97-7"></a>}</span>
<span id="cb97-8"><a href="programming-in-r.html#cb97-8"></a><span class="kw">my_sqrt</span>(<span class="op">-</span><span class="dv">2</span>)</span>
<span id="cb97-9"><a href="programming-in-r.html#cb97-9"></a><span class="co">## Error: this is a negative number!</span></span></code></pre></div>
</div>
<div id="if-else-ladder" class="section level3">
<h3><span class="header-section-number">3.2.5</span> If else ladder</h3>
<p>Syntax</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="programming-in-r.html#cb98-1"></a><span class="co"># Example</span></span>
<span id="cb98-2"><a href="programming-in-r.html#cb98-2"></a><span class="cf">if</span> (condition1) {</span>
<span id="cb98-3"><a href="programming-in-r.html#cb98-3"></a>  statement1</span>
<span id="cb98-4"><a href="programming-in-r.html#cb98-4"></a>} <span class="cf">else</span> <span class="cf">if</span> (condition2) {</span>
<span id="cb98-5"><a href="programming-in-r.html#cb98-5"></a>  statement2</span>
<span id="cb98-6"><a href="programming-in-r.html#cb98-6"></a>} <span class="cf">else</span> <span class="cf">if</span> (condition1) {</span>
<span id="cb98-7"><a href="programming-in-r.html#cb98-7"></a>  statement3</span>
<span id="cb98-8"><a href="programming-in-r.html#cb98-8"></a>} </span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="programming-in-r.html#cb99-1"></a>score_to_grade =<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb99-2"><a href="programming-in-r.html#cb99-2"></a>  <span class="cf">if</span> (x<span class="op">&gt;=</span><span class="dv">90</span>) {</span>
<span id="cb99-3"><a href="programming-in-r.html#cb99-3"></a>    <span class="kw">cat</span>(<span class="st">&quot;A+&quot;</span>)</span>
<span id="cb99-4"><a href="programming-in-r.html#cb99-4"></a>  } <span class="cf">else</span> <span class="cf">if</span> (x <span class="op">&gt;=</span><span class="dv">85</span>) {</span>
<span id="cb99-5"><a href="programming-in-r.html#cb99-5"></a>    <span class="kw">cat</span>(<span class="st">&quot;A&quot;</span>)</span>
<span id="cb99-6"><a href="programming-in-r.html#cb99-6"></a>  } <span class="cf">else</span> <span class="cf">if</span> (x <span class="op">&gt;=</span><span class="dv">80</span>) {</span>
<span id="cb99-7"><a href="programming-in-r.html#cb99-7"></a>    <span class="kw">cat</span>(<span class="st">&quot;A-&quot;</span>)</span>
<span id="cb99-8"><a href="programming-in-r.html#cb99-8"></a>  } <span class="cf">else</span> {</span>
<span id="cb99-9"><a href="programming-in-r.html#cb99-9"></a>    <span class="kw">cat</span>(<span class="st">&quot;B+ or below&quot;</span>)</span>
<span id="cb99-10"><a href="programming-in-r.html#cb99-10"></a>  }</span>
<span id="cb99-11"><a href="programming-in-r.html#cb99-11"></a>}</span>
<span id="cb99-12"><a href="programming-in-r.html#cb99-12"></a></span>
<span id="cb99-13"><a href="programming-in-r.html#cb99-13"></a><span class="co"># after you write the function, you should check each case carefully</span></span>
<span id="cb99-14"><a href="programming-in-r.html#cb99-14"></a><span class="kw">score_to_grade</span>(<span class="dv">92</span>)</span>
<span id="cb99-15"><a href="programming-in-r.html#cb99-15"></a><span class="co">## A+</span></span>
<span id="cb99-16"><a href="programming-in-r.html#cb99-16"></a><span class="kw">score_to_grade</span>(<span class="dv">88</span>)</span>
<span id="cb99-17"><a href="programming-in-r.html#cb99-17"></a><span class="co">## A</span></span>
<span id="cb99-18"><a href="programming-in-r.html#cb99-18"></a><span class="kw">score_to_grade</span>(<span class="dv">83</span>)</span>
<span id="cb99-19"><a href="programming-in-r.html#cb99-19"></a><span class="co">## A-</span></span>
<span id="cb99-20"><a href="programming-in-r.html#cb99-20"></a><span class="kw">score_to_grade</span>(<span class="dv">78</span>)</span>
<span id="cb99-21"><a href="programming-in-r.html#cb99-21"></a><span class="co">## B+ or below</span></span></code></pre></div>
</div>
</div>
<div id="automatically-reindent-code" class="section level2">
<h2><span class="header-section-number">3.3</span> Automatically Reindent Code</h2>
<p>To indent a block of code, highlight the text in RStudio, then press Ctrl+i (Windows or Linux) or press Cmd+i (Mac).</p>
<p>Poor indentation, difficult to read</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="programming-in-r.html#cb100-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</span>
<span id="cb100-2"><a href="programming-in-r.html#cb100-2"></a><span class="cf">if</span> (i <span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span>) {</span>
<span id="cb100-3"><a href="programming-in-r.html#cb100-3"></a>      <span class="kw">print</span>(i<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb100-4"><a href="programming-in-r.html#cb100-4"></a>          } <span class="cf">else</span> {</span>
<span id="cb100-5"><a href="programming-in-r.html#cb100-5"></a>  <span class="kw">print</span>(i <span class="op">*</span><span class="st"> </span><span class="dv">3</span>)</span>
<span id="cb100-6"><a href="programming-in-r.html#cb100-6"></a>}</span>
<span id="cb100-7"><a href="programming-in-r.html#cb100-7"></a>      }</span>
<span id="cb100-8"><a href="programming-in-r.html#cb100-8"></a><span class="co">## [1] 3</span></span>
<span id="cb100-9"><a href="programming-in-r.html#cb100-9"></a><span class="co">## [1] 6</span></span>
<span id="cb100-10"><a href="programming-in-r.html#cb100-10"></a><span class="co">## [1] 9</span></span>
<span id="cb100-11"><a href="programming-in-r.html#cb100-11"></a><span class="co">## [1] 16</span></span>
<span id="cb100-12"><a href="programming-in-r.html#cb100-12"></a><span class="co">## [1] 25</span></span></code></pre></div>
<p>Highlight the block of code, press Ctrl+i or Cmd+i</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="programming-in-r.html#cb101-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</span>
<span id="cb101-2"><a href="programming-in-r.html#cb101-2"></a>  <span class="cf">if</span> (i <span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span>) {</span>
<span id="cb101-3"><a href="programming-in-r.html#cb101-3"></a>    <span class="kw">print</span>(i<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb101-4"><a href="programming-in-r.html#cb101-4"></a>  } <span class="cf">else</span> {</span>
<span id="cb101-5"><a href="programming-in-r.html#cb101-5"></a>    <span class="kw">print</span>(i <span class="op">*</span><span class="st"> </span><span class="dv">3</span>)</span>
<span id="cb101-6"><a href="programming-in-r.html#cb101-6"></a>  }</span>
<span id="cb101-7"><a href="programming-in-r.html#cb101-7"></a>}</span>
<span id="cb101-8"><a href="programming-in-r.html#cb101-8"></a><span class="co">## [1] 3</span></span>
<span id="cb101-9"><a href="programming-in-r.html#cb101-9"></a><span class="co">## [1] 6</span></span>
<span id="cb101-10"><a href="programming-in-r.html#cb101-10"></a><span class="co">## [1] 9</span></span>
<span id="cb101-11"><a href="programming-in-r.html#cb101-11"></a><span class="co">## [1] 16</span></span>
<span id="cb101-12"><a href="programming-in-r.html#cb101-12"></a><span class="co">## [1] 25</span></span></code></pre></div>
</div>
<div id="speed-consideration" class="section level2">
<h2><span class="header-section-number">3.4</span> Speed Consideration</h2>
<p>While the computing power is getting stronger and stronger, we should still write code that runs efficiently.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="programming-in-r.html#cb102-1"></a><span class="co"># suppose we want to simulate 200,000 normal random variables</span></span>
<span id="cb102-2"><a href="programming-in-r.html#cb102-2"></a>n &lt;-<span class="st"> </span><span class="dv">200000</span> </span>
<span id="cb102-3"><a href="programming-in-r.html#cb102-3"></a>x &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>, n) <span class="co"># create a vector for storage of the values</span></span>
<span id="cb102-4"><a href="programming-in-r.html#cb102-4"></a>initial_time &lt;-<span class="st"> </span><span class="kw">proc.time</span>()</span>
<span id="cb102-5"><a href="programming-in-r.html#cb102-5"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>n) {</span>
<span id="cb102-6"><a href="programming-in-r.html#cb102-6"></a>  x[i] &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1</span>)</span>
<span id="cb102-7"><a href="programming-in-r.html#cb102-7"></a>}</span>
<span id="cb102-8"><a href="programming-in-r.html#cb102-8"></a><span class="kw">proc.time</span>() <span class="op">-</span><span class="st"> </span>initial_time</span>
<span id="cb102-9"><a href="programming-in-r.html#cb102-9"></a><span class="co">##    user  system elapsed </span></span>
<span id="cb102-10"><a href="programming-in-r.html#cb102-10"></a><span class="co">##    0.42    0.00    0.42</span></span></code></pre></div>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="programming-in-r.html#cb103-1"></a>n &lt;-<span class="st"> </span><span class="dv">200000</span> </span>
<span id="cb103-2"><a href="programming-in-r.html#cb103-2"></a>x &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>, n) <span class="co"># create a vector for storage of the values</span></span>
<span id="cb103-3"><a href="programming-in-r.html#cb103-3"></a><span class="co"># Alternatively</span></span>
<span id="cb103-4"><a href="programming-in-r.html#cb103-4"></a><span class="kw">system.time</span>({</span>
<span id="cb103-5"><a href="programming-in-r.html#cb103-5"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>n) {</span>
<span id="cb103-6"><a href="programming-in-r.html#cb103-6"></a>  x[i] &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1</span>)</span>
<span id="cb103-7"><a href="programming-in-r.html#cb103-7"></a>}</span>
<span id="cb103-8"><a href="programming-in-r.html#cb103-8"></a>})</span>
<span id="cb103-9"><a href="programming-in-r.html#cb103-9"></a><span class="co">##    user  system elapsed </span></span>
<span id="cb103-10"><a href="programming-in-r.html#cb103-10"></a><span class="co">##    0.28    0.01    0.30</span></span></code></pre></div>
<p>The ‘user time’ is the CPU time charged for the execution of user instructions of the calling process. The ‘system time’ is the CPU time charged for execution by the system on behalf of the calling process.</p>
<p>A much more efficient way for the same task is to use</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="programming-in-r.html#cb104-1"></a><span class="kw">system.time</span>({</span>
<span id="cb104-2"><a href="programming-in-r.html#cb104-2"></a>  n &lt;-<span class="st"> </span><span class="dv">200000</span></span>
<span id="cb104-3"><a href="programming-in-r.html#cb104-3"></a>  x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(n)</span>
<span id="cb104-4"><a href="programming-in-r.html#cb104-4"></a>})</span>
<span id="cb104-5"><a href="programming-in-r.html#cb104-5"></a><span class="co">##    user  system elapsed </span></span>
<span id="cb104-6"><a href="programming-in-r.html#cb104-6"></a><span class="co">##    0.01    0.00    0.01</span></span></code></pre></div>
<p>Another example:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="programming-in-r.html#cb105-1"></a><span class="kw">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb105-2"><a href="programming-in-r.html#cb105-2"></a>x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="fl">2e6</span>)</span>
<span id="cb105-3"><a href="programming-in-r.html#cb105-3"></a>y &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="fl">2e6</span>)</span>
<span id="cb105-4"><a href="programming-in-r.html#cb105-4"></a>v &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>, <span class="fl">2e6</span>)</span>
<span id="cb105-5"><a href="programming-in-r.html#cb105-5"></a></span>
<span id="cb105-6"><a href="programming-in-r.html#cb105-6"></a><span class="kw">system.time</span>({</span>
<span id="cb105-7"><a href="programming-in-r.html#cb105-7"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(x)){ </span>
<span id="cb105-8"><a href="programming-in-r.html#cb105-8"></a>    v[i] &lt;-<span class="st"> </span>x[i]<span class="op">+</span>y[i]</span>
<span id="cb105-9"><a href="programming-in-r.html#cb105-9"></a>  }</span>
<span id="cb105-10"><a href="programming-in-r.html#cb105-10"></a>})</span>
<span id="cb105-11"><a href="programming-in-r.html#cb105-11"></a><span class="co">##    user  system elapsed </span></span>
<span id="cb105-12"><a href="programming-in-r.html#cb105-12"></a><span class="co">##    0.14    0.00    0.14</span></span>
<span id="cb105-13"><a href="programming-in-r.html#cb105-13"></a></span>
<span id="cb105-14"><a href="programming-in-r.html#cb105-14"></a><span class="kw">system.time</span>(v &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>y)</span>
<span id="cb105-15"><a href="programming-in-r.html#cb105-15"></a><span class="co">##    user  system elapsed </span></span>
<span id="cb105-16"><a href="programming-in-r.html#cb105-16"></a><span class="co">##    0.02    0.00    0.01</span></span></code></pre></div>
<p>The general rule is to use vectorized operations whenever possible and to avoid using for loops. We use a for loop when the code is not time-consuming or when the code is hard to write without using a for loop. A more advanced option is to combine C++ with R using the package <code>rcpp</code>. That is, we can write the most time-consuming part of the R code in C++, which could run many times faster (will not be discussed in this course).</p>
</div>
<div id="another-simulation-example" class="section level2">
<h2><span class="header-section-number">3.5</span> Another Simulation Example</h2>
<p>A simple model on the stock return assumes that (i)</p>
<p><span class="math display">\[r_{t+1} := \log \frac{P_{t+1}}{P_t} \sim N(\mu,\sigma^2), \]</span></p>
<p>where <span class="math inline">\(r_{t+1}\)</span> is the log-return at Day <span class="math inline">\(t+1\)</span>, <span class="math inline">\(P_t\)</span> is the stock price at the end of Day <span class="math inline">\(t\)</span>; (ii) <span class="math inline">\(r_1,r_2,\ldots\)</span> are iid. Simple algebra shows that
<span class="math display">\[P_{t+1} = P_t e^{r_{t+1}}\]</span>
and
<span class="math display">\[P_{t+1} = P_0 e^{ \sum^{t+1}_{i=1} r_i}.\]</span></p>
<p>Suppose that the current price of a certain stock <span class="math inline">\(P_0\)</span> is <span class="math inline">\(100\)</span>, <span class="math inline">\(\mu = 0.0002\)</span> and <span class="math inline">\(\sigma = 0.015\)</span>. Using simulation, estimate the probability that the price is below $95 at the close of at least one of the next 30 trading days.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="programming-in-r.html#cb106-1"></a>no_sim &lt;-<span class="st"> </span><span class="dv">10000</span> <span class="co"># number of simulation</span></span>
<span id="cb106-2"><a href="programming-in-r.html#cb106-2"></a>below &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>, no_sim)</span>
<span id="cb106-3"><a href="programming-in-r.html#cb106-3"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>no_sim) {</span>
<span id="cb106-4"><a href="programming-in-r.html#cb106-4"></a>  price &lt;-<span class="st"> </span><span class="dv">100</span><span class="op">*</span><span class="kw">exp</span>(<span class="kw">cumsum</span>(<span class="kw">rnorm</span>(<span class="dv">30</span>, <span class="dt">mean =</span> <span class="fl">0.0002</span>, <span class="dt">sd =</span> <span class="fl">0.015</span>)))</span>
<span id="cb106-5"><a href="programming-in-r.html#cb106-5"></a>  below[i] &lt;-<span class="st"> </span><span class="kw">min</span>(price) <span class="op">&lt;</span><span class="st"> </span><span class="dv">95</span></span>
<span id="cb106-6"><a href="programming-in-r.html#cb106-6"></a>}</span>
<span id="cb106-7"><a href="programming-in-r.html#cb106-7"></a><span class="kw">mean</span>(below)</span>
<span id="cb106-8"><a href="programming-in-r.html#cb106-8"></a><span class="co">## [1] 0.4384</span></span></code></pre></div>
<!-- ```{r} -->
<!-- system.time({ -->
<!-- no_sim <- 300000 -->
<!-- r <- matrix(rnorm(30*no_sim,  mean = 0.0002, sd = 0.015 ), nrow=no_sim, ncol=30) -->
<!-- #mean(log(100) + apply(t(apply(r, 1, cumsum)), 1, min) < log(95)) -->
<!-- mean(log(100) + apply((apply(r, 1, cumsum)), 2, min) < log(95)) -->
<!-- }) -->
<!-- ``` -->
<!-- ## Assignment 1 -->
<!-- 1. Write code to generate some given output -->
<!-- 2. use det and solve -->
<!-- 3. stat2009, tutorial 6 Q3 -->
<!-- x <- 10:1 -->
<!-- n <- length(x) -->
<!-- x[seq(4,n,4)] -->
<!-- x[seq(4,n,4)] <- 0  -->
<!-- sum(x[x%%2==1]) -->
<!-- c(x[seq(2,n,2)], x[seq(1,n,2)]) -->

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="probability.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Book.pdf", "Book.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
