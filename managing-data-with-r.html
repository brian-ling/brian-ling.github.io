<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Managing Data with R | STAT 362 R for Data Science</title>
  <meta name="description" content="Notes for STAT 362" />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Managing Data with R | STAT 362 R for Data Science" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Notes for STAT 362" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Managing Data with R | STAT 362 R for Data Science" />
  
  <meta name="twitter:description" content="Notes for STAT 362" />
  

<meta name="author" content="Brian Ling" />


<meta name="date" content="2024-03-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="programming-in-r.html"/>
<link rel="next" href="creating-some-basic-plots.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Syllabus</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-r-and-rstudio"><i class="fa fa-check"></i><b>1.1</b> What is R and RStudio?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#why-r"><i class="fa fa-check"></i><b>1.2</b> Why R?</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#what-will-you-learn-in-this-course"><i class="fa fa-check"></i><b>1.3</b> What will you learn in this course?</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#r-and-r-as-a-programming-language"><i class="fa fa-check"></i><b>1.3.1</b> R and R as a programming language</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#data-wrangling"><i class="fa fa-check"></i><b>1.3.2</b> Data Wrangling</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction.html"><a href="introduction.html#data-visualization"><i class="fa fa-check"></i><b>1.3.3</b> Data Visualization</a></li>
<li class="chapter" data-level="1.3.4" data-path="introduction.html"><a href="introduction.html#statistical-inference"><i class="fa fa-check"></i><b>1.3.4</b> Statistical Inference</a></li>
<li class="chapter" data-level="1.3.5" data-path="introduction.html"><a href="introduction.html#machine-learning"><i class="fa fa-check"></i><b>1.3.5</b> Machine Learning</a></li>
<li class="chapter" data-level="1.3.6" data-path="introduction.html"><a href="introduction.html#some-numerical-methods"><i class="fa fa-check"></i><b>1.3.6</b> Some Numerical Methods</a></li>
<li class="chapter" data-level="1.3.7" data-path="introduction.html"><a href="introduction.html#lastly"><i class="fa fa-check"></i><b>1.3.7</b> Lastly</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#lets-get-started"><i class="fa fa-check"></i><b>1.4</b> Let’s Get Started</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#r-data-structures"><i class="fa fa-check"></i><b>1.5</b> R Data Structures</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="introduction.html"><a href="introduction.html#vectors"><i class="fa fa-check"></i><b>1.5.1</b> Vectors</a></li>
<li class="chapter" data-level="1.5.2" data-path="introduction.html"><a href="introduction.html#factors"><i class="fa fa-check"></i><b>1.5.2</b> Factors</a></li>
<li class="chapter" data-level="1.5.3" data-path="introduction.html"><a href="introduction.html#matrix"><i class="fa fa-check"></i><b>1.5.3</b> Matrix</a></li>
<li class="chapter" data-level="1.5.4" data-path="introduction.html"><a href="introduction.html#lists"><i class="fa fa-check"></i><b>1.5.4</b> Lists</a></li>
<li class="chapter" data-level="1.5.5" data-path="introduction.html"><a href="introduction.html#data-frames"><i class="fa fa-check"></i><b>1.5.5</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#operators"><i class="fa fa-check"></i><b>1.6</b> Operators</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="introduction.html"><a href="introduction.html#vectorized-operators"><i class="fa fa-check"></i><b>1.6.1</b> Vectorized Operators</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#built-in-functions"><i class="fa fa-check"></i><b>1.7</b> Built-in Functions</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="introduction.html"><a href="introduction.html#sort"><i class="fa fa-check"></i><b>1.7.1</b> <code>sort()</code></a></li>
<li class="chapter" data-level="1.7.2" data-path="introduction.html"><a href="introduction.html#seq"><i class="fa fa-check"></i><b>1.7.2</b> <code>seq()</code></a></li>
<li class="chapter" data-level="1.7.3" data-path="introduction.html"><a href="introduction.html#rep"><i class="fa fa-check"></i><b>1.7.3</b> <code>rep()</code></a></li>
<li class="chapter" data-level="1.7.4" data-path="introduction.html"><a href="introduction.html#pmax-pmin"><i class="fa fa-check"></i><b>1.7.4</b> <code>pmax</code>, <code>pmin</code></a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="introduction.html"><a href="introduction.html#some-useful-rstudio-shortcuts"><i class="fa fa-check"></i><b>1.8</b> Some Useful RStudio Shortcuts</a></li>
<li class="chapter" data-level="1.9" data-path="introduction.html"><a href="introduction.html#exercises"><i class="fa fa-check"></i><b>1.9</b> Exercises</a></li>
<li class="chapter" data-level="1.10" data-path="introduction.html"><a href="introduction.html#comments-to-exercises"><i class="fa fa-check"></i><b>1.10</b> Comments to Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="probability-and-simulation.html"><a href="probability-and-simulation.html"><i class="fa fa-check"></i><b>2</b> Probability and Simulation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="probability-and-simulation.html"><a href="probability-and-simulation.html#probability-distributions"><i class="fa fa-check"></i><b>2.1</b> Probability Distributions</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="probability-and-simulation.html"><a href="probability-and-simulation.html#common-distributions"><i class="fa fa-check"></i><b>2.1.1</b> Common Distributions</a></li>
<li class="chapter" data-level="2.1.2" data-path="probability-and-simulation.html"><a href="probability-and-simulation.html#exercises-1"><i class="fa fa-check"></i><b>2.1.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="probability-and-simulation.html"><a href="probability-and-simulation.html#simulation"><i class="fa fa-check"></i><b>2.2</b> Simulation</a></li>
<li class="chapter" data-level="2.3" data-path="probability-and-simulation.html"><a href="probability-and-simulation.html#additional-exercises"><i class="fa fa-check"></i><b>2.3</b> Additional Exercises:</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="programming-in-r.html"><a href="programming-in-r.html"><i class="fa fa-check"></i><b>3</b> Programming in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="programming-in-r.html"><a href="programming-in-r.html#writing-functions-in-r"><i class="fa fa-check"></i><b>3.1</b> Writing functions in R</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="programming-in-r.html"><a href="programming-in-r.html#argument-matching"><i class="fa fa-check"></i><b>3.1.1</b> Argument Matching</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="programming-in-r.html"><a href="programming-in-r.html#control-flow"><i class="fa fa-check"></i><b>3.2</b> Control Flow</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="programming-in-r.html"><a href="programming-in-r.html#for-loop"><i class="fa fa-check"></i><b>3.2.1</b> for loop</a></li>
<li class="chapter" data-level="3.2.2" data-path="programming-in-r.html"><a href="programming-in-r.html#nested-for-loop"><i class="fa fa-check"></i><b>3.2.2</b> nested for loop</a></li>
<li class="chapter" data-level="3.2.3" data-path="programming-in-r.html"><a href="programming-in-r.html#while-loop"><i class="fa fa-check"></i><b>3.2.3</b> while loop</a></li>
<li class="chapter" data-level="3.2.4" data-path="programming-in-r.html"><a href="programming-in-r.html#if-cond"><i class="fa fa-check"></i><b>3.2.4</b> if (cond)</a></li>
<li class="chapter" data-level="3.2.5" data-path="programming-in-r.html"><a href="programming-in-r.html#if-cond-else-expr"><i class="fa fa-check"></i><b>3.2.5</b> if (cond) else expr</a></li>
<li class="chapter" data-level="3.2.6" data-path="programming-in-r.html"><a href="programming-in-r.html#if-else-ladder"><i class="fa fa-check"></i><b>3.2.6</b> If else ladder</a></li>
<li class="chapter" data-level="3.2.7" data-path="programming-in-r.html"><a href="programming-in-r.html#switch"><i class="fa fa-check"></i><b>3.2.7</b> <code>switch</code></a></li>
<li class="chapter" data-level="3.2.8" data-path="programming-in-r.html"><a href="programming-in-r.html#next-break"><i class="fa fa-check"></i><b>3.2.8</b> <code>next</code>, <code>break</code></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="programming-in-r.html"><a href="programming-in-r.html#loop-functions"><i class="fa fa-check"></i><b>3.3</b> Loop functions</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="programming-in-r.html"><a href="programming-in-r.html#apply"><i class="fa fa-check"></i><b>3.3.1</b> <code>apply()</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="programming-in-r.html"><a href="programming-in-r.html#lapply"><i class="fa fa-check"></i><b>3.3.2</b> <code>lapply()</code></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="programming-in-r.html"><a href="programming-in-r.html#automatically-reindent-code"><i class="fa fa-check"></i><b>3.4</b> Automatically Reindent Code</a></li>
<li class="chapter" data-level="3.5" data-path="programming-in-r.html"><a href="programming-in-r.html#speed-consideration"><i class="fa fa-check"></i><b>3.5</b> Speed Consideration</a></li>
<li class="chapter" data-level="3.6" data-path="programming-in-r.html"><a href="programming-in-r.html#additional-exercises-1"><i class="fa fa-check"></i><b>3.6</b> Additional Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html"><i class="fa fa-check"></i><b>4</b> Managing Data with R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#missing-values"><i class="fa fa-check"></i><b>4.1</b> Missing Values</a></li>
<li class="chapter" data-level="4.2" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#saving-loading-and-removing-r-data-structures"><i class="fa fa-check"></i><b>4.2</b> Saving, loading, and removing R data structures</a></li>
<li class="chapter" data-level="4.3" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#importing-and-saving-data-from-csv-files"><i class="fa fa-check"></i><b>4.3</b> Importing and saving data from CSV files</a></li>
<li class="chapter" data-level="4.4" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#data-transformation-with-dplyr"><i class="fa fa-check"></i><b>4.4</b> Data Transformation with <code>dplyr</code></a></li>
<li class="chapter" data-level="4.5" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#arrange"><i class="fa fa-check"></i><b>4.5</b> <code>arrange()</code></a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#exercises-2"><i class="fa fa-check"></i><b>4.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#filter"><i class="fa fa-check"></i><b>4.6</b> <code>filter()</code></a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#exercises-3"><i class="fa fa-check"></i><b>4.6.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#select"><i class="fa fa-check"></i><b>4.7</b> <code>select()</code></a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#exercises-4"><i class="fa fa-check"></i><b>4.7.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#mutate"><i class="fa fa-check"></i><b>4.8</b> <code>mutate()</code></a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#exercises-5"><i class="fa fa-check"></i><b>4.8.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#summarize-group_by"><i class="fa fa-check"></i><b>4.9</b> <code>summarize(), group_by()</code></a></li>
<li class="chapter" data-level="4.10" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#combining-multiple-operations-with-pipe"><i class="fa fa-check"></i><b>4.10</b> Combining Multiple Operations with Pipe <code>%&gt;%</code></a></li>
<li class="chapter" data-level="4.11" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#summary"><i class="fa fa-check"></i><b>4.11</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html"><i class="fa fa-check"></i><b>5</b> Creating Some Basic Plots</a>
<ul>
<li class="chapter" data-level="5.1" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#scatter-plot"><i class="fa fa-check"></i><b>5.1</b> Scatter Plot</a></li>
<li class="chapter" data-level="5.2" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#line-graph"><i class="fa fa-check"></i><b>5.2</b> Line Graph</a></li>
<li class="chapter" data-level="5.3" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#bar-chart"><i class="fa fa-check"></i><b>5.3</b> Bar Chart</a></li>
<li class="chapter" data-level="5.4" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#histogram"><i class="fa fa-check"></i><b>5.4</b> Histogram</a></li>
<li class="chapter" data-level="5.5" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#box-plot"><i class="fa fa-check"></i><b>5.5</b> Box Plot</a></li>
<li class="chapter" data-level="5.6" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#plotting-a-function-curve"><i class="fa fa-check"></i><b>5.6</b> Plotting a function curve</a></li>
<li class="chapter" data-level="5.7" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#more-on-plots-with-base-r"><i class="fa fa-check"></i><b>5.7</b> More on plots with base R</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#multi-frame-plot"><i class="fa fa-check"></i><b>5.7.1</b> Multi-frame plot</a></li>
<li class="chapter" data-level="5.7.2" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#subsubsec:type_of_plot"><i class="fa fa-check"></i><b>5.7.2</b> Type of Plot</a></li>
<li class="chapter" data-level="5.7.3" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#parameters-of-a-plot"><i class="fa fa-check"></i><b>5.7.3</b> Parameters of a plot</a></li>
<li class="chapter" data-level="5.7.4" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#elements-on-plot"><i class="fa fa-check"></i><b>5.7.4</b> Elements on plot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html"><i class="fa fa-check"></i><b>6</b> Data Visualization with ggplot2</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#bar-charts"><i class="fa fa-check"></i><b>6.1</b> Bar charts</a></li>
<li class="chapter" data-level="6.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#line-graph-1"><i class="fa fa-check"></i><b>6.2</b> Line Graph</a></li>
<li class="chapter" data-level="6.3" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#scatter-plots"><i class="fa fa-check"></i><b>6.3</b> Scatter Plots</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#overplotting"><i class="fa fa-check"></i><b>6.3.1</b> Overplotting</a></li>
<li class="chapter" data-level="6.3.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#labelling-points-in-a-scatter-plot"><i class="fa fa-check"></i><b>6.3.2</b> Labelling points in a scatter plot</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#summarizing-data-distributions"><i class="fa fa-check"></i><b>6.4</b> Summarizing Data Distributions</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#histogram-1"><i class="fa fa-check"></i><b>6.4.1</b> Histogram</a></li>
<li class="chapter" data-level="6.4.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#kernel-density-estimate"><i class="fa fa-check"></i><b>6.4.2</b> Kernel Density Estimate</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#saving-your-plots"><i class="fa fa-check"></i><b>6.5</b> Saving your plots</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#outputting-to-pdf-vector-files"><i class="fa fa-check"></i><b>6.5.1</b> Outputting to pdf vector files</a></li>
<li class="chapter" data-level="6.5.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#outputting-to-bitmap-files"><i class="fa fa-check"></i><b>6.5.2</b> Outputting to bitmap files</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#axes-appearance"><i class="fa fa-check"></i><b>6.6</b> Axes, appearance</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#swapping-x--and-y-axes"><i class="fa fa-check"></i><b>6.6.1</b> Swapping X- and Y-axes</a></li>
<li class="chapter" data-level="6.6.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#setting-the-range-of-a-continuous-axis"><i class="fa fa-check"></i><b>6.6.2</b> Setting the range of a continuous axis</a></li>
<li class="chapter" data-level="6.6.3" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#changing-the-text-of-axis-labels"><i class="fa fa-check"></i><b>6.6.3</b> Changing the text of axis labels</a></li>
<li class="chapter" data-level="6.6.4" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#adding-title"><i class="fa fa-check"></i><b>6.6.4</b> Adding Title</a></li>
<li class="chapter" data-level="6.6.5" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#adding-subtitle"><i class="fa fa-check"></i><b>6.6.5</b> Adding Subtitle</a></li>
<li class="chapter" data-level="6.6.6" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#using-themes"><i class="fa fa-check"></i><b>6.6.6</b> Using Themes</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#summary-1"><i class="fa fa-check"></i><b>6.7</b> Summary</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#bar-charts-1"><i class="fa fa-check"></i><b>6.7.1</b> Bar charts</a></li>
<li class="chapter" data-level="6.7.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#line-graphs"><i class="fa fa-check"></i><b>6.7.2</b> Line graphs</a></li>
<li class="chapter" data-level="6.7.3" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#scatter-plot-1"><i class="fa fa-check"></i><b>6.7.3</b> Scatter plot</a></li>
<li class="chapter" data-level="6.7.4" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#summarizing-data-distributions-1"><i class="fa fa-check"></i><b>6.7.4</b> Summarizing data distributions</a></li>
<li class="chapter" data-level="6.7.5" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#saving-your-plots-1"><i class="fa fa-check"></i><b>6.7.5</b> Saving your plots</a></li>
<li class="chapter" data-level="6.7.6" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#axes-appearance-1"><i class="fa fa-check"></i><b>6.7.6</b> Axes, appearance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html"><i class="fa fa-check"></i><b>7</b> Statistical Inference in R</a>
<ul>
<li class="chapter" data-level="7.1" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#maximum-likelihood-estimation"><i class="fa fa-check"></i><b>7.1</b> Maximum Likelihood Estimation</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#exercises-on-mle"><i class="fa fa-check"></i><b>7.1.1</b> Exercises on MLE</a></li>
<li class="chapter" data-level="7.1.2" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#summary-2"><i class="fa fa-check"></i><b>7.1.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#interval-estimation-and-hypothesis-testing"><i class="fa fa-check"></i><b>7.2</b> Interval Estimation and Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#examples-of-hypothesis-testing"><i class="fa fa-check"></i><b>7.2.1</b> Examples of Hypothesis Testing</a></li>
<li class="chapter" data-level="7.2.2" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#null-hypotheses-alternative-hypotheses-and-p-values"><i class="fa fa-check"></i><b>7.2.2</b> Null Hypotheses, Alternative Hypotheses, and p-values</a></li>
<li class="chapter" data-level="7.2.3" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#type-i-error-and-type-ii-error"><i class="fa fa-check"></i><b>7.2.3</b> Type I error and Type II error</a></li>
<li class="chapter" data-level="7.2.4" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#inference-for-mean-of-one-sample"><i class="fa fa-check"></i><b>7.2.4</b> Inference for Mean of One Sample</a></li>
<li class="chapter" data-level="7.2.5" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#comparing-the-means-of-two-samples"><i class="fa fa-check"></i><b>7.2.5</b> Comparing the means of two samples</a></li>
<li class="chapter" data-level="7.2.6" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#inference-of-a-sample-proportion"><i class="fa fa-check"></i><b>7.2.6</b> Inference of a Sample Proportion</a></li>
<li class="chapter" data-level="7.2.7" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#testing-groups-for-equal-proportions"><i class="fa fa-check"></i><b>7.2.7</b> Testing groups for equal proportions</a></li>
<li class="chapter" data-level="7.2.8" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#testing-if-two-samples-have-the-same-underlying-distribution"><i class="fa fa-check"></i><b>7.2.8</b> Testing if two samples have the same underlying distribution</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="root-finding-and-optimization.html"><a href="root-finding-and-optimization.html"><i class="fa fa-check"></i><b>8</b> Root finding and optimization</a>
<ul>
<li class="chapter" data-level="8.1" data-path="root-finding-and-optimization.html"><a href="root-finding-and-optimization.html#root-finding"><i class="fa fa-check"></i><b>8.1</b> Root Finding</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="root-finding-and-optimization.html"><a href="root-finding-and-optimization.html#bisection-method"><i class="fa fa-check"></i><b>8.1.1</b> Bisection Method</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="root-finding-and-optimization.html"><a href="root-finding-and-optimization.html#newton-raphson-method"><i class="fa fa-check"></i><b>8.2</b> Newton-Raphson Method</a></li>
<li class="chapter" data-level="8.3" data-path="root-finding-and-optimization.html"><a href="root-finding-and-optimization.html#minimization-and-maximization"><i class="fa fa-check"></i><b>8.3</b> Minimization and Maximization</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="root-finding-and-optimization.html"><a href="root-finding-and-optimization.html#newton-raphson-method-1"><i class="fa fa-check"></i><b>8.3.1</b> Newton-Raphson Method</a></li>
<li class="chapter" data-level="8.3.2" data-path="root-finding-and-optimization.html"><a href="root-finding-and-optimization.html#gradient-descent"><i class="fa fa-check"></i><b>8.3.2</b> Gradient Descent</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="root-finding-and-optimization.html"><a href="root-finding-and-optimization.html#optim"><i class="fa fa-check"></i><b>8.4</b> <code>optim</code></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html"><i class="fa fa-check"></i><b>9</b> k-nearest neighbors</a>
<ul>
<li class="chapter" data-level="9.1" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html#introduction-1"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html#feature-scaling"><i class="fa fa-check"></i><b>9.2</b> Feature Scaling</a></li>
<li class="chapter" data-level="9.3" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html#example-classifying-breast-cancers"><i class="fa fa-check"></i><b>9.3</b> Example: Classifying Breast Cancers</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html#evaluating-model-performance"><i class="fa fa-check"></i><b>9.3.1</b> Evaluating Model Performance</a></li>
<li class="chapter" data-level="9.3.2" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html#using-z-score-standardization"><i class="fa fa-check"></i><b>9.3.2</b> Using <span class="math inline">\(z\)</span>-score standardization</a></li>
<li class="chapter" data-level="9.3.3" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html#testing-alternative-values-of-k"><i class="fa fa-check"></i><b>9.3.3</b> Testing alternative values of <span class="math inline">\(k\)</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="linear-regression-models.html"><a href="linear-regression-models.html"><i class="fa fa-check"></i><b>10</b> Linear Regression Models</a>
<ul>
<li class="chapter" data-level="10.1" data-path="linear-regression-models.html"><a href="linear-regression-models.html#simple-linear-regression"><i class="fa fa-check"></i><b>10.1</b> Simple Linear Regression</a></li>
<li class="chapter" data-level="10.2" data-path="linear-regression-models.html"><a href="linear-regression-models.html#smoothed-conditional-means"><i class="fa fa-check"></i><b>10.2</b> Smoothed Conditional Means</a></li>
<li class="chapter" data-level="10.3" data-path="linear-regression-models.html"><a href="linear-regression-models.html#multiple-linear-regression"><i class="fa fa-check"></i><b>10.3</b> Multiple Linear Regression</a></li>
<li class="chapter" data-level="10.4" data-path="linear-regression-models.html"><a href="linear-regression-models.html#example-diamonds"><i class="fa fa-check"></i><b>10.4</b> Example: <code>diamonds</code></a></li>
<li class="chapter" data-level="10.5" data-path="linear-regression-models.html"><a href="linear-regression-models.html#categorical-predictors"><i class="fa fa-check"></i><b>10.5</b> Categorical Predictors</a></li>
<li class="chapter" data-level="10.6" data-path="linear-regression-models.html"><a href="linear-regression-models.html#compare-models-using-anova"><i class="fa fa-check"></i><b>10.6</b> Compare models using ANOVA</a></li>
<li class="chapter" data-level="10.7" data-path="linear-regression-models.html"><a href="linear-regression-models.html#prediction"><i class="fa fa-check"></i><b>10.7</b> Prediction</a></li>
<li class="chapter" data-level="10.8" data-path="linear-regression-models.html"><a href="linear-regression-models.html#interaction-terms"><i class="fa fa-check"></i><b>10.8</b> Interaction Terms</a></li>
<li class="chapter" data-level="10.9" data-path="linear-regression-models.html"><a href="linear-regression-models.html#variable-transformation"><i class="fa fa-check"></i><b>10.9</b> Variable Transformation</a></li>
<li class="chapter" data-level="10.10" data-path="linear-regression-models.html"><a href="linear-regression-models.html#polynomial-regression"><i class="fa fa-check"></i><b>10.10</b> Polynomial Regression</a></li>
<li class="chapter" data-level="10.11" data-path="linear-regression-models.html"><a href="linear-regression-models.html#stepwise-regression"><i class="fa fa-check"></i><b>10.11</b> Stepwise regression</a></li>
<li class="chapter" data-level="10.12" data-path="linear-regression-models.html"><a href="linear-regression-models.html#best-subset"><i class="fa fa-check"></i><b>10.12</b> Best subset</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="logistic-regression-model.html"><a href="logistic-regression-model.html"><i class="fa fa-check"></i><b>11</b> Logistic Regression Model</a></li>
<li class="chapter" data-level="12" data-path="multinomial-regression-model.html"><a href="multinomial-regression-model.html"><i class="fa fa-check"></i><b>12</b> Multinomial Regression Model</a></li>
<li class="chapter" data-level="13" data-path="decision-trees.html"><a href="decision-trees.html"><i class="fa fa-check"></i><b>13</b> Decision Trees</a>
<ul>
<li class="chapter" data-level="13.1" data-path="decision-trees.html"><a href="decision-trees.html#introduction-to-classification-tree"><i class="fa fa-check"></i><b>13.1</b> Introduction to Classification Tree</a></li>
<li class="chapter" data-level="13.2" data-path="decision-trees.html"><a href="decision-trees.html#introduction-to-regression-tree"><i class="fa fa-check"></i><b>13.2</b> Introduction to regression tree</a></li>
<li class="chapter" data-level="13.3" data-path="decision-trees.html"><a href="decision-trees.html#mathematical-formulation"><i class="fa fa-check"></i><b>13.3</b> Mathematical Formulation</a></li>
<li class="chapter" data-level="13.4" data-path="decision-trees.html"><a href="decision-trees.html#examples"><i class="fa fa-check"></i><b>13.4</b> Examples</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="decision-trees.html"><a href="decision-trees.html#classification-tree"><i class="fa fa-check"></i><b>13.4.1</b> Classification Tree</a></li>
<li class="chapter" data-level="13.4.2" data-path="decision-trees.html"><a href="decision-trees.html#regression-tree"><i class="fa fa-check"></i><b>13.4.2</b> Regression Tree</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="resampling-methods.html"><a href="resampling-methods.html"><i class="fa fa-check"></i><b>14</b> Resampling Methods</a>
<ul>
<li class="chapter" data-level="14.1" data-path="resampling-methods.html"><a href="resampling-methods.html#cross-validation"><i class="fa fa-check"></i><b>14.1</b> Cross-validation</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="resampling-methods.html"><a href="resampling-methods.html#estimate-test-errors"><i class="fa fa-check"></i><b>14.1.1</b> Estimate Test Errors</a></li>
<li class="chapter" data-level="14.1.2" data-path="resampling-methods.html"><a href="resampling-methods.html#model-selection"><i class="fa fa-check"></i><b>14.1.2</b> Model Selection</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="resampling-methods.html"><a href="resampling-methods.html#bootstrap-optional"><i class="fa fa-check"></i><b>14.2</b> Bootstrap (optional)</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="ensemble-methods-and-random-forest.html"><a href="ensemble-methods-and-random-forest.html"><i class="fa fa-check"></i><b>15</b> Ensemble Methods and Random Forest</a>
<ul>
<li class="chapter" data-level="15.1" data-path="ensemble-methods-and-random-forest.html"><a href="ensemble-methods-and-random-forest.html#bagging"><i class="fa fa-check"></i><b>15.1</b> Bagging</a></li>
<li class="chapter" data-level="15.2" data-path="ensemble-methods-and-random-forest.html"><a href="ensemble-methods-and-random-forest.html#random-forest"><i class="fa fa-check"></i><b>15.2</b> Random Forest</a></li>
<li class="chapter" data-level="15.3" data-path="ensemble-methods-and-random-forest.html"><a href="ensemble-methods-and-random-forest.html#example"><i class="fa fa-check"></i><b>15.3</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>16</b> R Markdown</a>
<ul>
<li class="chapter" data-level="16.1" data-path="r-markdown.html"><a href="r-markdown.html#basic-formatting"><i class="fa fa-check"></i><b>16.1</b> Basic formatting</a></li>
<li class="chapter" data-level="16.2" data-path="r-markdown.html"><a href="r-markdown.html#this-is-a-subsection"><i class="fa fa-check"></i><b>16.2</b> This is a subsection</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="r-markdown.html"><a href="r-markdown.html#this-is-a-subsubsection"><i class="fa fa-check"></i><b>16.2.1</b> This is a subsubsection</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="r-markdown.html"><a href="r-markdown.html#formatting-text"><i class="fa fa-check"></i><b>16.3</b> Formatting Text</a></li>
<li class="chapter" data-level="16.4" data-path="r-markdown.html"><a href="r-markdown.html#list"><i class="fa fa-check"></i><b>16.4</b> List</a></li>
<li class="chapter" data-level="16.5" data-path="r-markdown.html"><a href="r-markdown.html#table"><i class="fa fa-check"></i><b>16.5</b> Table</a></li>
<li class="chapter" data-level="16.6" data-path="r-markdown.html"><a href="r-markdown.html#r-code"><i class="fa fa-check"></i><b>16.6</b> R code</a></li>
<li class="chapter" data-level="16.7" data-path="r-markdown.html"><a href="r-markdown.html#graphics"><i class="fa fa-check"></i><b>16.7</b> Graphics</a></li>
<li class="chapter" data-level="16.8" data-path="r-markdown.html"><a href="r-markdown.html#latex-equation"><i class="fa fa-check"></i><b>16.8</b> Latex Equation</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="k-means-clustering.html"><a href="k-means-clustering.html"><i class="fa fa-check"></i><b>17</b> k-means Clustering</a>
<ul>
<li class="chapter" data-level="17.1" data-path="k-means-clustering.html"><a href="k-means-clustering.html#introduction-2"><i class="fa fa-check"></i><b>17.1</b> Introduction</a></li>
<li class="chapter" data-level="17.2" data-path="k-means-clustering.html"><a href="k-means-clustering.html#applications"><i class="fa fa-check"></i><b>17.2</b> Applications</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="k-means-clustering.html"><a href="k-means-clustering.html#cluster-analysis"><i class="fa fa-check"></i><b>17.2.1</b> Cluster Analysis</a></li>
<li class="chapter" data-level="17.2.2" data-path="k-means-clustering.html"><a href="k-means-clustering.html#image-segementation-and-image-compression"><i class="fa fa-check"></i><b>17.2.2</b> Image Segementation and Image Compression</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html"><i class="fa fa-check"></i><b>18</b> Hierarchical Clustering</a>
<ul>
<li class="chapter" data-level="18.1" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#dissimilarity-measure-and-linkage"><i class="fa fa-check"></i><b>18.1</b> Dissimilarity measure and Linkage</a></li>
<li class="chapter" data-level="18.2" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#alogrithm"><i class="fa fa-check"></i><b>18.2</b> Alogrithm</a></li>
<li class="chapter" data-level="18.3" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#applications-1"><i class="fa fa-check"></i><b>18.3</b> Applications</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#nci60-data"><i class="fa fa-check"></i><b>18.3.1</b> NCI60 Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="regularization.html"><a href="regularization.html"><i class="fa fa-check"></i><b>19</b> Regularization</a>
<ul>
<li class="chapter" data-level="19.1" data-path="regularization.html"><a href="regularization.html#ridge-regression"><i class="fa fa-check"></i><b>19.1</b> Ridge Regression</a></li>
<li class="chapter" data-level="19.2" data-path="regularization.html"><a href="regularization.html#lasso"><i class="fa fa-check"></i><b>19.2</b> LASSO</a></li>
<li class="chapter" data-level="19.3" data-path="regularization.html"><a href="regularization.html#selecting-the-tuning-parameter"><i class="fa fa-check"></i><b>19.3</b> Selecting the tuning parameter</a></li>
<li class="chapter" data-level="19.4" data-path="regularization.html"><a href="regularization.html#glmnet"><i class="fa fa-check"></i><b>19.4</b> <code>glmnet</code></a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="regularization.html"><a href="regularization.html#ridge-regression-1"><i class="fa fa-check"></i><b>19.4.1</b> Ridge Regression</a></li>
<li class="chapter" data-level="19.4.2" data-path="regularization.html"><a href="regularization.html#lasso-1"><i class="fa fa-check"></i><b>19.4.2</b> LASSO</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="regularization.html"><a href="regularization.html#penalized-logistic-regression"><i class="fa fa-check"></i><b>19.5</b> Penalized Logistic Regression</a></li>
<li class="chapter" data-level="19.6" data-path="regularization.html"><a href="regularization.html#penalized-multinomial-regression"><i class="fa fa-check"></i><b>19.6</b> Penalized Multinomial Regression</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html"><i class="fa fa-check"></i><b>20</b> Evaluating Model Performance</a>
<ul>
<li class="chapter" data-level="20.1" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#accuracy-and-confusion-matrix"><i class="fa fa-check"></i><b>20.1</b> Accuracy and Confusion Matrix</a></li>
<li class="chapter" data-level="20.2" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#other-measures-of-performance"><i class="fa fa-check"></i><b>20.2</b> Other Measures of Performance</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#the-kappa-statistic"><i class="fa fa-check"></i><b>20.2.1</b> The kappa statistic</a></li>
<li class="chapter" data-level="20.2.2" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#sensitivity-and-specificity"><i class="fa fa-check"></i><b>20.2.2</b> Sensitivity and specificity</a></li>
<li class="chapter" data-level="20.2.3" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#precision-and-recall"><i class="fa fa-check"></i><b>20.2.3</b> Precision and Recall</a></li>
<li class="chapter" data-level="20.2.4" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#roc-and-auc"><i class="fa fa-check"></i><b>20.2.4</b> ROC and AUC</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#estimating-future-performances"><i class="fa fa-check"></i><b>20.3</b> Estimating future performances</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#cross-validation-1"><i class="fa fa-check"></i><b>20.3.1</b> Cross-validation</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#class-imbalance-in-classification"><i class="fa fa-check"></i><b>20.4</b> Class Imbalance in Classification</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">STAT 362 R for Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="managing-data-with-r" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Managing Data with R<a href="managing-data-with-r.html#managing-data-with-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Reference: see <a href="https://r4ds.had.co.nz/transform.html" class="uri">https://r4ds.had.co.nz/transform.html</a></p>
<p>Optional Reading: ML with R Ch2</p>
<!-- ```{r} -->
<!-- select = dplyr::select -->
<!-- ``` -->
<div id="missing-values" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Missing Values<a href="managing-data-with-r.html#missing-values" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Missing values are common in real datasets.</p>
<p><code>NA</code> is used to denote missing values.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="managing-data-with-r.html#cb142-1" tabindex="-1"></a>(x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>, <span class="dv">4</span>, <span class="cn">NA</span>, <span class="dv">4</span>)) <span class="co"># we can use (x&lt;-1) to assign 1 to x and display x at the same time</span></span>
<span id="cb142-2"><a href="managing-data-with-r.html#cb142-2" tabindex="-1"></a><span class="do">## [1]  1  2  3 NA  4 NA  4</span></span>
<span id="cb142-3"><a href="managing-data-with-r.html#cb142-3" tabindex="-1"></a></span>
<span id="cb142-4"><a href="managing-data-with-r.html#cb142-4" tabindex="-1"></a><span class="fu">mean</span>(x) <span class="co"># mean cannot be computed when missing values exist</span></span>
<span id="cb142-5"><a href="managing-data-with-r.html#cb142-5" tabindex="-1"></a><span class="do">## [1] NA</span></span>
<span id="cb142-6"><a href="managing-data-with-r.html#cb142-6" tabindex="-1"></a></span>
<span id="cb142-7"><a href="managing-data-with-r.html#cb142-7" tabindex="-1"></a><span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># NA values will be removed before computing mean</span></span>
<span id="cb142-8"><a href="managing-data-with-r.html#cb142-8" tabindex="-1"></a><span class="do">## [1] 2.8</span></span>
<span id="cb142-9"><a href="managing-data-with-r.html#cb142-9" tabindex="-1"></a></span>
<span id="cb142-10"><a href="managing-data-with-r.html#cb142-10" tabindex="-1"></a><span class="fu">sd</span>(x)  <span class="co"># sd cannot be computed when missing values exist</span></span>
<span id="cb142-11"><a href="managing-data-with-r.html#cb142-11" tabindex="-1"></a><span class="do">## [1] NA</span></span>
<span id="cb142-12"><a href="managing-data-with-r.html#cb142-12" tabindex="-1"></a></span>
<span id="cb142-13"><a href="managing-data-with-r.html#cb142-13" tabindex="-1"></a><span class="fu">sd</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># NA values will be removed before computing SD</span></span>
<span id="cb142-14"><a href="managing-data-with-r.html#cb142-14" tabindex="-1"></a><span class="do">## [1] 1.30384</span></span>
<span id="cb142-15"><a href="managing-data-with-r.html#cb142-15" tabindex="-1"></a></span>
<span id="cb142-16"><a href="managing-data-with-r.html#cb142-16" tabindex="-1"></a><span class="fu">is.na</span>(x) <span class="co"># logical vector</span></span>
<span id="cb142-17"><a href="managing-data-with-r.html#cb142-17" tabindex="-1"></a><span class="do">## [1] FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE</span></span>
<span id="cb142-18"><a href="managing-data-with-r.html#cb142-18" tabindex="-1"></a></span>
<span id="cb142-19"><a href="managing-data-with-r.html#cb142-19" tabindex="-1"></a>x[<span class="sc">!</span><span class="fu">is.na</span>(x)] <span class="co">#select the elements with non-missing valuess</span></span>
<span id="cb142-20"><a href="managing-data-with-r.html#cb142-20" tabindex="-1"></a><span class="do">## [1] 1 2 3 4 4</span></span>
<span id="cb142-21"><a href="managing-data-with-r.html#cb142-21" tabindex="-1"></a></span>
<span id="cb142-22"><a href="managing-data-with-r.html#cb142-22" tabindex="-1"></a><span class="fu">na.omit</span>(x) <span class="co"># select the elements with non-missing valuess</span></span>
<span id="cb142-23"><a href="managing-data-with-r.html#cb142-23" tabindex="-1"></a><span class="do">## [1] 1 2 3 4 4</span></span>
<span id="cb142-24"><a href="managing-data-with-r.html#cb142-24" tabindex="-1"></a><span class="do">## attr(,&quot;na.action&quot;)</span></span>
<span id="cb142-25"><a href="managing-data-with-r.html#cb142-25" tabindex="-1"></a><span class="do">## [1] 4 6</span></span>
<span id="cb142-26"><a href="managing-data-with-r.html#cb142-26" tabindex="-1"></a><span class="do">## attr(,&quot;class&quot;)</span></span>
<span id="cb142-27"><a href="managing-data-with-r.html#cb142-27" tabindex="-1"></a><span class="do">## [1] &quot;omit&quot;</span></span></code></pre></div>
</div>
<div id="saving-loading-and-removing-r-data-structures" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Saving, loading, and removing R data structures<a href="managing-data-with-r.html#saving-loading-and-removing-r-data-structures" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Removing all objects in R:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="managing-data-with-r.html#cb143-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code></pre></div>
<p><code>ls()</code> returns a vector of all data structures currently in memory</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="managing-data-with-r.html#cb144-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb144-2"><a href="managing-data-with-r.html#cb144-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb144-3"><a href="managing-data-with-r.html#cb144-3" tabindex="-1"></a><span class="fu">ls</span>()</span>
<span id="cb144-4"><a href="managing-data-with-r.html#cb144-4" tabindex="-1"></a><span class="do">## [1] &quot;x&quot; &quot;y&quot;</span></span></code></pre></div>
<p>To remove <code>x</code> from the memory</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="managing-data-with-r.html#cb145-1" tabindex="-1"></a><span class="fu">rm</span>(x)</span>
<span id="cb145-2"><a href="managing-data-with-r.html#cb145-2" tabindex="-1"></a>x <span class="co"># because we have deleted x, an error message occurs</span></span>
<span id="cb145-3"><a href="managing-data-with-r.html#cb145-3" tabindex="-1"></a><span class="do">## Error in eval(expr, envir, enclos): object &#39;x&#39; not found</span></span></code></pre></div>
<p>Saving objects to a file (regardless of whether they are vectors, factors, lists, etc)</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="managing-data-with-r.html#cb146-1" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb146-2"><a href="managing-data-with-r.html#cb146-2" tabindex="-1"></a></span>
<span id="cb146-3"><a href="managing-data-with-r.html#cb146-3" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb146-4"><a href="managing-data-with-r.html#cb146-4" tabindex="-1"></a>  <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb146-5"><a href="managing-data-with-r.html#cb146-5" tabindex="-1"></a>}</span>
<span id="cb146-6"><a href="managing-data-with-r.html#cb146-6" tabindex="-1"></a></span>
<span id="cb146-7"><a href="managing-data-with-r.html#cb146-7" tabindex="-1"></a><span class="fu">save</span>(A, f, <span class="at">file =</span> <span class="st">&quot;my_data.RData&quot;</span>)</span></code></pre></div>
<p>Loading objects from a <code>.RData</code> file.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="managing-data-with-r.html#cb147-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()) <span class="co"># remove everything </span></span>
<span id="cb147-2"><a href="managing-data-with-r.html#cb147-2" tabindex="-1"></a></span>
<span id="cb147-3"><a href="managing-data-with-r.html#cb147-3" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;my_data.RData&quot;</span>)</span>
<span id="cb147-4"><a href="managing-data-with-r.html#cb147-4" tabindex="-1"></a></span>
<span id="cb147-5"><a href="managing-data-with-r.html#cb147-5" tabindex="-1"></a>A</span>
<span id="cb147-6"><a href="managing-data-with-r.html#cb147-6" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3]</span></span>
<span id="cb147-7"><a href="managing-data-with-r.html#cb147-7" tabindex="-1"></a><span class="do">## [1,]    1    4    7</span></span>
<span id="cb147-8"><a href="managing-data-with-r.html#cb147-8" tabindex="-1"></a><span class="do">## [2,]    2    5    8</span></span>
<span id="cb147-9"><a href="managing-data-with-r.html#cb147-9" tabindex="-1"></a><span class="do">## [3,]    3    6    9</span></span>
<span id="cb147-10"><a href="managing-data-with-r.html#cb147-10" tabindex="-1"></a></span>
<span id="cb147-11"><a href="managing-data-with-r.html#cb147-11" tabindex="-1"></a>f</span>
<span id="cb147-12"><a href="managing-data-with-r.html#cb147-12" tabindex="-1"></a><span class="do">## function(x){</span></span>
<span id="cb147-13"><a href="managing-data-with-r.html#cb147-13" tabindex="-1"></a><span class="do">##   return(1)</span></span>
<span id="cb147-14"><a href="managing-data-with-r.html#cb147-14" tabindex="-1"></a><span class="do">## }</span></span></code></pre></div>
</div>
<div id="importing-and-saving-data-from-csv-files" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Importing and saving data from CSV files<a href="managing-data-with-r.html#importing-and-saving-data-from-csv-files" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Finding current directory</strong></p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="managing-data-with-r.html#cb148-1" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb148-2"><a href="managing-data-with-r.html#cb148-2" tabindex="-1"></a><span class="do">## [1] &quot;C:/Queens Teaching/01_Teaching/STAT 362 W24 R for data science/01c_published_webiste&quot;</span></span></code></pre></div>
<p>If you use mac, you will probably see <code>"/Users/..../"</code>.</p>
<p><strong>Setting working directory</strong></p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="managing-data-with-r.html#cb149-1" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;C:/Queens Teaching/01_Teaching/STAT 362 W24 R for data science/01_lect_notes/Ch4_Managing_Data_and_dplyr&quot;</span>) <span class="co"># use /, not \</span></span></code></pre></div>
<p>If you use mac, change the above code accordingly.</p>
<p><strong>Writing to a file</strong></p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="managing-data-with-r.html#cb150-1" tabindex="-1"></a>my_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">3</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>))</span>
<span id="cb150-2"><a href="managing-data-with-r.html#cb150-2" tabindex="-1"></a>my_data</span>
<span id="cb150-3"><a href="managing-data-with-r.html#cb150-3" tabindex="-1"></a><span class="do">##    x y</span></span>
<span id="cb150-4"><a href="managing-data-with-r.html#cb150-4" tabindex="-1"></a><span class="do">## 1  5 4</span></span>
<span id="cb150-5"><a href="managing-data-with-r.html#cb150-5" tabindex="-1"></a><span class="do">## 2 10 5</span></span>
<span id="cb150-6"><a href="managing-data-with-r.html#cb150-6" tabindex="-1"></a><span class="do">## 3  3 6</span></span>
<span id="cb150-7"><a href="managing-data-with-r.html#cb150-7" tabindex="-1"></a><span class="fu">write.csv</span>(my_data, <span class="st">&quot;C:/Queens Teaching/01_Teaching/STAT 362 W24 R for data science/01_lect_notes/Ch4_Managing_Data_and_dplyr/my_data.csv&quot;</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><strong>Reading a csv file</strong></p>
<p>A comma-separated values (CSV) file is a delimited text file that uses a comma to separate values. If we use <code>read_csv</code> from the package <code>tidyverse</code>, the resulting object is a tibble. If we use <code>read.csv</code> from base R, the resulting object is a data frame. See R for data science (<a href="https://r4ds.had.co.nz/data-import.html" class="uri">https://r4ds.had.co.nz/data-import.html</a>) for a discussion on the differences between <code>read.csv</code> and <code>read_csv</code>.</p>
<!-- A tibble allows us to perform different types of transformation (next chapter). -->
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="managing-data-with-r.html#cb151-1" tabindex="-1"></a>my_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;C:/Queens Teaching/01_Teaching/STAT 362 W24 R for data science/01_lect_notes/Ch4_Managing_Data_and_dplyr/my_data.csv&quot;</span>) </span></code></pre></div>
</div>
<div id="data-transformation-with-dplyr" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Data Transformation with <code>dplyr</code><a href="managing-data-with-r.html#data-transformation-with-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Preparation</strong></p>
<p>We will use a dataset in the package <code>nycflights13</code>. To install it:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="managing-data-with-r.html#cb152-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;nycflights13&quot;</span>)</span></code></pre></div>
<p>To use the dataset or functions in the package, we first load the library:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="managing-data-with-r.html#cb153-1" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span></code></pre></div>
<p>In Chapter 4, we have installed <code>tidyverse</code>, which contains the package <code>dplyr</code>. Now, load the package</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="managing-data-with-r.html#cb154-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p><strong>nycflights13</strong></p>
<p>The dataset <code>flights</code> in the package <code>nyclfights13</code> contains all <span class="math inline">\(336,776\)</span> flights that departed from New York City in 2013. Check <code>?flights</code> for details.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="managing-data-with-r.html#cb155-1" tabindex="-1"></a><span class="co"># let&#39;s view the dataset</span></span>
<span id="cb155-2"><a href="managing-data-with-r.html#cb155-2" tabindex="-1"></a>flights</span>
<span id="cb155-3"><a href="managing-data-with-r.html#cb155-3" tabindex="-1"></a><span class="do">## # A tibble: 336,776 × 19</span></span>
<span id="cb155-4"><a href="managing-data-with-r.html#cb155-4" tabindex="-1"></a><span class="do">##     year month   day dep_time sched_…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier</span></span>
<span id="cb155-5"><a href="managing-data-with-r.html#cb155-5" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;  </span></span>
<span id="cb155-6"><a href="managing-data-with-r.html#cb155-6" tabindex="-1"></a><span class="do">##  1  2013     1     1      517      515       2     830     819      11 UA     </span></span>
<span id="cb155-7"><a href="managing-data-with-r.html#cb155-7" tabindex="-1"></a><span class="do">##  2  2013     1     1      533      529       4     850     830      20 UA     </span></span>
<span id="cb155-8"><a href="managing-data-with-r.html#cb155-8" tabindex="-1"></a><span class="do">##  3  2013     1     1      542      540       2     923     850      33 AA     </span></span>
<span id="cb155-9"><a href="managing-data-with-r.html#cb155-9" tabindex="-1"></a><span class="do">##  4  2013     1     1      544      545      -1    1004    1022     -18 B6     </span></span>
<span id="cb155-10"><a href="managing-data-with-r.html#cb155-10" tabindex="-1"></a><span class="do">##  5  2013     1     1      554      600      -6     812     837     -25 DL     </span></span>
<span id="cb155-11"><a href="managing-data-with-r.html#cb155-11" tabindex="-1"></a><span class="do">##  6  2013     1     1      554      558      -4     740     728      12 UA     </span></span>
<span id="cb155-12"><a href="managing-data-with-r.html#cb155-12" tabindex="-1"></a><span class="do">##  7  2013     1     1      555      600      -5     913     854      19 B6     </span></span>
<span id="cb155-13"><a href="managing-data-with-r.html#cb155-13" tabindex="-1"></a><span class="do">##  8  2013     1     1      557      600      -3     709     723     -14 EV     </span></span>
<span id="cb155-14"><a href="managing-data-with-r.html#cb155-14" tabindex="-1"></a><span class="do">##  9  2013     1     1      557      600      -3     838     846      -8 B6     </span></span>
<span id="cb155-15"><a href="managing-data-with-r.html#cb155-15" tabindex="-1"></a><span class="do">## 10  2013     1     1      558      600      -2     753     745       8 AA     </span></span>
<span id="cb155-16"><a href="managing-data-with-r.html#cb155-16" tabindex="-1"></a><span class="do">## # … with 336,766 more rows, 9 more variables: flight &lt;int&gt;, tailnum &lt;chr&gt;,</span></span>
<span id="cb155-17"><a href="managing-data-with-r.html#cb155-17" tabindex="-1"></a><span class="do">## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,</span></span>
<span id="cb155-18"><a href="managing-data-with-r.html#cb155-18" tabindex="-1"></a><span class="do">## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, and abbreviated variable names</span></span>
<span id="cb155-19"><a href="managing-data-with-r.html#cb155-19" tabindex="-1"></a><span class="do">## #   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay</span></span></code></pre></div>
<p><code>flights</code> is a tibble. Tibbles are data frames with better properties.</p>
<p><strong>Optional</strong>: If you are interested in the differences between a <code>data frame</code> and a <code>tibble</code>, you can go to
<a href="https://cran.r-project.org/web/packages/tibble/vignettes/tibble.html" class="uri">https://cran.r-project.org/web/packages/tibble/vignettes/tibble.html</a></p>
<p>To view the complete dataset, use <code>View(flights)</code>.</p>
<p><strong>Five key dplyr functions</strong></p>
<ol style="list-style-type: decimal">
<li><code>arrange()</code>: reorder the rows</li>
<li><code>fliter()</code>: pick observations by their values</li>
<li><code>select()</code>: pick variables by their names</li>
<li><code>mutate()</code>: create new variables with functions of existing variables</li>
<li><code>summarize()</code>: collapse many values down to a single summary
<!-- 6. `group_by()`: changes the scope of each function from operating on the entire dataset to operating on it group-by-group --></li>
</ol>
<p>All functions work similarly:</p>
<ol style="list-style-type: decimal">
<li>The first argument is a data frame/ tibble</li>
<li>The subsequent argument describe what to do with the data frame, using the variable names (without quotes).</li>
<li>The result is a new data frame.</li>
</ol>
<p>Of course, it is also possible to perform the same tasks without using <code>dplyr</code> functions. We will also discuss briefly how to use the base subsetting with <code>[]</code> to select the data. In general, the functions in <code>dplyr</code> are designed to transform the data more easily.</p>
</div>
<div id="arrange" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> <code>arrange()</code><a href="managing-data-with-r.html#arrange" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>arrange()</code> orders your dataset. If more than one column name is provided, each additional column will be used to break ties in the values of preceding columns.</p>
<p>To reorder by a column in <strong>ascending order</strong>:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="managing-data-with-r.html#cb156-1" tabindex="-1"></a><span class="fu">arrange</span>(flights, year, month, day)</span></code></pre></div>
<p>Let’s create a simple dataset to illustrate this because <code>flights</code> is already sorted in year, month and day.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="managing-data-with-r.html#cb157-1" tabindex="-1"></a>(data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">5</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>)))</span>
<span id="cb157-2"><a href="managing-data-with-r.html#cb157-2" tabindex="-1"></a><span class="do">## # A tibble: 5 × 2</span></span>
<span id="cb157-3"><a href="managing-data-with-r.html#cb157-3" tabindex="-1"></a><span class="do">##       x     y</span></span>
<span id="cb157-4"><a href="managing-data-with-r.html#cb157-4" tabindex="-1"></a><span class="do">##   &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb157-5"><a href="managing-data-with-r.html#cb157-5" tabindex="-1"></a><span class="do">## 1     2     2</span></span>
<span id="cb157-6"><a href="managing-data-with-r.html#cb157-6" tabindex="-1"></a><span class="do">## 2     2     3</span></span>
<span id="cb157-7"><a href="managing-data-with-r.html#cb157-7" tabindex="-1"></a><span class="do">## 3     1    10</span></span>
<span id="cb157-8"><a href="managing-data-with-r.html#cb157-8" tabindex="-1"></a><span class="do">## 4     4    10</span></span>
<span id="cb157-9"><a href="managing-data-with-r.html#cb157-9" tabindex="-1"></a><span class="do">## 5     5    10</span></span>
<span id="cb157-10"><a href="managing-data-with-r.html#cb157-10" tabindex="-1"></a></span>
<span id="cb157-11"><a href="managing-data-with-r.html#cb157-11" tabindex="-1"></a><span class="fu">arrange</span>(data, x)</span>
<span id="cb157-12"><a href="managing-data-with-r.html#cb157-12" tabindex="-1"></a><span class="do">## # A tibble: 5 × 2</span></span>
<span id="cb157-13"><a href="managing-data-with-r.html#cb157-13" tabindex="-1"></a><span class="do">##       x     y</span></span>
<span id="cb157-14"><a href="managing-data-with-r.html#cb157-14" tabindex="-1"></a><span class="do">##   &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb157-15"><a href="managing-data-with-r.html#cb157-15" tabindex="-1"></a><span class="do">## 1     1    10</span></span>
<span id="cb157-16"><a href="managing-data-with-r.html#cb157-16" tabindex="-1"></a><span class="do">## 2     2     2</span></span>
<span id="cb157-17"><a href="managing-data-with-r.html#cb157-17" tabindex="-1"></a><span class="do">## 3     2     3</span></span>
<span id="cb157-18"><a href="managing-data-with-r.html#cb157-18" tabindex="-1"></a><span class="do">## 4     4    10</span></span>
<span id="cb157-19"><a href="managing-data-with-r.html#cb157-19" tabindex="-1"></a><span class="do">## 5     5    10</span></span>
<span id="cb157-20"><a href="managing-data-with-r.html#cb157-20" tabindex="-1"></a></span>
<span id="cb157-21"><a href="managing-data-with-r.html#cb157-21" tabindex="-1"></a><span class="co"># first sort in ascending order of x, use y to break any ties and sort in descending order</span></span>
<span id="cb157-22"><a href="managing-data-with-r.html#cb157-22" tabindex="-1"></a><span class="fu">arrange</span>(data, x, <span class="fu">desc</span>(y))</span>
<span id="cb157-23"><a href="managing-data-with-r.html#cb157-23" tabindex="-1"></a><span class="do">## # A tibble: 5 × 2</span></span>
<span id="cb157-24"><a href="managing-data-with-r.html#cb157-24" tabindex="-1"></a><span class="do">##       x     y</span></span>
<span id="cb157-25"><a href="managing-data-with-r.html#cb157-25" tabindex="-1"></a><span class="do">##   &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb157-26"><a href="managing-data-with-r.html#cb157-26" tabindex="-1"></a><span class="do">## 1     1    10</span></span>
<span id="cb157-27"><a href="managing-data-with-r.html#cb157-27" tabindex="-1"></a><span class="do">## 2     2     3</span></span>
<span id="cb157-28"><a href="managing-data-with-r.html#cb157-28" tabindex="-1"></a><span class="do">## 3     2     2</span></span>
<span id="cb157-29"><a href="managing-data-with-r.html#cb157-29" tabindex="-1"></a><span class="do">## 4     4    10</span></span>
<span id="cb157-30"><a href="managing-data-with-r.html#cb157-30" tabindex="-1"></a><span class="do">## 5     5    10</span></span></code></pre></div>
<p>To reorder by a column in <strong>descending order</strong>, use <code>desc()</code>:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="managing-data-with-r.html#cb158-1" tabindex="-1"></a><span class="fu">arrange</span>(flights, <span class="fu">desc</span>(arr_delay))</span></code></pre></div>
<p>Missing values are always sorted at the end</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="managing-data-with-r.html#cb159-1" tabindex="-1"></a><span class="co"># create a tibble with one column called x with values 5,2,NA</span></span>
<span id="cb159-2"><a href="managing-data-with-r.html#cb159-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="cn">NA</span>)) </span>
<span id="cb159-3"><a href="managing-data-with-r.html#cb159-3" tabindex="-1"></a><span class="fu">arrange</span>(df, x)</span>
<span id="cb159-4"><a href="managing-data-with-r.html#cb159-4" tabindex="-1"></a><span class="do">## # A tibble: 3 × 1</span></span>
<span id="cb159-5"><a href="managing-data-with-r.html#cb159-5" tabindex="-1"></a><span class="do">##       x</span></span>
<span id="cb159-6"><a href="managing-data-with-r.html#cb159-6" tabindex="-1"></a><span class="do">##   &lt;dbl&gt;</span></span>
<span id="cb159-7"><a href="managing-data-with-r.html#cb159-7" tabindex="-1"></a><span class="do">## 1     2</span></span>
<span id="cb159-8"><a href="managing-data-with-r.html#cb159-8" tabindex="-1"></a><span class="do">## 2     5</span></span>
<span id="cb159-9"><a href="managing-data-with-r.html#cb159-9" tabindex="-1"></a><span class="do">## 3    NA</span></span>
<span id="cb159-10"><a href="managing-data-with-r.html#cb159-10" tabindex="-1"></a></span>
<span id="cb159-11"><a href="managing-data-with-r.html#cb159-11" tabindex="-1"></a><span class="fu">arrange</span>(df, <span class="fu">desc</span>(x))</span>
<span id="cb159-12"><a href="managing-data-with-r.html#cb159-12" tabindex="-1"></a><span class="do">## # A tibble: 3 × 1</span></span>
<span id="cb159-13"><a href="managing-data-with-r.html#cb159-13" tabindex="-1"></a><span class="do">##       x</span></span>
<span id="cb159-14"><a href="managing-data-with-r.html#cb159-14" tabindex="-1"></a><span class="do">##   &lt;dbl&gt;</span></span>
<span id="cb159-15"><a href="managing-data-with-r.html#cb159-15" tabindex="-1"></a><span class="do">## 1     5</span></span>
<span id="cb159-16"><a href="managing-data-with-r.html#cb159-16" tabindex="-1"></a><span class="do">## 2     2</span></span>
<span id="cb159-17"><a href="managing-data-with-r.html#cb159-17" tabindex="-1"></a><span class="do">## 3    NA</span></span></code></pre></div>
<div id="exercises-2" class="section level3 hasAnchor" number="4.5.1">
<h3><span class="header-section-number">4.5.1</span> Exercises<a href="managing-data-with-r.html#exercises-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Sort <code>flights</code> to find the most delayed flights. Find the flights that left earliest.</li>
</ol>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="managing-data-with-r.html#cb160-1" tabindex="-1"></a><span class="fu">arrange</span>(flights, <span class="fu">desc</span>(dep_delay))</span>
<span id="cb160-2"><a href="managing-data-with-r.html#cb160-2" tabindex="-1"></a></span>
<span id="cb160-3"><a href="managing-data-with-r.html#cb160-3" tabindex="-1"></a><span class="fu">arrange</span>(flights, dep_delay)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Which flights traveled the longest? Which traveled the shortest?</li>
</ol>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="managing-data-with-r.html#cb161-1" tabindex="-1"></a><span class="fu">arrange</span>(flights, <span class="fu">desc</span>(distance))</span>
<span id="cb161-2"><a href="managing-data-with-r.html#cb161-2" tabindex="-1"></a></span>
<span id="cb161-3"><a href="managing-data-with-r.html#cb161-3" tabindex="-1"></a><span class="fu">arrange</span>(flights, distance)</span></code></pre></div>
</div>
</div>
<div id="filter" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> <code>filter()</code><a href="managing-data-with-r.html#filter" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong><code>filter()</code> only includes rows where the condition is <code>TRUE</code></strong></p>
<p>Select all flights on Jan 1st:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="managing-data-with-r.html#cb162-1" tabindex="-1"></a><span class="co"># flights is the name of your data frame</span></span>
<span id="cb162-2"><a href="managing-data-with-r.html#cb162-2" tabindex="-1"></a><span class="co"># month == 1, day == 1 is the condition</span></span>
<span id="cb162-3"><a href="managing-data-with-r.html#cb162-3" tabindex="-1"></a>(jan1 <span class="ot">&lt;-</span> <span class="fu">filter</span>(flights, month <span class="sc">==</span> <span class="dv">1</span>, day <span class="sc">==</span> <span class="dv">1</span>))</span>
<span id="cb162-4"><a href="managing-data-with-r.html#cb162-4" tabindex="-1"></a><span class="do">## # A tibble: 842 × 19</span></span>
<span id="cb162-5"><a href="managing-data-with-r.html#cb162-5" tabindex="-1"></a><span class="do">##     year month   day dep_time sched_…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier</span></span>
<span id="cb162-6"><a href="managing-data-with-r.html#cb162-6" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;  </span></span>
<span id="cb162-7"><a href="managing-data-with-r.html#cb162-7" tabindex="-1"></a><span class="do">##  1  2013     1     1      517      515       2     830     819      11 UA     </span></span>
<span id="cb162-8"><a href="managing-data-with-r.html#cb162-8" tabindex="-1"></a><span class="do">##  2  2013     1     1      533      529       4     850     830      20 UA     </span></span>
<span id="cb162-9"><a href="managing-data-with-r.html#cb162-9" tabindex="-1"></a><span class="do">##  3  2013     1     1      542      540       2     923     850      33 AA     </span></span>
<span id="cb162-10"><a href="managing-data-with-r.html#cb162-10" tabindex="-1"></a><span class="do">##  4  2013     1     1      544      545      -1    1004    1022     -18 B6     </span></span>
<span id="cb162-11"><a href="managing-data-with-r.html#cb162-11" tabindex="-1"></a><span class="do">##  5  2013     1     1      554      600      -6     812     837     -25 DL     </span></span>
<span id="cb162-12"><a href="managing-data-with-r.html#cb162-12" tabindex="-1"></a><span class="do">##  6  2013     1     1      554      558      -4     740     728      12 UA     </span></span>
<span id="cb162-13"><a href="managing-data-with-r.html#cb162-13" tabindex="-1"></a><span class="do">##  7  2013     1     1      555      600      -5     913     854      19 B6     </span></span>
<span id="cb162-14"><a href="managing-data-with-r.html#cb162-14" tabindex="-1"></a><span class="do">##  8  2013     1     1      557      600      -3     709     723     -14 EV     </span></span>
<span id="cb162-15"><a href="managing-data-with-r.html#cb162-15" tabindex="-1"></a><span class="do">##  9  2013     1     1      557      600      -3     838     846      -8 B6     </span></span>
<span id="cb162-16"><a href="managing-data-with-r.html#cb162-16" tabindex="-1"></a><span class="do">## 10  2013     1     1      558      600      -2     753     745       8 AA     </span></span>
<span id="cb162-17"><a href="managing-data-with-r.html#cb162-17" tabindex="-1"></a><span class="do">## # … with 832 more rows, 9 more variables: flight &lt;int&gt;, tailnum &lt;chr&gt;,</span></span>
<span id="cb162-18"><a href="managing-data-with-r.html#cb162-18" tabindex="-1"></a><span class="do">## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,</span></span>
<span id="cb162-19"><a href="managing-data-with-r.html#cb162-19" tabindex="-1"></a><span class="do">## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, and abbreviated variable names</span></span>
<span id="cb162-20"><a href="managing-data-with-r.html#cb162-20" tabindex="-1"></a><span class="do">## #   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay</span></span></code></pre></div>
<p>Let’s use a simple dataset to see how to perform the same task without <code>filter</code>:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="managing-data-with-r.html#cb163-1" tabindex="-1"></a><span class="co"># just a simple dataset</span></span>
<span id="cb163-2"><a href="managing-data-with-r.html#cb163-2" tabindex="-1"></a>(data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">3</span>), <span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb163-3"><a href="managing-data-with-r.html#cb163-3" tabindex="-1"></a><span class="do">## # A tibble: 5 × 2</span></span>
<span id="cb163-4"><a href="managing-data-with-r.html#cb163-4" tabindex="-1"></a><span class="do">##       x     y</span></span>
<span id="cb163-5"><a href="managing-data-with-r.html#cb163-5" tabindex="-1"></a><span class="do">##   &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb163-6"><a href="managing-data-with-r.html#cb163-6" tabindex="-1"></a><span class="do">## 1     1     1</span></span>
<span id="cb163-7"><a href="managing-data-with-r.html#cb163-7" tabindex="-1"></a><span class="do">## 2     3     2</span></span>
<span id="cb163-8"><a href="managing-data-with-r.html#cb163-8" tabindex="-1"></a><span class="do">## 3     5     3</span></span>
<span id="cb163-9"><a href="managing-data-with-r.html#cb163-9" tabindex="-1"></a><span class="do">## 4     5     4</span></span>
<span id="cb163-10"><a href="managing-data-with-r.html#cb163-10" tabindex="-1"></a><span class="do">## 5     3     5</span></span>
<span id="cb163-11"><a href="managing-data-with-r.html#cb163-11" tabindex="-1"></a></span>
<span id="cb163-12"><a href="managing-data-with-r.html#cb163-12" tabindex="-1"></a>data<span class="sc">$</span>x <span class="sc">==</span> <span class="dv">5</span> <span class="co"># logical vector</span></span>
<span id="cb163-13"><a href="managing-data-with-r.html#cb163-13" tabindex="-1"></a><span class="do">## [1] FALSE FALSE  TRUE  TRUE FALSE</span></span>
<span id="cb163-14"><a href="managing-data-with-r.html#cb163-14" tabindex="-1"></a></span>
<span id="cb163-15"><a href="managing-data-with-r.html#cb163-15" tabindex="-1"></a>data[data<span class="sc">$</span>x <span class="sc">==</span> <span class="dv">5</span>, ] <span class="co"># select the rows with value &quot;TRUE&quot;</span></span>
<span id="cb163-16"><a href="managing-data-with-r.html#cb163-16" tabindex="-1"></a><span class="do">## # A tibble: 2 × 2</span></span>
<span id="cb163-17"><a href="managing-data-with-r.html#cb163-17" tabindex="-1"></a><span class="do">##       x     y</span></span>
<span id="cb163-18"><a href="managing-data-with-r.html#cb163-18" tabindex="-1"></a><span class="do">##   &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb163-19"><a href="managing-data-with-r.html#cb163-19" tabindex="-1"></a><span class="do">## 1     5     3</span></span>
<span id="cb163-20"><a href="managing-data-with-r.html#cb163-20" tabindex="-1"></a><span class="do">## 2     5     4</span></span>
<span id="cb163-21"><a href="managing-data-with-r.html#cb163-21" tabindex="-1"></a></span>
<span id="cb163-22"><a href="managing-data-with-r.html#cb163-22" tabindex="-1"></a><span class="co"># returning to the flights dataset</span></span>
<span id="cb163-23"><a href="managing-data-with-r.html#cb163-23" tabindex="-1"></a>base_jan1 <span class="ot">&lt;-</span> flights[(flights<span class="sc">$</span>month <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> flights<span class="sc">$</span>day <span class="sc">==</span> <span class="dv">1</span>), ]</span></code></pre></div>
<p><code>(flights$month == 1 &amp; flights$day == 1)</code> is a logical vector indicating if the corresponding flight was on Jan 1 (<code>TRUE</code> if yes).</p>
<p>Now, let’s check if <code>jan1</code> and <code>base_jan1</code> are the same using <code>identical</code>:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="managing-data-with-r.html#cb164-1" tabindex="-1"></a><span class="fu">identical</span>(jan1, base_jan1) <span class="co"># TURE means they are the same, FALSE means they are not the same</span></span>
<span id="cb164-2"><a href="managing-data-with-r.html#cb164-2" tabindex="-1"></a><span class="do">## [1] TRUE</span></span></code></pre></div>
<p><strong>More Examples</strong></p>
<p>Select flights that departed in <strong>Nov or Dec</strong></p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="managing-data-with-r.html#cb165-1" tabindex="-1"></a><span class="fu">filter</span>(flights, month <span class="sc">==</span> <span class="dv">11</span> <span class="sc">|</span> month <span class="sc">==</span> <span class="dv">12</span>)</span>
<span id="cb165-2"><a href="managing-data-with-r.html#cb165-2" tabindex="-1"></a></span>
<span id="cb165-3"><a href="managing-data-with-r.html#cb165-3" tabindex="-1"></a><span class="co"># alternatively, simpler code</span></span>
<span id="cb165-4"><a href="managing-data-with-r.html#cb165-4" tabindex="-1"></a><span class="fu">filter</span>(flights, month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">12</span>))</span></code></pre></div>
<p>How to use the operator <code>%in%</code>?</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="managing-data-with-r.html#cb166-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>)</span>
<span id="cb166-2"><a href="managing-data-with-r.html#cb166-2" tabindex="-1"></a></span>
<span id="cb166-3"><a href="managing-data-with-r.html#cb166-3" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb166-4"><a href="managing-data-with-r.html#cb166-4" tabindex="-1"></a>x <span class="sc">%in%</span> y <span class="co">#whether 1 is in {1,3,5}</span></span>
<span id="cb166-5"><a href="managing-data-with-r.html#cb166-5" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb166-6"><a href="managing-data-with-r.html#cb166-6" tabindex="-1"></a></span>
<span id="cb166-7"><a href="managing-data-with-r.html#cb166-7" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">1</span>)</span>
<span id="cb166-8"><a href="managing-data-with-r.html#cb166-8" tabindex="-1"></a>x <span class="sc">%in%</span> y <span class="co"># check whether each element in x is in {1,3,5}</span></span>
<span id="cb166-9"><a href="managing-data-with-r.html#cb166-9" tabindex="-1"></a><span class="do">## [1]  TRUE  TRUE FALSE FALSE  TRUE</span></span></code></pre></div>
<p><code>%in%</code> also works with characters</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="managing-data-with-r.html#cb167-1" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>)</span>
<span id="cb167-2"><a href="managing-data-with-r.html#cb167-2" tabindex="-1"></a><span class="do">## [1]  TRUE FALSE</span></span></code></pre></div>
<p>The result is <code>TRUE FALSE</code> because <code>"a"</code> is in <code>c("a", "c", "d")</code> and <code>"b"</code> is not in <code>c("a", "c", "d")</code>.</p>
<p>Perform the same task without <code>filter</code>:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="managing-data-with-r.html#cb168-1" tabindex="-1"></a>flights[flights<span class="sc">$</span>month <span class="sc">==</span> <span class="dv">11</span> <span class="sc">|</span> flights<span class="sc">$</span>month <span class="sc">==</span> <span class="dv">12</span>,]</span>
<span id="cb168-2"><a href="managing-data-with-r.html#cb168-2" tabindex="-1"></a></span>
<span id="cb168-3"><a href="managing-data-with-r.html#cb168-3" tabindex="-1"></a><span class="co"># or </span></span>
<span id="cb168-4"><a href="managing-data-with-r.html#cb168-4" tabindex="-1"></a>flights[flights<span class="sc">$</span>month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">12</span>), ]</span></code></pre></div>
<p>Flights that were <strong>not delayed</strong> (on arrival or departure) by <strong>more than two hours</strong>:</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="managing-data-with-r.html#cb169-1" tabindex="-1"></a>delay1 <span class="ot">&lt;-</span> <span class="fu">filter</span>(flights, arr_delay <span class="sc">&lt;=</span> <span class="dv">120</span>, dep_delay <span class="sc">&lt;=</span> <span class="dv">120</span>)</span></code></pre></div>
<p>Without using <code>filter</code></p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="managing-data-with-r.html#cb170-1" tabindex="-1"></a>delay2 <span class="ot">&lt;-</span> flights[flights<span class="sc">$</span>arr_delay <span class="sc">&lt;=</span> <span class="dv">120</span> <span class="sc">&amp;</span> flights<span class="sc">$</span>dep_delay <span class="sc">&lt;=</span> <span class="dv">120</span>, ]</span></code></pre></div>
<p>Let’s check if <code>delay1</code> and <code>delay2</code> are the same.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="managing-data-with-r.html#cb171-1" tabindex="-1"></a><span class="fu">identical</span>(delay1, delay2)</span>
<span id="cb171-2"><a href="managing-data-with-r.html#cb171-2" tabindex="-1"></a><span class="do">## [1] FALSE</span></span></code></pre></div>
<p>The result is <code>FALSE</code>, meaning <code>delay1</code> and <code>delay2</code> are not the same. Why? Because some elements in <code>flights$arr_delay &lt;= 120 &amp; flights$dep_delay &lt;= 120</code> are <code>NA</code>.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="managing-data-with-r.html#cb172-1" tabindex="-1"></a><span class="co"># to find out the number of NA values</span></span>
<span id="cb172-2"><a href="managing-data-with-r.html#cb172-2" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(flights<span class="sc">$</span>arr_delay <span class="sc">&lt;=</span> <span class="dv">120</span> <span class="sc">&amp;</span> flights<span class="sc">$</span>dep_delay <span class="sc">&lt;=</span> <span class="dv">120</span>))</span>
<span id="cb172-3"><a href="managing-data-with-r.html#cb172-3" tabindex="-1"></a><span class="do">## [1] 9304</span></span></code></pre></div>
<p>As a result, with the base subsetting method, a row with all <code>NA</code> values will be selected. On the other hand, for <code>filter</code>, when a condition evaluates to <code>NA</code>, the row will be dropped. Let’s create a small dataset to illustrate this. From now on, let’s try to use <code>tibble</code> instead of <code>data.frame</code>.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="managing-data-with-r.html#cb173-1" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>)) </span>
<span id="cb173-2"><a href="managing-data-with-r.html#cb173-2" tabindex="-1"></a></span>
<span id="cb173-3"><a href="managing-data-with-r.html#cb173-3" tabindex="-1"></a>data[data<span class="sc">$</span>y <span class="sc">&lt;=</span> <span class="dv">3</span>, ] </span>
<span id="cb173-4"><a href="managing-data-with-r.html#cb173-4" tabindex="-1"></a><span class="do">## # A tibble: 3 × 2</span></span>
<span id="cb173-5"><a href="managing-data-with-r.html#cb173-5" tabindex="-1"></a><span class="do">##       x     y</span></span>
<span id="cb173-6"><a href="managing-data-with-r.html#cb173-6" tabindex="-1"></a><span class="do">##   &lt;int&gt; &lt;dbl&gt;</span></span>
<span id="cb173-7"><a href="managing-data-with-r.html#cb173-7" tabindex="-1"></a><span class="do">## 1     1     1</span></span>
<span id="cb173-8"><a href="managing-data-with-r.html#cb173-8" tabindex="-1"></a><span class="do">## 2     2     2</span></span>
<span id="cb173-9"><a href="managing-data-with-r.html#cb173-9" tabindex="-1"></a><span class="do">## 3    NA    NA</span></span>
<span id="cb173-10"><a href="managing-data-with-r.html#cb173-10" tabindex="-1"></a></span>
<span id="cb173-11"><a href="managing-data-with-r.html#cb173-11" tabindex="-1"></a><span class="co"># to avoid the above problem</span></span>
<span id="cb173-12"><a href="managing-data-with-r.html#cb173-12" tabindex="-1"></a><span class="co"># which() returns which elements are TRUE</span></span>
<span id="cb173-13"><a href="managing-data-with-r.html#cb173-13" tabindex="-1"></a><span class="fu">which</span>(data<span class="sc">$</span>y <span class="sc">&lt;=</span> <span class="dv">3</span>) <span class="co"># the result is 1, 2</span></span>
<span id="cb173-14"><a href="managing-data-with-r.html#cb173-14" tabindex="-1"></a><span class="do">## [1] 1 2</span></span>
<span id="cb173-15"><a href="managing-data-with-r.html#cb173-15" tabindex="-1"></a>data[<span class="fu">which</span>(data<span class="sc">$</span>y <span class="sc">&lt;=</span> <span class="dv">3</span>), ] <span class="co"># select row 1, row 2</span></span>
<span id="cb173-16"><a href="managing-data-with-r.html#cb173-16" tabindex="-1"></a><span class="do">## # A tibble: 2 × 2</span></span>
<span id="cb173-17"><a href="managing-data-with-r.html#cb173-17" tabindex="-1"></a><span class="do">##       x     y</span></span>
<span id="cb173-18"><a href="managing-data-with-r.html#cb173-18" tabindex="-1"></a><span class="do">##   &lt;int&gt; &lt;dbl&gt;</span></span>
<span id="cb173-19"><a href="managing-data-with-r.html#cb173-19" tabindex="-1"></a><span class="do">## 1     1     1</span></span>
<span id="cb173-20"><a href="managing-data-with-r.html#cb173-20" tabindex="-1"></a><span class="do">## 2     2     2</span></span>
<span id="cb173-21"><a href="managing-data-with-r.html#cb173-21" tabindex="-1"></a></span>
<span id="cb173-22"><a href="managing-data-with-r.html#cb173-22" tabindex="-1"></a><span class="co"># using filter</span></span>
<span id="cb173-23"><a href="managing-data-with-r.html#cb173-23" tabindex="-1"></a><span class="fu">filter</span>(data, y <span class="sc">&lt;=</span> <span class="dv">3</span>)</span>
<span id="cb173-24"><a href="managing-data-with-r.html#cb173-24" tabindex="-1"></a><span class="do">## # A tibble: 2 × 2</span></span>
<span id="cb173-25"><a href="managing-data-with-r.html#cb173-25" tabindex="-1"></a><span class="do">##       x     y</span></span>
<span id="cb173-26"><a href="managing-data-with-r.html#cb173-26" tabindex="-1"></a><span class="do">##   &lt;int&gt; &lt;dbl&gt;</span></span>
<span id="cb173-27"><a href="managing-data-with-r.html#cb173-27" tabindex="-1"></a><span class="do">## 1     1     1</span></span>
<span id="cb173-28"><a href="managing-data-with-r.html#cb173-28" tabindex="-1"></a><span class="do">## 2     2     2</span></span>
<span id="cb173-29"><a href="managing-data-with-r.html#cb173-29" tabindex="-1"></a></span>
<span id="cb173-30"><a href="managing-data-with-r.html#cb173-30" tabindex="-1"></a><span class="co"># if we want to include the row where the value of y is NA</span></span>
<span id="cb173-31"><a href="managing-data-with-r.html#cb173-31" tabindex="-1"></a><span class="co"># recall that | means &quot;or&quot;</span></span>
<span id="cb173-32"><a href="managing-data-with-r.html#cb173-32" tabindex="-1"></a>data[<span class="fu">which</span>(data<span class="sc">$</span>y <span class="sc">&lt;=</span> <span class="dv">3</span> <span class="sc">|</span> <span class="fu">is.na</span>(data<span class="sc">$</span>y)), ]</span>
<span id="cb173-33"><a href="managing-data-with-r.html#cb173-33" tabindex="-1"></a><span class="do">## # A tibble: 3 × 2</span></span>
<span id="cb173-34"><a href="managing-data-with-r.html#cb173-34" tabindex="-1"></a><span class="do">##       x     y</span></span>
<span id="cb173-35"><a href="managing-data-with-r.html#cb173-35" tabindex="-1"></a><span class="do">##   &lt;int&gt; &lt;dbl&gt;</span></span>
<span id="cb173-36"><a href="managing-data-with-r.html#cb173-36" tabindex="-1"></a><span class="do">## 1     1     1</span></span>
<span id="cb173-37"><a href="managing-data-with-r.html#cb173-37" tabindex="-1"></a><span class="do">## 2     2     2</span></span>
<span id="cb173-38"><a href="managing-data-with-r.html#cb173-38" tabindex="-1"></a><span class="do">## 3     3    NA</span></span>
<span id="cb173-39"><a href="managing-data-with-r.html#cb173-39" tabindex="-1"></a></span>
<span id="cb173-40"><a href="managing-data-with-r.html#cb173-40" tabindex="-1"></a><span class="co"># using filter</span></span>
<span id="cb173-41"><a href="managing-data-with-r.html#cb173-41" tabindex="-1"></a><span class="fu">filter</span>(data, y <span class="sc">&lt;=</span> <span class="dv">3</span> <span class="sc">|</span> <span class="fu">is.na</span>(y)) </span>
<span id="cb173-42"><a href="managing-data-with-r.html#cb173-42" tabindex="-1"></a><span class="do">## # A tibble: 3 × 2</span></span>
<span id="cb173-43"><a href="managing-data-with-r.html#cb173-43" tabindex="-1"></a><span class="do">##       x     y</span></span>
<span id="cb173-44"><a href="managing-data-with-r.html#cb173-44" tabindex="-1"></a><span class="do">##   &lt;int&gt; &lt;dbl&gt;</span></span>
<span id="cb173-45"><a href="managing-data-with-r.html#cb173-45" tabindex="-1"></a><span class="do">## 1     1     1</span></span>
<span id="cb173-46"><a href="managing-data-with-r.html#cb173-46" tabindex="-1"></a><span class="do">## 2     2     2</span></span>
<span id="cb173-47"><a href="managing-data-with-r.html#cb173-47" tabindex="-1"></a><span class="do">## 3     3    NA</span></span></code></pre></div>
<!-- ```{r} -->
<!-- # to find out how many NA values in the column "arr_delay" in the tibble "delay1" -->
<!-- sum(is.na(delay1$arr_delay)) # 0, no flights with arr_delay = NA are selected -->
<!-- # to find out how many NA values in the column "arr_delay" in the tibble "delay2" -->
<!-- sum(is.na(delay2$arr_delay)) # 9304 flights with arr_delay = NA are selected -->
<!-- ``` -->
<p>If you want to drop the NA values with base subsetting<code>[]</code>, you may use</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="managing-data-with-r.html#cb174-1" tabindex="-1"></a>delay3 <span class="ot">&lt;-</span> flights[<span class="fu">which</span>((flights<span class="sc">$</span>arr_delay <span class="sc">&lt;=</span> <span class="dv">120</span> <span class="sc">&amp;</span> flights<span class="sc">$</span>dep_delay <span class="sc">&lt;=</span> <span class="dv">120</span>) <span class="sc">==</span> <span class="cn">TRUE</span>), ]</span></code></pre></div>
<p>To see if <code>delay1</code> and <code>delay3</code> are exactly the same:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="managing-data-with-r.html#cb175-1" tabindex="-1"></a><span class="fu">identical</span>(delay1, delay3) <span class="co"># TRUE means exactly the same</span></span>
<span id="cb175-2"><a href="managing-data-with-r.html#cb175-2" tabindex="-1"></a><span class="do">## [1] TRUE</span></span></code></pre></div>
<p>At this point, you should see that <code>filter</code> could perform the same tasks with simpler code.</p>
<div id="exercises-3" class="section level3 hasAnchor" number="4.6.1">
<h3><span class="header-section-number">4.6.1</span> Exercises<a href="managing-data-with-r.html#exercises-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>1a. Find all flights that had an arrival delay of two or more hours (drop the rows with <code>NA</code> in <code>arr_delay</code>).</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="managing-data-with-r.html#cb176-1" tabindex="-1"></a><span class="co"># Using &quot;filter&quot;</span></span>
<span id="cb176-2"><a href="managing-data-with-r.html#cb176-2" tabindex="-1"></a><span class="fu">filter</span>(flights, arr_delay <span class="sc">&gt;=</span> <span class="dv">120</span>)</span>
<span id="cb176-3"><a href="managing-data-with-r.html#cb176-3" tabindex="-1"></a></span>
<span id="cb176-4"><a href="managing-data-with-r.html#cb176-4" tabindex="-1"></a><span class="co"># Without using &quot;filter&quot;</span></span>
<span id="cb176-5"><a href="managing-data-with-r.html#cb176-5" tabindex="-1"></a>flights[<span class="fu">which</span>(flights<span class="sc">$</span>arr_delay <span class="sc">&gt;=</span> <span class="dv">120</span>), ] </span></code></pre></div>
<p>1b. Find all flights that flew to Houston (IAH or HOU).</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="managing-data-with-r.html#cb177-1" tabindex="-1"></a><span class="co"># Using &quot;filter&quot;</span></span>
<span id="cb177-2"><a href="managing-data-with-r.html#cb177-2" tabindex="-1"></a><span class="fu">filter</span>(flights, dest <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;IAH&quot;</span>, <span class="st">&quot;HOU&quot;</span>))</span>
<span id="cb177-3"><a href="managing-data-with-r.html#cb177-3" tabindex="-1"></a></span>
<span id="cb177-4"><a href="managing-data-with-r.html#cb177-4" tabindex="-1"></a><span class="co"># Without using &quot;filter&quot;</span></span>
<span id="cb177-5"><a href="managing-data-with-r.html#cb177-5" tabindex="-1"></a>flights[<span class="fu">which</span>(flights<span class="sc">$</span>dest <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;IAH&quot;</span>, <span class="st">&quot;HOU&quot;</span>)), ]</span></code></pre></div>
<p>1c. Find all flights that were operated by United, American, or Delta</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="managing-data-with-r.html#cb178-1" tabindex="-1"></a><span class="co"># find all the sorted carrier codes in the dataset</span></span>
<span id="cb178-2"><a href="managing-data-with-r.html#cb178-2" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(flights<span class="sc">$</span>carrier)) </span>
<span id="cb178-3"><a href="managing-data-with-r.html#cb178-3" tabindex="-1"></a><span class="do">##  [1] &quot;9E&quot; &quot;AA&quot; &quot;AS&quot; &quot;B6&quot; &quot;DL&quot; &quot;EV&quot; &quot;F9&quot; &quot;FL&quot; &quot;HA&quot; &quot;MQ&quot; &quot;OO&quot; &quot;UA&quot; &quot;US&quot; &quot;VX&quot;</span></span>
<span id="cb178-4"><a href="managing-data-with-r.html#cb178-4" tabindex="-1"></a><span class="do">## [15] &quot;WN&quot; &quot;YV&quot;</span></span>
<span id="cb178-5"><a href="managing-data-with-r.html#cb178-5" tabindex="-1"></a></span>
<span id="cb178-6"><a href="managing-data-with-r.html#cb178-6" tabindex="-1"></a><span class="co"># look up airline names from their carrier codes</span></span>
<span id="cb178-7"><a href="managing-data-with-r.html#cb178-7" tabindex="-1"></a>airlines </span>
<span id="cb178-8"><a href="managing-data-with-r.html#cb178-8" tabindex="-1"></a><span class="do">## # A tibble: 16 × 2</span></span>
<span id="cb178-9"><a href="managing-data-with-r.html#cb178-9" tabindex="-1"></a><span class="do">##    carrier name                       </span></span>
<span id="cb178-10"><a href="managing-data-with-r.html#cb178-10" tabindex="-1"></a><span class="do">##    &lt;chr&gt;   &lt;chr&gt;                      </span></span>
<span id="cb178-11"><a href="managing-data-with-r.html#cb178-11" tabindex="-1"></a><span class="do">##  1 9E      Endeavor Air Inc.          </span></span>
<span id="cb178-12"><a href="managing-data-with-r.html#cb178-12" tabindex="-1"></a><span class="do">##  2 AA      American Airlines Inc.     </span></span>
<span id="cb178-13"><a href="managing-data-with-r.html#cb178-13" tabindex="-1"></a><span class="do">##  3 AS      Alaska Airlines Inc.       </span></span>
<span id="cb178-14"><a href="managing-data-with-r.html#cb178-14" tabindex="-1"></a><span class="do">##  4 B6      JetBlue Airways            </span></span>
<span id="cb178-15"><a href="managing-data-with-r.html#cb178-15" tabindex="-1"></a><span class="do">##  5 DL      Delta Air Lines Inc.       </span></span>
<span id="cb178-16"><a href="managing-data-with-r.html#cb178-16" tabindex="-1"></a><span class="do">##  6 EV      ExpressJet Airlines Inc.   </span></span>
<span id="cb178-17"><a href="managing-data-with-r.html#cb178-17" tabindex="-1"></a><span class="do">##  7 F9      Frontier Airlines Inc.     </span></span>
<span id="cb178-18"><a href="managing-data-with-r.html#cb178-18" tabindex="-1"></a><span class="do">##  8 FL      AirTran Airways Corporation</span></span>
<span id="cb178-19"><a href="managing-data-with-r.html#cb178-19" tabindex="-1"></a><span class="do">##  9 HA      Hawaiian Airlines Inc.     </span></span>
<span id="cb178-20"><a href="managing-data-with-r.html#cb178-20" tabindex="-1"></a><span class="do">## 10 MQ      Envoy Air                  </span></span>
<span id="cb178-21"><a href="managing-data-with-r.html#cb178-21" tabindex="-1"></a><span class="do">## 11 OO      SkyWest Airlines Inc.      </span></span>
<span id="cb178-22"><a href="managing-data-with-r.html#cb178-22" tabindex="-1"></a><span class="do">## 12 UA      United Air Lines Inc.      </span></span>
<span id="cb178-23"><a href="managing-data-with-r.html#cb178-23" tabindex="-1"></a><span class="do">## 13 US      US Airways Inc.            </span></span>
<span id="cb178-24"><a href="managing-data-with-r.html#cb178-24" tabindex="-1"></a><span class="do">## 14 VX      Virgin America             </span></span>
<span id="cb178-25"><a href="managing-data-with-r.html#cb178-25" tabindex="-1"></a><span class="do">## 15 WN      Southwest Airlines Co.     </span></span>
<span id="cb178-26"><a href="managing-data-with-r.html#cb178-26" tabindex="-1"></a><span class="do">## 16 YV      Mesa Airlines Inc.</span></span>
<span id="cb178-27"><a href="managing-data-with-r.html#cb178-27" tabindex="-1"></a></span>
<span id="cb178-28"><a href="managing-data-with-r.html#cb178-28" tabindex="-1"></a><span class="co"># after looking up the names, we know UA = United, AA = American, DL = Delta</span></span>
<span id="cb178-29"><a href="managing-data-with-r.html#cb178-29" tabindex="-1"></a><span class="fu">filter</span>(flights, carrier <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;UA&quot;</span>, <span class="st">&quot;AA&quot;</span>, <span class="st">&quot;DL&quot;</span>))</span>
<span id="cb178-30"><a href="managing-data-with-r.html#cb178-30" tabindex="-1"></a><span class="do">## # A tibble: 139,504 × 19</span></span>
<span id="cb178-31"><a href="managing-data-with-r.html#cb178-31" tabindex="-1"></a><span class="do">##     year month   day dep_time sched_…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier</span></span>
<span id="cb178-32"><a href="managing-data-with-r.html#cb178-32" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;  </span></span>
<span id="cb178-33"><a href="managing-data-with-r.html#cb178-33" tabindex="-1"></a><span class="do">##  1  2013     1     1      517      515       2     830     819      11 UA     </span></span>
<span id="cb178-34"><a href="managing-data-with-r.html#cb178-34" tabindex="-1"></a><span class="do">##  2  2013     1     1      533      529       4     850     830      20 UA     </span></span>
<span id="cb178-35"><a href="managing-data-with-r.html#cb178-35" tabindex="-1"></a><span class="do">##  3  2013     1     1      542      540       2     923     850      33 AA     </span></span>
<span id="cb178-36"><a href="managing-data-with-r.html#cb178-36" tabindex="-1"></a><span class="do">##  4  2013     1     1      554      600      -6     812     837     -25 DL     </span></span>
<span id="cb178-37"><a href="managing-data-with-r.html#cb178-37" tabindex="-1"></a><span class="do">##  5  2013     1     1      554      558      -4     740     728      12 UA     </span></span>
<span id="cb178-38"><a href="managing-data-with-r.html#cb178-38" tabindex="-1"></a><span class="do">##  6  2013     1     1      558      600      -2     753     745       8 AA     </span></span>
<span id="cb178-39"><a href="managing-data-with-r.html#cb178-39" tabindex="-1"></a><span class="do">##  7  2013     1     1      558      600      -2     924     917       7 UA     </span></span>
<span id="cb178-40"><a href="managing-data-with-r.html#cb178-40" tabindex="-1"></a><span class="do">##  8  2013     1     1      558      600      -2     923     937     -14 UA     </span></span>
<span id="cb178-41"><a href="managing-data-with-r.html#cb178-41" tabindex="-1"></a><span class="do">##  9  2013     1     1      559      600      -1     941     910      31 AA     </span></span>
<span id="cb178-42"><a href="managing-data-with-r.html#cb178-42" tabindex="-1"></a><span class="do">## 10  2013     1     1      559      600      -1     854     902      -8 UA     </span></span>
<span id="cb178-43"><a href="managing-data-with-r.html#cb178-43" tabindex="-1"></a><span class="do">## # … with 139,494 more rows, 9 more variables: flight &lt;int&gt;, tailnum &lt;chr&gt;,</span></span>
<span id="cb178-44"><a href="managing-data-with-r.html#cb178-44" tabindex="-1"></a><span class="do">## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,</span></span>
<span id="cb178-45"><a href="managing-data-with-r.html#cb178-45" tabindex="-1"></a><span class="do">## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, and abbreviated variable names</span></span>
<span id="cb178-46"><a href="managing-data-with-r.html#cb178-46" tabindex="-1"></a><span class="do">## #   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay</span></span></code></pre></div>
<p>1d. Find all flights that departed in summer (July, August, and September)</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="managing-data-with-r.html#cb179-1" tabindex="-1"></a><span class="fu">filter</span>(flights, month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>))</span>
<span id="cb179-2"><a href="managing-data-with-r.html#cb179-2" tabindex="-1"></a></span>
<span id="cb179-3"><a href="managing-data-with-r.html#cb179-3" tabindex="-1"></a><span class="co"># Alternative Method</span></span>
<span id="cb179-4"><a href="managing-data-with-r.html#cb179-4" tabindex="-1"></a><span class="fu">filter</span>(flights, <span class="fu">between</span>(month, <span class="dv">7</span>, <span class="dv">9</span>)) </span></code></pre></div>
<p>1e. Find all flights that arrived more than two hours late, but didn’t leave late</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="managing-data-with-r.html#cb180-1" tabindex="-1"></a><span class="fu">filter</span>(flights, arr_delay <span class="sc">&gt;</span> <span class="dv">120</span>, dep_delay <span class="sc">&lt;=</span> <span class="dv">0</span>)</span></code></pre></div>
<p>The next two exercises are trickier.</p>
<p><strong>1f</strong>. Find all flights that were delayed by at least an hour, but made up over 30 minutes in flight. First, the flight was delayed by at least an hour is the same as <code>dep_delay &gt;=60</code>. Second, if a flight made up over 30 minutes in flight, the arrival delay must be at least 30 minutes less than the departure delay, which is the same as <code>dep_delay - arr_delay &gt; 30</code>.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="managing-data-with-r.html#cb181-1" tabindex="-1"></a><span class="fu">filter</span>(flights, dep_delay <span class="sc">&gt;=</span> <span class="dv">60</span>, dep_delay <span class="sc">-</span> arr_delay <span class="sc">&gt;</span> <span class="dv">30</span>)</span></code></pre></div>
<p><strong>1g</strong>. Find all flights that departed between midnight and 6 a.m. (inclusive).
The first question that should come to your mind is how is <strong>midnight</strong> represented in the dataset? Let’s take a look at <code>summary(flights$dep_time)</code>.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="managing-data-with-r.html#cb182-1" tabindex="-1"></a><span class="fu">summary</span>(flights<span class="sc">$</span>dep_time)</span>
<span id="cb182-2"><a href="managing-data-with-r.html#cb182-2" tabindex="-1"></a><span class="do">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s </span></span>
<span id="cb182-3"><a href="managing-data-with-r.html#cb182-3" tabindex="-1"></a><span class="do">##       1     907    1401    1349    1744    2400    8255</span></span></code></pre></div>
<p>The minimum is <code>1</code> and the maximum is <code>2400</code>. Therefore, you know <strong>midnight</strong> is represented by <code>2400</code> instead of <code>0</code> in this dataset. The answer to the question would be</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="managing-data-with-r.html#cb183-1" tabindex="-1"></a><span class="fu">filter</span>(flights, dep_time <span class="sc">&lt;=</span> <span class="dv">600</span> <span class="sc">|</span> dep_time <span class="sc">==</span> <span class="dv">2400</span>)</span></code></pre></div>
</div>
</div>
<div id="select" class="section level2 hasAnchor" number="4.7">
<h2><span class="header-section-number">4.7</span> <code>select()</code><a href="managing-data-with-r.html#select" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Very often, we are only interested in some variables in a dataset. In that case, we can focus on the variables by creating a new dataset with those variables only. <strong><code>select()</code> is to select the columns in a dataset by the name of the columns</strong></p>
<p><strong>Selecting Variables</strong></p>
<p>Suppose you want to select the following <span class="math inline">\(3\)</span> columns in <code>flights</code>: <code>year</code>, <code>month</code>, <code>day</code>:</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="managing-data-with-r.html#cb184-1" tabindex="-1"></a><span class="fu">select</span>(flights, year, month, day)</span>
<span id="cb184-2"><a href="managing-data-with-r.html#cb184-2" tabindex="-1"></a><span class="do">## # A tibble: 336,776 × 3</span></span>
<span id="cb184-3"><a href="managing-data-with-r.html#cb184-3" tabindex="-1"></a><span class="do">##     year month   day</span></span>
<span id="cb184-4"><a href="managing-data-with-r.html#cb184-4" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;int&gt; &lt;int&gt;</span></span>
<span id="cb184-5"><a href="managing-data-with-r.html#cb184-5" tabindex="-1"></a><span class="do">##  1  2013     1     1</span></span>
<span id="cb184-6"><a href="managing-data-with-r.html#cb184-6" tabindex="-1"></a><span class="do">##  2  2013     1     1</span></span>
<span id="cb184-7"><a href="managing-data-with-r.html#cb184-7" tabindex="-1"></a><span class="do">##  3  2013     1     1</span></span>
<span id="cb184-8"><a href="managing-data-with-r.html#cb184-8" tabindex="-1"></a><span class="do">##  4  2013     1     1</span></span>
<span id="cb184-9"><a href="managing-data-with-r.html#cb184-9" tabindex="-1"></a><span class="do">##  5  2013     1     1</span></span>
<span id="cb184-10"><a href="managing-data-with-r.html#cb184-10" tabindex="-1"></a><span class="do">##  6  2013     1     1</span></span>
<span id="cb184-11"><a href="managing-data-with-r.html#cb184-11" tabindex="-1"></a><span class="do">##  7  2013     1     1</span></span>
<span id="cb184-12"><a href="managing-data-with-r.html#cb184-12" tabindex="-1"></a><span class="do">##  8  2013     1     1</span></span>
<span id="cb184-13"><a href="managing-data-with-r.html#cb184-13" tabindex="-1"></a><span class="do">##  9  2013     1     1</span></span>
<span id="cb184-14"><a href="managing-data-with-r.html#cb184-14" tabindex="-1"></a><span class="do">## 10  2013     1     1</span></span>
<span id="cb184-15"><a href="managing-data-with-r.html#cb184-15" tabindex="-1"></a><span class="do">## # … with 336,766 more rows</span></span></code></pre></div>
<p>The usual way without using <code>select()</code> is</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="managing-data-with-r.html#cb185-1" tabindex="-1"></a>flights[<span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>)] <span class="co"># or flights[, c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;)]</span></span>
<span id="cb185-2"><a href="managing-data-with-r.html#cb185-2" tabindex="-1"></a><span class="do">## # A tibble: 336,776 × 3</span></span>
<span id="cb185-3"><a href="managing-data-with-r.html#cb185-3" tabindex="-1"></a><span class="do">##     year month   day</span></span>
<span id="cb185-4"><a href="managing-data-with-r.html#cb185-4" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;int&gt; &lt;int&gt;</span></span>
<span id="cb185-5"><a href="managing-data-with-r.html#cb185-5" tabindex="-1"></a><span class="do">##  1  2013     1     1</span></span>
<span id="cb185-6"><a href="managing-data-with-r.html#cb185-6" tabindex="-1"></a><span class="do">##  2  2013     1     1</span></span>
<span id="cb185-7"><a href="managing-data-with-r.html#cb185-7" tabindex="-1"></a><span class="do">##  3  2013     1     1</span></span>
<span id="cb185-8"><a href="managing-data-with-r.html#cb185-8" tabindex="-1"></a><span class="do">##  4  2013     1     1</span></span>
<span id="cb185-9"><a href="managing-data-with-r.html#cb185-9" tabindex="-1"></a><span class="do">##  5  2013     1     1</span></span>
<span id="cb185-10"><a href="managing-data-with-r.html#cb185-10" tabindex="-1"></a><span class="do">##  6  2013     1     1</span></span>
<span id="cb185-11"><a href="managing-data-with-r.html#cb185-11" tabindex="-1"></a><span class="do">##  7  2013     1     1</span></span>
<span id="cb185-12"><a href="managing-data-with-r.html#cb185-12" tabindex="-1"></a><span class="do">##  8  2013     1     1</span></span>
<span id="cb185-13"><a href="managing-data-with-r.html#cb185-13" tabindex="-1"></a><span class="do">##  9  2013     1     1</span></span>
<span id="cb185-14"><a href="managing-data-with-r.html#cb185-14" tabindex="-1"></a><span class="do">## 10  2013     1     1</span></span>
<span id="cb185-15"><a href="managing-data-with-r.html#cb185-15" tabindex="-1"></a><span class="do">## # … with 336,766 more rows</span></span></code></pre></div>
<p>Select all columns <strong>between</strong> <code>year</code> and <code>day</code> (inclusive)</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="managing-data-with-r.html#cb186-1" tabindex="-1"></a><span class="fu">select</span>(flights, year<span class="sc">:</span>day)</span>
<span id="cb186-2"><a href="managing-data-with-r.html#cb186-2" tabindex="-1"></a><span class="do">## # A tibble: 336,776 × 3</span></span>
<span id="cb186-3"><a href="managing-data-with-r.html#cb186-3" tabindex="-1"></a><span class="do">##     year month   day</span></span>
<span id="cb186-4"><a href="managing-data-with-r.html#cb186-4" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;int&gt; &lt;int&gt;</span></span>
<span id="cb186-5"><a href="managing-data-with-r.html#cb186-5" tabindex="-1"></a><span class="do">##  1  2013     1     1</span></span>
<span id="cb186-6"><a href="managing-data-with-r.html#cb186-6" tabindex="-1"></a><span class="do">##  2  2013     1     1</span></span>
<span id="cb186-7"><a href="managing-data-with-r.html#cb186-7" tabindex="-1"></a><span class="do">##  3  2013     1     1</span></span>
<span id="cb186-8"><a href="managing-data-with-r.html#cb186-8" tabindex="-1"></a><span class="do">##  4  2013     1     1</span></span>
<span id="cb186-9"><a href="managing-data-with-r.html#cb186-9" tabindex="-1"></a><span class="do">##  5  2013     1     1</span></span>
<span id="cb186-10"><a href="managing-data-with-r.html#cb186-10" tabindex="-1"></a><span class="do">##  6  2013     1     1</span></span>
<span id="cb186-11"><a href="managing-data-with-r.html#cb186-11" tabindex="-1"></a><span class="do">##  7  2013     1     1</span></span>
<span id="cb186-12"><a href="managing-data-with-r.html#cb186-12" tabindex="-1"></a><span class="do">##  8  2013     1     1</span></span>
<span id="cb186-13"><a href="managing-data-with-r.html#cb186-13" tabindex="-1"></a><span class="do">##  9  2013     1     1</span></span>
<span id="cb186-14"><a href="managing-data-with-r.html#cb186-14" tabindex="-1"></a><span class="do">## 10  2013     1     1</span></span>
<span id="cb186-15"><a href="managing-data-with-r.html#cb186-15" tabindex="-1"></a><span class="do">## # … with 336,766 more rows</span></span></code></pre></div>
<p><strong>Excluding Variables</strong></p>
<p>Select all columns except those from year to day (inclusive)</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="managing-data-with-r.html#cb187-1" tabindex="-1"></a><span class="fu">select</span>(flights, <span class="sc">-</span>(year<span class="sc">:</span>day))</span>
<span id="cb187-2"><a href="managing-data-with-r.html#cb187-2" tabindex="-1"></a></span>
<span id="cb187-3"><a href="managing-data-with-r.html#cb187-3" tabindex="-1"></a><span class="fu">select</span>(flights, <span class="sc">-</span>year, <span class="sc">-</span>month, <span class="sc">-</span>day)</span></code></pre></div>
<p>Without using <code>select()</code></p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="managing-data-with-r.html#cb188-1" tabindex="-1"></a>flights[, <span class="sc">!</span>(<span class="fu">colnames</span>(flights) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;day&quot;</span>, <span class="st">&quot;month&quot;</span>))]</span></code></pre></div>
<div id="exercises-4" class="section level3 hasAnchor" number="4.7.1">
<h3><span class="header-section-number">4.7.1</span> Exercises<a href="managing-data-with-r.html#exercises-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can also use</p>
<ul>
<li><code>starts_with("abc")</code> matches names that begin with <code>"abc"</code></li>
<li><code>ends_with("xyz")</code> matches names that end with <code>"xyz"</code></li>
<li><code>contains("ijk")</code> mathces names that contain <code>"ijk"</code></li>
</ul>
<p>Ex: select all columns that end with <code>"delay"</code>.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="managing-data-with-r.html#cb189-1" tabindex="-1"></a><span class="fu">select</span>(flights, <span class="fu">ends_with</span>(<span class="st">&quot;delay&quot;</span>))</span>
<span id="cb189-2"><a href="managing-data-with-r.html#cb189-2" tabindex="-1"></a><span class="do">## # A tibble: 336,776 × 2</span></span>
<span id="cb189-3"><a href="managing-data-with-r.html#cb189-3" tabindex="-1"></a><span class="do">##    dep_delay arr_delay</span></span>
<span id="cb189-4"><a href="managing-data-with-r.html#cb189-4" tabindex="-1"></a><span class="do">##        &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb189-5"><a href="managing-data-with-r.html#cb189-5" tabindex="-1"></a><span class="do">##  1         2        11</span></span>
<span id="cb189-6"><a href="managing-data-with-r.html#cb189-6" tabindex="-1"></a><span class="do">##  2         4        20</span></span>
<span id="cb189-7"><a href="managing-data-with-r.html#cb189-7" tabindex="-1"></a><span class="do">##  3         2        33</span></span>
<span id="cb189-8"><a href="managing-data-with-r.html#cb189-8" tabindex="-1"></a><span class="do">##  4        -1       -18</span></span>
<span id="cb189-9"><a href="managing-data-with-r.html#cb189-9" tabindex="-1"></a><span class="do">##  5        -6       -25</span></span>
<span id="cb189-10"><a href="managing-data-with-r.html#cb189-10" tabindex="-1"></a><span class="do">##  6        -4        12</span></span>
<span id="cb189-11"><a href="managing-data-with-r.html#cb189-11" tabindex="-1"></a><span class="do">##  7        -5        19</span></span>
<span id="cb189-12"><a href="managing-data-with-r.html#cb189-12" tabindex="-1"></a><span class="do">##  8        -3       -14</span></span>
<span id="cb189-13"><a href="managing-data-with-r.html#cb189-13" tabindex="-1"></a><span class="do">##  9        -3        -8</span></span>
<span id="cb189-14"><a href="managing-data-with-r.html#cb189-14" tabindex="-1"></a><span class="do">## 10        -2         8</span></span>
<span id="cb189-15"><a href="managing-data-with-r.html#cb189-15" tabindex="-1"></a><span class="do">## # … with 336,766 more rows</span></span></code></pre></div>
<p>Ex: select all columns that start with <code>"a"</code>.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="managing-data-with-r.html#cb190-1" tabindex="-1"></a><span class="fu">select</span>(flights, <span class="fu">starts_with</span>(<span class="st">&quot;a&quot;</span>))</span>
<span id="cb190-2"><a href="managing-data-with-r.html#cb190-2" tabindex="-1"></a><span class="do">## # A tibble: 336,776 × 3</span></span>
<span id="cb190-3"><a href="managing-data-with-r.html#cb190-3" tabindex="-1"></a><span class="do">##    arr_time arr_delay air_time</span></span>
<span id="cb190-4"><a href="managing-data-with-r.html#cb190-4" tabindex="-1"></a><span class="do">##       &lt;int&gt;     &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb190-5"><a href="managing-data-with-r.html#cb190-5" tabindex="-1"></a><span class="do">##  1      830        11      227</span></span>
<span id="cb190-6"><a href="managing-data-with-r.html#cb190-6" tabindex="-1"></a><span class="do">##  2      850        20      227</span></span>
<span id="cb190-7"><a href="managing-data-with-r.html#cb190-7" tabindex="-1"></a><span class="do">##  3      923        33      160</span></span>
<span id="cb190-8"><a href="managing-data-with-r.html#cb190-8" tabindex="-1"></a><span class="do">##  4     1004       -18      183</span></span>
<span id="cb190-9"><a href="managing-data-with-r.html#cb190-9" tabindex="-1"></a><span class="do">##  5      812       -25      116</span></span>
<span id="cb190-10"><a href="managing-data-with-r.html#cb190-10" tabindex="-1"></a><span class="do">##  6      740        12      150</span></span>
<span id="cb190-11"><a href="managing-data-with-r.html#cb190-11" tabindex="-1"></a><span class="do">##  7      913        19      158</span></span>
<span id="cb190-12"><a href="managing-data-with-r.html#cb190-12" tabindex="-1"></a><span class="do">##  8      709       -14       53</span></span>
<span id="cb190-13"><a href="managing-data-with-r.html#cb190-13" tabindex="-1"></a><span class="do">##  9      838        -8      140</span></span>
<span id="cb190-14"><a href="managing-data-with-r.html#cb190-14" tabindex="-1"></a><span class="do">## 10      753         8      138</span></span>
<span id="cb190-15"><a href="managing-data-with-r.html#cb190-15" tabindex="-1"></a><span class="do">## # … with 336,766 more rows</span></span></code></pre></div>
<p>Does the result of running the following code surprise you?</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="managing-data-with-r.html#cb191-1" tabindex="-1"></a><span class="fu">select</span>(flights, <span class="fu">contains</span>(<span class="st">&quot;TIME&quot;</span>))</span>
<span id="cb191-2"><a href="managing-data-with-r.html#cb191-2" tabindex="-1"></a><span class="do">## # A tibble: 336,776 × 6</span></span>
<span id="cb191-3"><a href="managing-data-with-r.html#cb191-3" tabindex="-1"></a><span class="do">##    dep_time sched_dep_time arr_time sched_arr_time air_t…¹ time_hour          </span></span>
<span id="cb191-4"><a href="managing-data-with-r.html#cb191-4" tabindex="-1"></a><span class="do">##       &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;   &lt;dbl&gt; &lt;dttm&gt;             </span></span>
<span id="cb191-5"><a href="managing-data-with-r.html#cb191-5" tabindex="-1"></a><span class="do">##  1      517            515      830            819     227 2013-01-01 05:00:00</span></span>
<span id="cb191-6"><a href="managing-data-with-r.html#cb191-6" tabindex="-1"></a><span class="do">##  2      533            529      850            830     227 2013-01-01 05:00:00</span></span>
<span id="cb191-7"><a href="managing-data-with-r.html#cb191-7" tabindex="-1"></a><span class="do">##  3      542            540      923            850     160 2013-01-01 05:00:00</span></span>
<span id="cb191-8"><a href="managing-data-with-r.html#cb191-8" tabindex="-1"></a><span class="do">##  4      544            545     1004           1022     183 2013-01-01 05:00:00</span></span>
<span id="cb191-9"><a href="managing-data-with-r.html#cb191-9" tabindex="-1"></a><span class="do">##  5      554            600      812            837     116 2013-01-01 06:00:00</span></span>
<span id="cb191-10"><a href="managing-data-with-r.html#cb191-10" tabindex="-1"></a><span class="do">##  6      554            558      740            728     150 2013-01-01 05:00:00</span></span>
<span id="cb191-11"><a href="managing-data-with-r.html#cb191-11" tabindex="-1"></a><span class="do">##  7      555            600      913            854     158 2013-01-01 06:00:00</span></span>
<span id="cb191-12"><a href="managing-data-with-r.html#cb191-12" tabindex="-1"></a><span class="do">##  8      557            600      709            723      53 2013-01-01 06:00:00</span></span>
<span id="cb191-13"><a href="managing-data-with-r.html#cb191-13" tabindex="-1"></a><span class="do">##  9      557            600      838            846     140 2013-01-01 06:00:00</span></span>
<span id="cb191-14"><a href="managing-data-with-r.html#cb191-14" tabindex="-1"></a><span class="do">## 10      558            600      753            745     138 2013-01-01 06:00:00</span></span>
<span id="cb191-15"><a href="managing-data-with-r.html#cb191-15" tabindex="-1"></a><span class="do">## # … with 336,766 more rows, and abbreviated variable name ¹​air_time</span></span></code></pre></div>
<p>Yes, because we used “TIME” but not “time” and still get the selected columns. If you check <code>?contains</code>, you can see that the default is to ignore the case. To change the default:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="managing-data-with-r.html#cb192-1" tabindex="-1"></a><span class="fu">select</span>(flights, <span class="fu">contains</span>(<span class="st">&quot;TIME&quot;</span>, <span class="at">ignore.case =</span> <span class="cn">FALSE</span>))</span>
<span id="cb192-2"><a href="managing-data-with-r.html#cb192-2" tabindex="-1"></a><span class="do">## # A tibble: 336,776 × 0</span></span></code></pre></div>
<p>Ex: without using <code>select()</code>, select all the columns that contain “time”.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="managing-data-with-r.html#cb193-1" tabindex="-1"></a>flights[<span class="fu">grep</span>(<span class="st">&quot;time&quot;</span>, <span class="fu">names</span>(flights))]</span>
<span id="cb193-2"><a href="managing-data-with-r.html#cb193-2" tabindex="-1"></a><span class="do">## # A tibble: 336,776 × 6</span></span>
<span id="cb193-3"><a href="managing-data-with-r.html#cb193-3" tabindex="-1"></a><span class="do">##    dep_time sched_dep_time arr_time sched_arr_time air_t…¹ time_hour          </span></span>
<span id="cb193-4"><a href="managing-data-with-r.html#cb193-4" tabindex="-1"></a><span class="do">##       &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;   &lt;dbl&gt; &lt;dttm&gt;             </span></span>
<span id="cb193-5"><a href="managing-data-with-r.html#cb193-5" tabindex="-1"></a><span class="do">##  1      517            515      830            819     227 2013-01-01 05:00:00</span></span>
<span id="cb193-6"><a href="managing-data-with-r.html#cb193-6" tabindex="-1"></a><span class="do">##  2      533            529      850            830     227 2013-01-01 05:00:00</span></span>
<span id="cb193-7"><a href="managing-data-with-r.html#cb193-7" tabindex="-1"></a><span class="do">##  3      542            540      923            850     160 2013-01-01 05:00:00</span></span>
<span id="cb193-8"><a href="managing-data-with-r.html#cb193-8" tabindex="-1"></a><span class="do">##  4      544            545     1004           1022     183 2013-01-01 05:00:00</span></span>
<span id="cb193-9"><a href="managing-data-with-r.html#cb193-9" tabindex="-1"></a><span class="do">##  5      554            600      812            837     116 2013-01-01 06:00:00</span></span>
<span id="cb193-10"><a href="managing-data-with-r.html#cb193-10" tabindex="-1"></a><span class="do">##  6      554            558      740            728     150 2013-01-01 05:00:00</span></span>
<span id="cb193-11"><a href="managing-data-with-r.html#cb193-11" tabindex="-1"></a><span class="do">##  7      555            600      913            854     158 2013-01-01 06:00:00</span></span>
<span id="cb193-12"><a href="managing-data-with-r.html#cb193-12" tabindex="-1"></a><span class="do">##  8      557            600      709            723      53 2013-01-01 06:00:00</span></span>
<span id="cb193-13"><a href="managing-data-with-r.html#cb193-13" tabindex="-1"></a><span class="do">##  9      557            600      838            846     140 2013-01-01 06:00:00</span></span>
<span id="cb193-14"><a href="managing-data-with-r.html#cb193-14" tabindex="-1"></a><span class="do">## 10      558            600      753            745     138 2013-01-01 06:00:00</span></span>
<span id="cb193-15"><a href="managing-data-with-r.html#cb193-15" tabindex="-1"></a><span class="do">## # … with 336,766 more rows, and abbreviated variable name ¹​air_time</span></span></code></pre></div>
<p>Basic Usage of <code>grep</code>: <code>grep(pattern, x)</code>.</p>
<ul>
<li><code>pattern</code>: character string. e.g., “time”, “delay”, “air”</li>
<li><code>x</code>: a character vector where matches are sought. e.g., the colnames of a dataframe.</li>
<li>Output: a vector of the indices of the elements of <code>x</code> that yielded a match.</li>
</ul>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="managing-data-with-r.html#cb194-1" tabindex="-1"></a>some_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ab&quot;</span>, <span class="st">&quot;bc&quot;</span>, <span class="st">&quot;cd&quot;</span>)</span>
<span id="cb194-2"><a href="managing-data-with-r.html#cb194-2" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;b&quot;</span>, some_names)</span>
<span id="cb194-3"><a href="managing-data-with-r.html#cb194-3" tabindex="-1"></a><span class="do">## [1] 1 2</span></span>
<span id="cb194-4"><a href="managing-data-with-r.html#cb194-4" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;d&quot;</span>, some_names)</span>
<span id="cb194-5"><a href="managing-data-with-r.html#cb194-5" tabindex="-1"></a><span class="do">## [1] 3</span></span>
<span id="cb194-6"><a href="managing-data-with-r.html#cb194-6" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;e&quot;</span>, some_names)</span>
<span id="cb194-7"><a href="managing-data-with-r.html#cb194-7" tabindex="-1"></a><span class="do">## integer(0)</span></span></code></pre></div>
</div>
</div>
<div id="mutate" class="section level2 hasAnchor" number="4.8">
<h2><span class="header-section-number">4.8</span> <code>mutate()</code><a href="managing-data-with-r.html#mutate" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Add new variables with <code>mutate()</code></strong></p>
<p>Very often, we want to create a new variable based on existing variables. For example, if we have distance and time, we can compute the speed by distance/time.</p>
<p><code>mutate()</code> always adds new columns at the end of the dataset. Let’s create a narrower dataset so that we can see the result of <code>mutate</code> without use <code>View()</code>.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="managing-data-with-r.html#cb195-1" tabindex="-1"></a><span class="co"># create a smaller dataset</span></span>
<span id="cb195-2"><a href="managing-data-with-r.html#cb195-2" tabindex="-1"></a>flights_sml <span class="ot">&lt;-</span> <span class="fu">select</span>(flights, year<span class="sc">:</span>day, arr_delay, dep_delay, distance, air_time)</span></code></pre></div>
<p>Now, let’s use <code>mutate()</code> to create a variable called <code>gain</code> (how much time we gain in flight) defined as <code>arr_delay - dep_delay</code> and a variable called <code>speed</code> (miles/hour) defined as <code>distance</code>/<code>air_time * 60</code>.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="managing-data-with-r.html#cb196-1" tabindex="-1"></a><span class="fu">mutate</span>(flights_sml, <span class="at">gain =</span> arr_delay <span class="sc">-</span> dep_delay, <span class="at">speed =</span> distance <span class="sc">/</span> air_time <span class="sc">*</span> <span class="dv">60</span>)</span>
<span id="cb196-2"><a href="managing-data-with-r.html#cb196-2" tabindex="-1"></a><span class="do">## # A tibble: 336,776 × 9</span></span>
<span id="cb196-3"><a href="managing-data-with-r.html#cb196-3" tabindex="-1"></a><span class="do">##     year month   day arr_delay dep_delay distance air_time  gain speed</span></span>
<span id="cb196-4"><a href="managing-data-with-r.html#cb196-4" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb196-5"><a href="managing-data-with-r.html#cb196-5" tabindex="-1"></a><span class="do">##  1  2013     1     1        11         2     1400      227     9  370.</span></span>
<span id="cb196-6"><a href="managing-data-with-r.html#cb196-6" tabindex="-1"></a><span class="do">##  2  2013     1     1        20         4     1416      227    16  374.</span></span>
<span id="cb196-7"><a href="managing-data-with-r.html#cb196-7" tabindex="-1"></a><span class="do">##  3  2013     1     1        33         2     1089      160    31  408.</span></span>
<span id="cb196-8"><a href="managing-data-with-r.html#cb196-8" tabindex="-1"></a><span class="do">##  4  2013     1     1       -18        -1     1576      183   -17  517.</span></span>
<span id="cb196-9"><a href="managing-data-with-r.html#cb196-9" tabindex="-1"></a><span class="do">##  5  2013     1     1       -25        -6      762      116   -19  394.</span></span>
<span id="cb196-10"><a href="managing-data-with-r.html#cb196-10" tabindex="-1"></a><span class="do">##  6  2013     1     1        12        -4      719      150    16  288.</span></span>
<span id="cb196-11"><a href="managing-data-with-r.html#cb196-11" tabindex="-1"></a><span class="do">##  7  2013     1     1        19        -5     1065      158    24  404.</span></span>
<span id="cb196-12"><a href="managing-data-with-r.html#cb196-12" tabindex="-1"></a><span class="do">##  8  2013     1     1       -14        -3      229       53   -11  259.</span></span>
<span id="cb196-13"><a href="managing-data-with-r.html#cb196-13" tabindex="-1"></a><span class="do">##  9  2013     1     1        -8        -3      944      140    -5  405.</span></span>
<span id="cb196-14"><a href="managing-data-with-r.html#cb196-14" tabindex="-1"></a><span class="do">## 10  2013     1     1         8        -2      733      138    10  319.</span></span>
<span id="cb196-15"><a href="managing-data-with-r.html#cb196-15" tabindex="-1"></a><span class="do">## # … with 336,766 more rows</span></span></code></pre></div>
<p>To keep the new variables only, use <code>transmute()</code>:</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="managing-data-with-r.html#cb197-1" tabindex="-1"></a><span class="fu">transmute</span>(flights_sml, <span class="at">gain =</span> arr_delay <span class="sc">-</span> dep_delay, <span class="at">speed =</span> distance <span class="sc">/</span>  air_time <span class="sc">*</span> <span class="dv">60</span>)</span>
<span id="cb197-2"><a href="managing-data-with-r.html#cb197-2" tabindex="-1"></a><span class="do">## # A tibble: 336,776 × 2</span></span>
<span id="cb197-3"><a href="managing-data-with-r.html#cb197-3" tabindex="-1"></a><span class="do">##     gain speed</span></span>
<span id="cb197-4"><a href="managing-data-with-r.html#cb197-4" tabindex="-1"></a><span class="do">##    &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb197-5"><a href="managing-data-with-r.html#cb197-5" tabindex="-1"></a><span class="do">##  1     9  370.</span></span>
<span id="cb197-6"><a href="managing-data-with-r.html#cb197-6" tabindex="-1"></a><span class="do">##  2    16  374.</span></span>
<span id="cb197-7"><a href="managing-data-with-r.html#cb197-7" tabindex="-1"></a><span class="do">##  3    31  408.</span></span>
<span id="cb197-8"><a href="managing-data-with-r.html#cb197-8" tabindex="-1"></a><span class="do">##  4   -17  517.</span></span>
<span id="cb197-9"><a href="managing-data-with-r.html#cb197-9" tabindex="-1"></a><span class="do">##  5   -19  394.</span></span>
<span id="cb197-10"><a href="managing-data-with-r.html#cb197-10" tabindex="-1"></a><span class="do">##  6    16  288.</span></span>
<span id="cb197-11"><a href="managing-data-with-r.html#cb197-11" tabindex="-1"></a><span class="do">##  7    24  404.</span></span>
<span id="cb197-12"><a href="managing-data-with-r.html#cb197-12" tabindex="-1"></a><span class="do">##  8   -11  259.</span></span>
<span id="cb197-13"><a href="managing-data-with-r.html#cb197-13" tabindex="-1"></a><span class="do">##  9    -5  405.</span></span>
<span id="cb197-14"><a href="managing-data-with-r.html#cb197-14" tabindex="-1"></a><span class="do">## 10    10  319.</span></span>
<span id="cb197-15"><a href="managing-data-with-r.html#cb197-15" tabindex="-1"></a><span class="do">## # … with 336,766 more rows</span></span></code></pre></div>
<p>Without using <code>select</code> and <code>mutate()</code>, one may use</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="managing-data-with-r.html#cb198-1" tabindex="-1"></a>flights_sml2 <span class="ot">&lt;-</span> flights[<span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>, <span class="st">&quot;arr_delay&quot;</span>, <span class="st">&quot;dep_delay&quot;</span>, <span class="st">&quot;distance&quot;</span>, <span class="st">&quot;air_time&quot;</span>)]</span>
<span id="cb198-2"><a href="managing-data-with-r.html#cb198-2" tabindex="-1"></a></span>
<span id="cb198-3"><a href="managing-data-with-r.html#cb198-3" tabindex="-1"></a>flights_sml2<span class="sc">$</span>gain <span class="ot">&lt;-</span> flights_sml2<span class="sc">$</span>arr_delay <span class="sc">-</span> flights_sml2<span class="sc">$</span>dep_delay</span>
<span id="cb198-4"><a href="managing-data-with-r.html#cb198-4" tabindex="-1"></a></span>
<span id="cb198-5"><a href="managing-data-with-r.html#cb198-5" tabindex="-1"></a>flights_sml2<span class="sc">$</span>speed <span class="ot">&lt;-</span> flights_sml2<span class="sc">$</span>distance <span class="sc">/</span> flights_sml2<span class="sc">$</span>air_time <span class="sc">*</span> <span class="dv">60</span></span></code></pre></div>
<div id="exercises-5" class="section level3 hasAnchor" number="4.8.1">
<h3><span class="header-section-number">4.8.1</span> Exercises<a href="managing-data-with-r.html#exercises-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Ex: Currently, <code>dep_time</code> and <code>sched_dep_time</code> are convenient to look at, but hard to compute with because they are not really continuous numbers. Convert them to a more convenient representation of <strong>number of minutes since midnight</strong>.</p>
<p>Recall that <code>dep_time</code> and <code>sched_dep_time</code> are in HHMM format. For example, 1304 means 1:04pm. The number of minutes since midnight is <span class="math inline">\(13\times 60 + 4 = 784\)</span>. In general, we can use the integer division to find the number of hours since midnight, then multiply by <span class="math inline">\(60\)</span>, and finally add the remainder for the minutes. For example,</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="managing-data-with-r.html#cb199-1" tabindex="-1"></a><span class="dv">1304</span> <span class="sc">%/%</span> <span class="dv">100</span> <span class="co"># get the number of hours since midnight</span></span>
<span id="cb199-2"><a href="managing-data-with-r.html#cb199-2" tabindex="-1"></a><span class="do">## [1] 13</span></span>
<span id="cb199-3"><a href="managing-data-with-r.html#cb199-3" tabindex="-1"></a></span>
<span id="cb199-4"><a href="managing-data-with-r.html#cb199-4" tabindex="-1"></a><span class="dv">1304</span> <span class="sc">%%</span> <span class="dv">100</span> <span class="co"># get the remainder</span></span>
<span id="cb199-5"><a href="managing-data-with-r.html#cb199-5" tabindex="-1"></a><span class="do">## [1] 4</span></span>
<span id="cb199-6"><a href="managing-data-with-r.html#cb199-6" tabindex="-1"></a></span>
<span id="cb199-7"><a href="managing-data-with-r.html#cb199-7" tabindex="-1"></a><span class="dv">1304</span> <span class="sc">%/%</span> <span class="dv">100</span> <span class="sc">*</span> <span class="dv">60</span> <span class="sc">+</span> <span class="dv">1304</span> <span class="sc">%%</span> <span class="dv">100</span> <span class="co"># number of minutes since midnight</span></span>
<span id="cb199-8"><a href="managing-data-with-r.html#cb199-8" tabindex="-1"></a><span class="do">## [1] 784</span></span></code></pre></div>
<p>Recall that midnight is represented as <code>2400</code> in the dataset and the number of minutes since midnight should be 0. However, if we use the above method for midnight, we get</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="managing-data-with-r.html#cb200-1" tabindex="-1"></a><span class="dv">2400</span> <span class="sc">%/%</span> <span class="dv">100</span> <span class="sc">*</span> <span class="dv">60</span> <span class="sc">+</span> <span class="dv">2400</span> <span class="sc">%%</span> <span class="dv">100</span> <span class="co"># this is not correct for midnight</span></span>
<span id="cb200-2"><a href="managing-data-with-r.html#cb200-2" tabindex="-1"></a><span class="do">## [1] 1440</span></span></code></pre></div>
<p>Therefore, we also have to deal with this case. One possible solution is to do another integer division by 1440 (24x60 = 1440):</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="managing-data-with-r.html#cb201-1" tabindex="-1"></a>(<span class="dv">1304</span> <span class="sc">%/%</span> <span class="dv">100</span> <span class="sc">*</span> <span class="dv">60</span> <span class="sc">+</span> <span class="dv">1304</span> <span class="sc">%%</span> <span class="dv">100</span>) <span class="sc">%%</span> <span class="dv">1440</span> <span class="co"># will not change the result if the time is not midnight</span></span>
<span id="cb201-2"><a href="managing-data-with-r.html#cb201-2" tabindex="-1"></a><span class="do">## [1] 784</span></span>
<span id="cb201-3"><a href="managing-data-with-r.html#cb201-3" tabindex="-1"></a></span>
<span id="cb201-4"><a href="managing-data-with-r.html#cb201-4" tabindex="-1"></a>(<span class="dv">2400</span> <span class="sc">%/%</span> <span class="dv">100</span> <span class="sc">*</span> <span class="dv">60</span> <span class="sc">+</span> <span class="dv">2400</span> <span class="sc">%%</span> <span class="dv">100</span>) <span class="sc">%%</span> <span class="dv">1440</span> <span class="co"># this is correct for midnight</span></span>
<span id="cb201-5"><a href="managing-data-with-r.html#cb201-5" tabindex="-1"></a><span class="do">## [1] 0</span></span></code></pre></div>
<p>Go back to <code>flights</code>:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="managing-data-with-r.html#cb202-1" tabindex="-1"></a><span class="co"># let&#39;s keep only the dep_time and sched_dep_time</span></span>
<span id="cb202-2"><a href="managing-data-with-r.html#cb202-2" tabindex="-1"></a>flights_time <span class="ot">&lt;-</span> <span class="fu">select</span>(flights, dep_time, sched_dep_time)</span>
<span id="cb202-3"><a href="managing-data-with-r.html#cb202-3" tabindex="-1"></a></span>
<span id="cb202-4"><a href="managing-data-with-r.html#cb202-4" tabindex="-1"></a><span class="fu">mutate</span>(flights_time, <span class="at">min_dep_time =</span> (dep_time <span class="sc">%/%</span> <span class="dv">100</span> <span class="sc">*</span> <span class="dv">60</span> <span class="sc">+</span> dep_time <span class="sc">%%</span> <span class="dv">100</span>) <span class="sc">%%</span> <span class="dv">1440</span>, </span>
<span id="cb202-5"><a href="managing-data-with-r.html#cb202-5" tabindex="-1"></a>       <span class="at">min_sched_dep_time =</span> (sched_dep_time <span class="sc">%/%</span> <span class="dv">100</span> <span class="sc">*</span> <span class="dv">60</span> <span class="sc">+</span> sched_dep_time <span class="sc">%%</span> <span class="dv">100</span>) <span class="sc">%%</span> <span class="dv">1440</span>)</span>
<span id="cb202-6"><a href="managing-data-with-r.html#cb202-6" tabindex="-1"></a><span class="do">## # A tibble: 336,776 × 4</span></span>
<span id="cb202-7"><a href="managing-data-with-r.html#cb202-7" tabindex="-1"></a><span class="do">##    dep_time sched_dep_time min_dep_time min_sched_dep_time</span></span>
<span id="cb202-8"><a href="managing-data-with-r.html#cb202-8" tabindex="-1"></a><span class="do">##       &lt;int&gt;          &lt;int&gt;        &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb202-9"><a href="managing-data-with-r.html#cb202-9" tabindex="-1"></a><span class="do">##  1      517            515          317                315</span></span>
<span id="cb202-10"><a href="managing-data-with-r.html#cb202-10" tabindex="-1"></a><span class="do">##  2      533            529          333                329</span></span>
<span id="cb202-11"><a href="managing-data-with-r.html#cb202-11" tabindex="-1"></a><span class="do">##  3      542            540          342                340</span></span>
<span id="cb202-12"><a href="managing-data-with-r.html#cb202-12" tabindex="-1"></a><span class="do">##  4      544            545          344                345</span></span>
<span id="cb202-13"><a href="managing-data-with-r.html#cb202-13" tabindex="-1"></a><span class="do">##  5      554            600          354                360</span></span>
<span id="cb202-14"><a href="managing-data-with-r.html#cb202-14" tabindex="-1"></a><span class="do">##  6      554            558          354                358</span></span>
<span id="cb202-15"><a href="managing-data-with-r.html#cb202-15" tabindex="-1"></a><span class="do">##  7      555            600          355                360</span></span>
<span id="cb202-16"><a href="managing-data-with-r.html#cb202-16" tabindex="-1"></a><span class="do">##  8      557            600          357                360</span></span>
<span id="cb202-17"><a href="managing-data-with-r.html#cb202-17" tabindex="-1"></a><span class="do">##  9      557            600          357                360</span></span>
<span id="cb202-18"><a href="managing-data-with-r.html#cb202-18" tabindex="-1"></a><span class="do">## 10      558            600          358                360</span></span>
<span id="cb202-19"><a href="managing-data-with-r.html#cb202-19" tabindex="-1"></a><span class="do">## # … with 336,766 more rows</span></span></code></pre></div>
<p>The above code doesn’t look good because we have written the formula to complete the same task twice. We can define a function to do this:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="managing-data-with-r.html#cb203-1" tabindex="-1"></a>time_to_minutes <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb203-2"><a href="managing-data-with-r.html#cb203-2" tabindex="-1"></a>  (x <span class="sc">%/%</span> <span class="dv">100</span> <span class="sc">*</span> <span class="dv">60</span> <span class="sc">+</span> x <span class="sc">%%</span> <span class="dv">100</span>) <span class="sc">%%</span> <span class="dv">1440</span></span>
<span id="cb203-3"><a href="managing-data-with-r.html#cb203-3" tabindex="-1"></a>}</span></code></pre></div>
<p>With the function <code>time_to_minutes</code>, we have:</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="managing-data-with-r.html#cb204-1" tabindex="-1"></a><span class="fu">mutate</span>(flights, <span class="at">min_dep_time =</span> <span class="fu">time_to_minutes</span>(dep_time),</span>
<span id="cb204-2"><a href="managing-data-with-r.html#cb204-2" tabindex="-1"></a>                <span class="at">min_sched_dep_time =</span> <span class="fu">time_to_minutes</span>(sched_dep_time))</span></code></pre></div>
<p>If you cannot think of using <code>%% 1440</code> to deal with the midnight cases, we can write:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="managing-data-with-r.html#cb205-1" tabindex="-1"></a><span class="co"># ind for indicator approach</span></span>
<span id="cb205-2"><a href="managing-data-with-r.html#cb205-2" tabindex="-1"></a>time_to_minutes_ind <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb205-3"><a href="managing-data-with-r.html#cb205-3" tabindex="-1"></a>  (x <span class="sc">%/%</span> <span class="dv">100</span> <span class="sc">*</span> <span class="dv">60</span> <span class="sc">+</span> x <span class="sc">%%</span> <span class="dv">100</span>) <span class="sc">*</span> (x <span class="sc">!=</span> <span class="dv">2400</span>)</span>
<span id="cb205-4"><a href="managing-data-with-r.html#cb205-4" tabindex="-1"></a>}</span>
<span id="cb205-5"><a href="managing-data-with-r.html#cb205-5" tabindex="-1"></a></span>
<span id="cb205-6"><a href="managing-data-with-r.html#cb205-6" tabindex="-1"></a><span class="co"># Explanation</span></span>
<span id="cb205-7"><a href="managing-data-with-r.html#cb205-7" tabindex="-1"></a><span class="co"># if x is 2400, (x!=2400) is FALSE, FALSE times a number y is 0</span></span>
<span id="cb205-8"><a href="managing-data-with-r.html#cb205-8" tabindex="-1"></a><span class="co"># if x is not 2400, (x!=2400) is TRUE, TRUE times a number y is y</span></span>
<span id="cb205-9"><a href="managing-data-with-r.html#cb205-9" tabindex="-1"></a><span class="co"># because &quot;FALSE=0, TRUE=1&quot;</span></span>
<span id="cb205-10"><a href="managing-data-with-r.html#cb205-10" tabindex="-1"></a></span>
<span id="cb205-11"><a href="managing-data-with-r.html#cb205-11" tabindex="-1"></a><span class="fu">mutate</span>(flights, <span class="at">min_dep_time =</span> <span class="fu">time_to_minutes_ind</span>(dep_time),</span>
<span id="cb205-12"><a href="managing-data-with-r.html#cb205-12" tabindex="-1"></a>                <span class="at">min_sched_dep_time =</span> <span class="fu">time_to_minutes_ind</span>(sched_dep_time))</span></code></pre></div>
<p>An alternative way is to use <code>ifelse</code> (which is a vectorized function).</p>
<p>Usage of <code>ifelse</code>: <code>ifelse(test, yes, no)</code></p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="managing-data-with-r.html#cb206-1" tabindex="-1"></a>time_to_minutes_ifelse <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb206-2"><a href="managing-data-with-r.html#cb206-2" tabindex="-1"></a>  <span class="fu">ifelse</span>(x <span class="sc">!=</span> <span class="dv">2400</span>, x <span class="sc">%/%</span> <span class="dv">100</span> <span class="sc">*</span> <span class="dv">60</span> <span class="sc">+</span> x <span class="sc">%%</span> <span class="dv">100</span>, <span class="dv">0</span>)  </span>
<span id="cb206-3"><a href="managing-data-with-r.html#cb206-3" tabindex="-1"></a>}</span>
<span id="cb206-4"><a href="managing-data-with-r.html#cb206-4" tabindex="-1"></a></span>
<span id="cb206-5"><a href="managing-data-with-r.html#cb206-5" tabindex="-1"></a><span class="fu">mutate</span>(flights, <span class="at">min_dep_time =</span> <span class="fu">time_to_minutes_ifelse</span>(dep_time),</span>
<span id="cb206-6"><a href="managing-data-with-r.html#cb206-6" tabindex="-1"></a>                <span class="at">min_sched_dep_time =</span> <span class="fu">time_to_minutes_ifelse</span>(sched_dep_time))</span>
<span id="cb206-7"><a href="managing-data-with-r.html#cb206-7" tabindex="-1"></a><span class="do">## # A tibble: 336,776 × 21</span></span>
<span id="cb206-8"><a href="managing-data-with-r.html#cb206-8" tabindex="-1"></a><span class="do">##     year month   day dep_time sched_…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier</span></span>
<span id="cb206-9"><a href="managing-data-with-r.html#cb206-9" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;  </span></span>
<span id="cb206-10"><a href="managing-data-with-r.html#cb206-10" tabindex="-1"></a><span class="do">##  1  2013     1     1      517      515       2     830     819      11 UA     </span></span>
<span id="cb206-11"><a href="managing-data-with-r.html#cb206-11" tabindex="-1"></a><span class="do">##  2  2013     1     1      533      529       4     850     830      20 UA     </span></span>
<span id="cb206-12"><a href="managing-data-with-r.html#cb206-12" tabindex="-1"></a><span class="do">##  3  2013     1     1      542      540       2     923     850      33 AA     </span></span>
<span id="cb206-13"><a href="managing-data-with-r.html#cb206-13" tabindex="-1"></a><span class="do">##  4  2013     1     1      544      545      -1    1004    1022     -18 B6     </span></span>
<span id="cb206-14"><a href="managing-data-with-r.html#cb206-14" tabindex="-1"></a><span class="do">##  5  2013     1     1      554      600      -6     812     837     -25 DL     </span></span>
<span id="cb206-15"><a href="managing-data-with-r.html#cb206-15" tabindex="-1"></a><span class="do">##  6  2013     1     1      554      558      -4     740     728      12 UA     </span></span>
<span id="cb206-16"><a href="managing-data-with-r.html#cb206-16" tabindex="-1"></a><span class="do">##  7  2013     1     1      555      600      -5     913     854      19 B6     </span></span>
<span id="cb206-17"><a href="managing-data-with-r.html#cb206-17" tabindex="-1"></a><span class="do">##  8  2013     1     1      557      600      -3     709     723     -14 EV     </span></span>
<span id="cb206-18"><a href="managing-data-with-r.html#cb206-18" tabindex="-1"></a><span class="do">##  9  2013     1     1      557      600      -3     838     846      -8 B6     </span></span>
<span id="cb206-19"><a href="managing-data-with-r.html#cb206-19" tabindex="-1"></a><span class="do">## 10  2013     1     1      558      600      -2     753     745       8 AA     </span></span>
<span id="cb206-20"><a href="managing-data-with-r.html#cb206-20" tabindex="-1"></a><span class="do">## # … with 336,766 more rows, 11 more variables: flight &lt;int&gt;, tailnum &lt;chr&gt;,</span></span>
<span id="cb206-21"><a href="managing-data-with-r.html#cb206-21" tabindex="-1"></a><span class="do">## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,</span></span>
<span id="cb206-22"><a href="managing-data-with-r.html#cb206-22" tabindex="-1"></a><span class="do">## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, min_dep_time &lt;dbl&gt;,</span></span>
<span id="cb206-23"><a href="managing-data-with-r.html#cb206-23" tabindex="-1"></a><span class="do">## #   min_sched_dep_time &lt;dbl&gt;, and abbreviated variable names ¹​sched_dep_time,</span></span>
<span id="cb206-24"><a href="managing-data-with-r.html#cb206-24" tabindex="-1"></a><span class="do">## #   ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay</span></span></code></pre></div>
<p>A less efficient way with for loop and if-else:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="managing-data-with-r.html#cb207-1" tabindex="-1"></a><span class="co"># if for if-else approach</span></span>
<span id="cb207-2"><a href="managing-data-with-r.html#cb207-2" tabindex="-1"></a>time_to_minutes_if <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb207-3"><a href="managing-data-with-r.html#cb207-3" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">length</span>(x)</span>
<span id="cb207-4"><a href="managing-data-with-r.html#cb207-4" tabindex="-1"></a>  output <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>, n)</span>
<span id="cb207-5"><a href="managing-data-with-r.html#cb207-5" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n) {</span>
<span id="cb207-6"><a href="managing-data-with-r.html#cb207-6" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">is.na</span>(x[i])){ <span class="co"># check for NA</span></span>
<span id="cb207-7"><a href="managing-data-with-r.html#cb207-7" tabindex="-1"></a>      output[i] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb207-8"><a href="managing-data-with-r.html#cb207-8" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (x[i] <span class="sc">!=</span> <span class="dv">2400</span>) { <span class="co"># if not equal to 2400</span></span>
<span id="cb207-9"><a href="managing-data-with-r.html#cb207-9" tabindex="-1"></a>      output[i] <span class="ot">&lt;-</span> x[i] <span class="sc">%/%</span> <span class="dv">100</span> <span class="sc">*</span> <span class="dv">60</span> <span class="sc">+</span> x[i] <span class="sc">%%</span> <span class="dv">100</span></span>
<span id="cb207-10"><a href="managing-data-with-r.html#cb207-10" tabindex="-1"></a>    } <span class="cf">else</span> { <span class="co"># if equal to 2400</span></span>
<span id="cb207-11"><a href="managing-data-with-r.html#cb207-11" tabindex="-1"></a>      output[i] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb207-12"><a href="managing-data-with-r.html#cb207-12" tabindex="-1"></a>    }</span>
<span id="cb207-13"><a href="managing-data-with-r.html#cb207-13" tabindex="-1"></a>  }</span>
<span id="cb207-14"><a href="managing-data-with-r.html#cb207-14" tabindex="-1"></a>  <span class="fu">return</span>(output)</span>
<span id="cb207-15"><a href="managing-data-with-r.html#cb207-15" tabindex="-1"></a>}</span>
<span id="cb207-16"><a href="managing-data-with-r.html#cb207-16" tabindex="-1"></a></span>
<span id="cb207-17"><a href="managing-data-with-r.html#cb207-17" tabindex="-1"></a><span class="fu">mutate</span>(flights, <span class="at">min_dep_time =</span> <span class="fu">time_to_minutes_if</span>(dep_time),</span>
<span id="cb207-18"><a href="managing-data-with-r.html#cb207-18" tabindex="-1"></a>                <span class="at">min_sched_dep_time =</span> <span class="fu">time_to_minutes_if</span>(sched_dep_time))</span></code></pre></div>
<p>Compare the efficiency:</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="managing-data-with-r.html#cb208-1" tabindex="-1"></a><span class="fu">system.time</span>(<span class="fu">mutate</span>(flights, <span class="at">min_dep_time =</span> <span class="fu">time_to_minutes</span>(dep_time),</span>
<span id="cb208-2"><a href="managing-data-with-r.html#cb208-2" tabindex="-1"></a>                <span class="at">min_sched_dep_time =</span> <span class="fu">time_to_minutes</span>(sched_dep_time)))</span>
<span id="cb208-3"><a href="managing-data-with-r.html#cb208-3" tabindex="-1"></a><span class="do">##    user  system elapsed </span></span>
<span id="cb208-4"><a href="managing-data-with-r.html#cb208-4" tabindex="-1"></a><span class="do">##    0.00    0.00    0.03</span></span>
<span id="cb208-5"><a href="managing-data-with-r.html#cb208-5" tabindex="-1"></a></span>
<span id="cb208-6"><a href="managing-data-with-r.html#cb208-6" tabindex="-1"></a><span class="fu">system.time</span>(<span class="fu">mutate</span>(flights, <span class="at">min_dep_time =</span> <span class="fu">time_to_minutes_if</span>(dep_time),</span>
<span id="cb208-7"><a href="managing-data-with-r.html#cb208-7" tabindex="-1"></a>                <span class="at">min_sched_dep_time =</span> <span class="fu">time_to_minutes_if</span>(sched_dep_time)))</span>
<span id="cb208-8"><a href="managing-data-with-r.html#cb208-8" tabindex="-1"></a><span class="do">##    user  system elapsed </span></span>
<span id="cb208-9"><a href="managing-data-with-r.html#cb208-9" tabindex="-1"></a><span class="do">##    0.08    0.00    0.25</span></span></code></pre></div>
<!-- 2. Compare `dep_time, sched_dep_time`, and `dep_delay`. How would you expect those three numbers to be related? -->
<!-- ```{r} -->
<!-- x = time_to_minutes(flights$dep_time) -->
<!-- y = time_to_minutes(flights$sched_dep_time) + flights$dep_delay -->
<!-- diff = y-x -->
<!-- mean(na.omit(diff)==0) # we expect it should be 1 -->
<!-- mean(diff==0, na.rm=TRUE) # ignore the NA values when doing the mean -->
<!-- table(diff) # diff only takes 2 values: 0 and 1440 -->
<!-- flights[which(diff==1440)[1],] -->
<!-- # the sched_dep_time is 18:35 -->
<!-- # after delay for 853 minutes -->
<!-- # the dep time becomes the next morning.. -->
<!-- # that's why there is a 1440 difference -->
<!-- ``` -->
</div>
</div>
<div id="summarize-group_by" class="section level2 hasAnchor" number="4.9">
<h2><span class="header-section-number">4.9</span> <code>summarize(), group_by()</code><a href="managing-data-with-r.html#summarize-group_by" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Average delay over the year (not useful):</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="managing-data-with-r.html#cb209-1" tabindex="-1"></a><span class="fu">summarize</span>(flights, <span class="at">delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb209-2"><a href="managing-data-with-r.html#cb209-2" tabindex="-1"></a><span class="do">## # A tibble: 1 × 1</span></span>
<span id="cb209-3"><a href="managing-data-with-r.html#cb209-3" tabindex="-1"></a><span class="do">##   delay</span></span>
<span id="cb209-4"><a href="managing-data-with-r.html#cb209-4" tabindex="-1"></a><span class="do">##   &lt;dbl&gt;</span></span>
<span id="cb209-5"><a href="managing-data-with-r.html#cb209-5" tabindex="-1"></a><span class="do">## 1  12.6</span></span></code></pre></div>
<p>Using <code>summarize</code> with <code>group_by</code> and <code>ungroup</code> can result in more useful statistics.</p>
<ol style="list-style-type: decimal">
<li>Use <code>group_by</code>. First argument is your dataset. Subsequent arguments indicate how you want to group the data.</li>
<li>In <code>summarize</code>, the dataset becomes the dataset from <code>group_by</code>.</li>
<li>After performing the calculation using <code>summarize</code>, use <code>ungroup</code>. If you do not use <code>ungroup</code> after <code>group_by</code>, the grouping structure is still retained in the object that you create and the subsequent calculation may yield something that you do not expect.</li>
</ol>
<p>E.g.: Average departure delay per date (more useful):</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="managing-data-with-r.html#cb210-1" tabindex="-1"></a>by_day <span class="ot">&lt;-</span> <span class="fu">group_by</span>(flights, year, month, day)</span>
<span id="cb210-2"><a href="managing-data-with-r.html#cb210-2" tabindex="-1"></a>mean_delay <span class="ot">&lt;-</span> <span class="fu">summarize</span>(by_day, <span class="at">delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb210-3"><a href="managing-data-with-r.html#cb210-3" tabindex="-1"></a><span class="do">## `summarise()` has grouped output by &#39;year&#39;, &#39;month&#39;. You can override using</span></span>
<span id="cb210-4"><a href="managing-data-with-r.html#cb210-4" tabindex="-1"></a><span class="do">## the `.groups` argument.</span></span>
<span id="cb210-5"><a href="managing-data-with-r.html#cb210-5" tabindex="-1"></a>(mean_delay <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(mean_delay)) <span class="co"># use ungroup() after gropu_by()</span></span>
<span id="cb210-6"><a href="managing-data-with-r.html#cb210-6" tabindex="-1"></a><span class="do">## # A tibble: 365 × 4</span></span>
<span id="cb210-7"><a href="managing-data-with-r.html#cb210-7" tabindex="-1"></a><span class="do">##     year month   day delay</span></span>
<span id="cb210-8"><a href="managing-data-with-r.html#cb210-8" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;</span></span>
<span id="cb210-9"><a href="managing-data-with-r.html#cb210-9" tabindex="-1"></a><span class="do">##  1  2013     1     1 11.5 </span></span>
<span id="cb210-10"><a href="managing-data-with-r.html#cb210-10" tabindex="-1"></a><span class="do">##  2  2013     1     2 13.9 </span></span>
<span id="cb210-11"><a href="managing-data-with-r.html#cb210-11" tabindex="-1"></a><span class="do">##  3  2013     1     3 11.0 </span></span>
<span id="cb210-12"><a href="managing-data-with-r.html#cb210-12" tabindex="-1"></a><span class="do">##  4  2013     1     4  8.95</span></span>
<span id="cb210-13"><a href="managing-data-with-r.html#cb210-13" tabindex="-1"></a><span class="do">##  5  2013     1     5  5.73</span></span>
<span id="cb210-14"><a href="managing-data-with-r.html#cb210-14" tabindex="-1"></a><span class="do">##  6  2013     1     6  7.15</span></span>
<span id="cb210-15"><a href="managing-data-with-r.html#cb210-15" tabindex="-1"></a><span class="do">##  7  2013     1     7  5.42</span></span>
<span id="cb210-16"><a href="managing-data-with-r.html#cb210-16" tabindex="-1"></a><span class="do">##  8  2013     1     8  2.55</span></span>
<span id="cb210-17"><a href="managing-data-with-r.html#cb210-17" tabindex="-1"></a><span class="do">##  9  2013     1     9  2.28</span></span>
<span id="cb210-18"><a href="managing-data-with-r.html#cb210-18" tabindex="-1"></a><span class="do">## 10  2013     1    10  2.84</span></span>
<span id="cb210-19"><a href="managing-data-with-r.html#cb210-19" tabindex="-1"></a><span class="do">## # … with 355 more rows</span></span></code></pre></div>
</div>
<div id="combining-multiple-operations-with-pipe" class="section level2 hasAnchor" number="4.10">
<h2><span class="header-section-number">4.10</span> Combining Multiple Operations with Pipe <code>%&gt;%</code><a href="managing-data-with-r.html#combining-multiple-operations-with-pipe" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You can use the shortcut Ctrl/Cmd + Shift + M to insert the pipe operator <code>%&gt;%</code>.</p>
<p><code>x %&gt;% f(y)</code> turns into <code>f(x,y)</code></p>
<p>For example,</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="managing-data-with-r.html#cb211-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb211-2"><a href="managing-data-with-r.html#cb211-2" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">==</span> <span class="dv">1</span>, day <span class="sc">==</span> <span class="dv">1</span>)</span></code></pre></div>
<p>is the same as</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="managing-data-with-r.html#cb212-1" tabindex="-1"></a><span class="fu">filter</span>(flights, month <span class="sc">==</span> <span class="dv">1</span>, day <span class="sc">==</span> <span class="dv">1</span>)</span></code></pre></div>
<p><code>x %&gt;% f(y) %&gt;% g(z)</code> turns into <code>g(f(x,y),z)</code>.</p>
<p>For example,</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="managing-data-with-r.html#cb213-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb213-2"><a href="managing-data-with-r.html#cb213-2" tabindex="-1"></a>  <span class="fu">group_by</span>(year, month) <span class="sc">%&gt;%</span> </span>
<span id="cb213-3"><a href="managing-data-with-r.html#cb213-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_dep_delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb213-4"><a href="managing-data-with-r.html#cb213-4" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
<p>is the same as</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="managing-data-with-r.html#cb214-1" tabindex="-1"></a><span class="fu">ungroup</span>(<span class="fu">summarize</span>(<span class="fu">group_by</span>(flights, year, month), <span class="at">mean_dep_delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<p>Using the pipe can avoid creating and naming intermediate objects that we don’t need. Instead, the pipe focuses on the sequence of actions, not the object that the actions being performed on. It also tends to make the code easier to read. For the above example, you can read it as: for the dataset flights, we first group the data by <code>year</code> and <code>month</code>, then summarize the data by finding the mean. We can think of the pipe <code>%&gt;%</code> as “then”.</p>
<p>Note: if you have to manipulate some intermediate objects, it may make sense not to use the pipe operator in that situation.</p>
<p><strong>More examples:</strong></p>
<p>Average delay per month:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="managing-data-with-r.html#cb215-1" tabindex="-1"></a>by_month <span class="ot">&lt;-</span> <span class="fu">group_by</span>(flights, month)</span>
<span id="cb215-2"><a href="managing-data-with-r.html#cb215-2" tabindex="-1"></a><span class="fu">ungroup</span>(<span class="fu">summarize</span>(by_month, <span class="at">delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb215-3"><a href="managing-data-with-r.html#cb215-3" tabindex="-1"></a><span class="do">## # A tibble: 12 × 2</span></span>
<span id="cb215-4"><a href="managing-data-with-r.html#cb215-4" tabindex="-1"></a><span class="do">##    month delay</span></span>
<span id="cb215-5"><a href="managing-data-with-r.html#cb215-5" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;dbl&gt;</span></span>
<span id="cb215-6"><a href="managing-data-with-r.html#cb215-6" tabindex="-1"></a><span class="do">##  1     1 10.0 </span></span>
<span id="cb215-7"><a href="managing-data-with-r.html#cb215-7" tabindex="-1"></a><span class="do">##  2     2 10.8 </span></span>
<span id="cb215-8"><a href="managing-data-with-r.html#cb215-8" tabindex="-1"></a><span class="do">##  3     3 13.2 </span></span>
<span id="cb215-9"><a href="managing-data-with-r.html#cb215-9" tabindex="-1"></a><span class="do">##  4     4 13.9 </span></span>
<span id="cb215-10"><a href="managing-data-with-r.html#cb215-10" tabindex="-1"></a><span class="do">##  5     5 13.0 </span></span>
<span id="cb215-11"><a href="managing-data-with-r.html#cb215-11" tabindex="-1"></a><span class="do">##  6     6 20.8 </span></span>
<span id="cb215-12"><a href="managing-data-with-r.html#cb215-12" tabindex="-1"></a><span class="do">##  7     7 21.7 </span></span>
<span id="cb215-13"><a href="managing-data-with-r.html#cb215-13" tabindex="-1"></a><span class="do">##  8     8 12.6 </span></span>
<span id="cb215-14"><a href="managing-data-with-r.html#cb215-14" tabindex="-1"></a><span class="do">##  9     9  6.72</span></span>
<span id="cb215-15"><a href="managing-data-with-r.html#cb215-15" tabindex="-1"></a><span class="do">## 10    10  6.24</span></span>
<span id="cb215-16"><a href="managing-data-with-r.html#cb215-16" tabindex="-1"></a><span class="do">## 11    11  5.44</span></span>
<span id="cb215-17"><a href="managing-data-with-r.html#cb215-17" tabindex="-1"></a><span class="do">## 12    12 16.6</span></span>
<span id="cb215-18"><a href="managing-data-with-r.html#cb215-18" tabindex="-1"></a></span>
<span id="cb215-19"><a href="managing-data-with-r.html#cb215-19" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb215-20"><a href="managing-data-with-r.html#cb215-20" tabindex="-1"></a>  <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span> </span>
<span id="cb215-21"><a href="managing-data-with-r.html#cb215-21" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb215-22"><a href="managing-data-with-r.html#cb215-22" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="co"># a good habit is to use ungroup after the calculations</span></span>
<span id="cb215-23"><a href="managing-data-with-r.html#cb215-23" tabindex="-1"></a><span class="do">## # A tibble: 12 × 2</span></span>
<span id="cb215-24"><a href="managing-data-with-r.html#cb215-24" tabindex="-1"></a><span class="do">##    month delay</span></span>
<span id="cb215-25"><a href="managing-data-with-r.html#cb215-25" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;dbl&gt;</span></span>
<span id="cb215-26"><a href="managing-data-with-r.html#cb215-26" tabindex="-1"></a><span class="do">##  1     1 10.0 </span></span>
<span id="cb215-27"><a href="managing-data-with-r.html#cb215-27" tabindex="-1"></a><span class="do">##  2     2 10.8 </span></span>
<span id="cb215-28"><a href="managing-data-with-r.html#cb215-28" tabindex="-1"></a><span class="do">##  3     3 13.2 </span></span>
<span id="cb215-29"><a href="managing-data-with-r.html#cb215-29" tabindex="-1"></a><span class="do">##  4     4 13.9 </span></span>
<span id="cb215-30"><a href="managing-data-with-r.html#cb215-30" tabindex="-1"></a><span class="do">##  5     5 13.0 </span></span>
<span id="cb215-31"><a href="managing-data-with-r.html#cb215-31" tabindex="-1"></a><span class="do">##  6     6 20.8 </span></span>
<span id="cb215-32"><a href="managing-data-with-r.html#cb215-32" tabindex="-1"></a><span class="do">##  7     7 21.7 </span></span>
<span id="cb215-33"><a href="managing-data-with-r.html#cb215-33" tabindex="-1"></a><span class="do">##  8     8 12.6 </span></span>
<span id="cb215-34"><a href="managing-data-with-r.html#cb215-34" tabindex="-1"></a><span class="do">##  9     9  6.72</span></span>
<span id="cb215-35"><a href="managing-data-with-r.html#cb215-35" tabindex="-1"></a><span class="do">## 10    10  6.24</span></span>
<span id="cb215-36"><a href="managing-data-with-r.html#cb215-36" tabindex="-1"></a><span class="do">## 11    11  5.44</span></span>
<span id="cb215-37"><a href="managing-data-with-r.html#cb215-37" tabindex="-1"></a><span class="do">## 12    12 16.6</span></span></code></pre></div>
<p>Ex: Find the average weights of the cars grouped by the number of gears in the dataset <code>mtcars</code>.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="managing-data-with-r.html#cb216-1" tabindex="-1"></a>mtcars_gear <span class="ot">&lt;-</span> <span class="fu">group_by</span>(mtcars, gear)</span>
<span id="cb216-2"><a href="managing-data-with-r.html#cb216-2" tabindex="-1"></a><span class="fu">ungroup</span>(<span class="fu">summarize</span>(mtcars_gear, <span class="at">avg_wt =</span> <span class="fu">mean</span>(wt, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb216-3"><a href="managing-data-with-r.html#cb216-3" tabindex="-1"></a><span class="do">## # A tibble: 3 × 2</span></span>
<span id="cb216-4"><a href="managing-data-with-r.html#cb216-4" tabindex="-1"></a><span class="do">##    gear avg_wt</span></span>
<span id="cb216-5"><a href="managing-data-with-r.html#cb216-5" tabindex="-1"></a><span class="do">##   &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb216-6"><a href="managing-data-with-r.html#cb216-6" tabindex="-1"></a><span class="do">## 1     3   3.89</span></span>
<span id="cb216-7"><a href="managing-data-with-r.html#cb216-7" tabindex="-1"></a><span class="do">## 2     4   2.62</span></span>
<span id="cb216-8"><a href="managing-data-with-r.html#cb216-8" tabindex="-1"></a><span class="do">## 3     5   2.63</span></span>
<span id="cb216-9"><a href="managing-data-with-r.html#cb216-9" tabindex="-1"></a></span>
<span id="cb216-10"><a href="managing-data-with-r.html#cb216-10" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb216-11"><a href="managing-data-with-r.html#cb216-11" tabindex="-1"></a>  <span class="fu">group_by</span>(gear) <span class="sc">%&gt;%</span> </span>
<span id="cb216-12"><a href="managing-data-with-r.html#cb216-12" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_wt =</span> <span class="fu">mean</span>(wt, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb216-13"><a href="managing-data-with-r.html#cb216-13" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb216-14"><a href="managing-data-with-r.html#cb216-14" tabindex="-1"></a><span class="do">## # A tibble: 3 × 2</span></span>
<span id="cb216-15"><a href="managing-data-with-r.html#cb216-15" tabindex="-1"></a><span class="do">##    gear avg_wt</span></span>
<span id="cb216-16"><a href="managing-data-with-r.html#cb216-16" tabindex="-1"></a><span class="do">##   &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb216-17"><a href="managing-data-with-r.html#cb216-17" tabindex="-1"></a><span class="do">## 1     3   3.89</span></span>
<span id="cb216-18"><a href="managing-data-with-r.html#cb216-18" tabindex="-1"></a><span class="do">## 2     4   2.62</span></span>
<span id="cb216-19"><a href="managing-data-with-r.html#cb216-19" tabindex="-1"></a><span class="do">## 3     5   2.63</span></span></code></pre></div>
<p>Ex: Find the sample standard deviation of the weights of the cars grouped by the number of gears.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="managing-data-with-r.html#cb217-1" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb217-2"><a href="managing-data-with-r.html#cb217-2" tabindex="-1"></a>  <span class="fu">group_by</span>(gear) <span class="sc">%&gt;%</span> </span>
<span id="cb217-3"><a href="managing-data-with-r.html#cb217-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sd_wt =</span> <span class="fu">sd</span>(wt, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb217-4"><a href="managing-data-with-r.html#cb217-4" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb217-5"><a href="managing-data-with-r.html#cb217-5" tabindex="-1"></a><span class="do">## # A tibble: 3 × 2</span></span>
<span id="cb217-6"><a href="managing-data-with-r.html#cb217-6" tabindex="-1"></a><span class="do">##    gear sd_wt</span></span>
<span id="cb217-7"><a href="managing-data-with-r.html#cb217-7" tabindex="-1"></a><span class="do">##   &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb217-8"><a href="managing-data-with-r.html#cb217-8" tabindex="-1"></a><span class="do">## 1     3 0.833</span></span>
<span id="cb217-9"><a href="managing-data-with-r.html#cb217-9" tabindex="-1"></a><span class="do">## 2     4 0.633</span></span>
<span id="cb217-10"><a href="managing-data-with-r.html#cb217-10" tabindex="-1"></a><span class="do">## 3     5 0.819</span></span></code></pre></div>
<p>Pipe <code>%&gt;%</code> can also be used with <code>ggplot</code> (see Chapter 6):</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="managing-data-with-r.html#cb218-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb218-2"><a href="managing-data-with-r.html#cb218-2" tabindex="-1"></a>  <span class="fu">group_by</span>(year, month) <span class="sc">%&gt;%</span> </span>
<span id="cb218-3"><a href="managing-data-with-r.html#cb218-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_dep_delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb218-4"><a href="managing-data-with-r.html#cb218-4" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb218-5"><a href="managing-data-with-r.html#cb218-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(month), <span class="at">y =</span> mean_dep_delay)) <span class="sc">+</span></span>
<span id="cb218-6"><a href="managing-data-with-r.html#cb218-6" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="co"># notice the spacing for good indentation</span></span></code></pre></div>
<p><img src="Book_files/figure-html/unnamed-chunk-232-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p>Notice the difference between <code>%&gt;%</code> and <code>+</code> in the above code.</p>
<p>E.g. Create new columns for the average departure delay by date and average departure delay by destination using <code>mutate</code></p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="managing-data-with-r.html#cb219-1" tabindex="-1"></a>group_date <span class="ot">&lt;-</span> <span class="fu">group_by</span>(<span class="fu">select</span>(flights, year<span class="sc">:</span>day, dep_delay, dest), month, day)</span>
<span id="cb219-2"><a href="managing-data-with-r.html#cb219-2" tabindex="-1"></a>flights2 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(group_date, <span class="at">avg_date_dep_delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb219-3"><a href="managing-data-with-r.html#cb219-3" tabindex="-1"></a>group_dest <span class="ot">&lt;-</span> <span class="fu">group_by</span>(flights2, dest)</span>
<span id="cb219-4"><a href="managing-data-with-r.html#cb219-4" tabindex="-1"></a>(flights3 <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(<span class="fu">mutate</span>(group_dest, <span class="at">avg_dest_dep_delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))))</span>
<span id="cb219-5"><a href="managing-data-with-r.html#cb219-5" tabindex="-1"></a><span class="do">## # A tibble: 336,776 × 7</span></span>
<span id="cb219-6"><a href="managing-data-with-r.html#cb219-6" tabindex="-1"></a><span class="do">##     year month   day dep_delay dest  avg_date_dep_delay avg_dest_dep_delay</span></span>
<span id="cb219-7"><a href="managing-data-with-r.html#cb219-7" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb219-8"><a href="managing-data-with-r.html#cb219-8" tabindex="-1"></a><span class="do">##  1  2013     1     1         2 IAH                 11.5              10.8 </span></span>
<span id="cb219-9"><a href="managing-data-with-r.html#cb219-9" tabindex="-1"></a><span class="do">##  2  2013     1     1         4 IAH                 11.5              10.8 </span></span>
<span id="cb219-10"><a href="managing-data-with-r.html#cb219-10" tabindex="-1"></a><span class="do">##  3  2013     1     1         2 MIA                 11.5               8.88</span></span>
<span id="cb219-11"><a href="managing-data-with-r.html#cb219-11" tabindex="-1"></a><span class="do">##  4  2013     1     1        -1 BQN                 11.5              12.4 </span></span>
<span id="cb219-12"><a href="managing-data-with-r.html#cb219-12" tabindex="-1"></a><span class="do">##  5  2013     1     1        -6 ATL                 11.5              12.5 </span></span>
<span id="cb219-13"><a href="managing-data-with-r.html#cb219-13" tabindex="-1"></a><span class="do">##  6  2013     1     1        -4 ORD                 11.5              13.6 </span></span>
<span id="cb219-14"><a href="managing-data-with-r.html#cb219-14" tabindex="-1"></a><span class="do">##  7  2013     1     1        -5 FLL                 11.5              12.7 </span></span>
<span id="cb219-15"><a href="managing-data-with-r.html#cb219-15" tabindex="-1"></a><span class="do">##  8  2013     1     1        -3 IAD                 11.5              17.0 </span></span>
<span id="cb219-16"><a href="managing-data-with-r.html#cb219-16" tabindex="-1"></a><span class="do">##  9  2013     1     1        -3 MCO                 11.5              11.3 </span></span>
<span id="cb219-17"><a href="managing-data-with-r.html#cb219-17" tabindex="-1"></a><span class="do">## 10  2013     1     1        -2 ORD                 11.5              13.6 </span></span>
<span id="cb219-18"><a href="managing-data-with-r.html#cb219-18" tabindex="-1"></a><span class="do">## # … with 336,766 more rows</span></span>
<span id="cb219-19"><a href="managing-data-with-r.html#cb219-19" tabindex="-1"></a></span>
<span id="cb219-20"><a href="managing-data-with-r.html#cb219-20" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb219-21"><a href="managing-data-with-r.html#cb219-21" tabindex="-1"></a>  <span class="fu">select</span>(year<span class="sc">:</span>day, dep_delay, dest) <span class="sc">%&gt;%</span> </span>
<span id="cb219-22"><a href="managing-data-with-r.html#cb219-22" tabindex="-1"></a>  <span class="fu">group_by</span>(month, day) <span class="sc">%&gt;%</span> </span>
<span id="cb219-23"><a href="managing-data-with-r.html#cb219-23" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">avg_date_dep_delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb219-24"><a href="managing-data-with-r.html#cb219-24" tabindex="-1"></a>  <span class="fu">group_by</span>(dest) <span class="sc">%&gt;%</span> <span class="co"># By default, group_by() overrides existing grouping</span></span>
<span id="cb219-25"><a href="managing-data-with-r.html#cb219-25" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">avg_dest_dep_delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb219-26"><a href="managing-data-with-r.html#cb219-26" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb219-27"><a href="managing-data-with-r.html#cb219-27" tabindex="-1"></a><span class="do">## # A tibble: 336,776 × 7</span></span>
<span id="cb219-28"><a href="managing-data-with-r.html#cb219-28" tabindex="-1"></a><span class="do">##     year month   day dep_delay dest  avg_date_dep_delay avg_dest_dep_delay</span></span>
<span id="cb219-29"><a href="managing-data-with-r.html#cb219-29" tabindex="-1"></a><span class="do">##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb219-30"><a href="managing-data-with-r.html#cb219-30" tabindex="-1"></a><span class="do">##  1  2013     1     1         2 IAH                 11.5              10.8 </span></span>
<span id="cb219-31"><a href="managing-data-with-r.html#cb219-31" tabindex="-1"></a><span class="do">##  2  2013     1     1         4 IAH                 11.5              10.8 </span></span>
<span id="cb219-32"><a href="managing-data-with-r.html#cb219-32" tabindex="-1"></a><span class="do">##  3  2013     1     1         2 MIA                 11.5               8.88</span></span>
<span id="cb219-33"><a href="managing-data-with-r.html#cb219-33" tabindex="-1"></a><span class="do">##  4  2013     1     1        -1 BQN                 11.5              12.4 </span></span>
<span id="cb219-34"><a href="managing-data-with-r.html#cb219-34" tabindex="-1"></a><span class="do">##  5  2013     1     1        -6 ATL                 11.5              12.5 </span></span>
<span id="cb219-35"><a href="managing-data-with-r.html#cb219-35" tabindex="-1"></a><span class="do">##  6  2013     1     1        -4 ORD                 11.5              13.6 </span></span>
<span id="cb219-36"><a href="managing-data-with-r.html#cb219-36" tabindex="-1"></a><span class="do">##  7  2013     1     1        -5 FLL                 11.5              12.7 </span></span>
<span id="cb219-37"><a href="managing-data-with-r.html#cb219-37" tabindex="-1"></a><span class="do">##  8  2013     1     1        -3 IAD                 11.5              17.0 </span></span>
<span id="cb219-38"><a href="managing-data-with-r.html#cb219-38" tabindex="-1"></a><span class="do">##  9  2013     1     1        -3 MCO                 11.5              11.3 </span></span>
<span id="cb219-39"><a href="managing-data-with-r.html#cb219-39" tabindex="-1"></a><span class="do">## 10  2013     1     1        -2 ORD                 11.5              13.6 </span></span>
<span id="cb219-40"><a href="managing-data-with-r.html#cb219-40" tabindex="-1"></a><span class="do">## # … with 336,766 more rows</span></span></code></pre></div>
</div>
<div id="summary" class="section level2 hasAnchor" number="4.11">
<h2><span class="header-section-number">4.11</span> Summary<a href="managing-data-with-r.html#summary" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Functions and operators learned in this chapter: <code>arrange</code>, <code>filter</code>, <code>identical</code>, <code>%in%</code>, <code>tibble</code>, <code>ifelse</code>, <code>mutate</code>, <code>transmute</code>, <code>select</code>, <code>grep</code>, <code>group_by</code>, <code>summarize</code>, <code>ungroup</code>, <code>%&gt;%</code></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="programming-in-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="creating-some-basic-plots.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Book.pdf", "Book.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
