<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 21 Using C++ in R with Rcpp | STAT 362 R for Data Science</title>
  <meta name="description" content="Notes for STAT 362" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 21 Using C++ in R with Rcpp | STAT 362 R for Data Science" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Notes for STAT 362" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 21 Using C++ in R with Rcpp | STAT 362 R for Data Science" />
  
  <meta name="twitter:description" content="Notes for STAT 362" />
  

<meta name="author" content="Brian Ling" />


<meta name="date" content="2024-04-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="evaluating-model-performance-1.html"/>
<link rel="next" href="deep-learning.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Syllabus</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-r-and-rstudio"><i class="fa fa-check"></i><b>1.1</b> What is R and RStudio?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#why-r"><i class="fa fa-check"></i><b>1.2</b> Why R?</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#what-will-you-learn-in-this-course"><i class="fa fa-check"></i><b>1.3</b> What will you learn in this course?</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#r-and-r-as-a-programming-language"><i class="fa fa-check"></i><b>1.3.1</b> R and R as a programming language</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#data-wrangling"><i class="fa fa-check"></i><b>1.3.2</b> Data Wrangling</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction.html"><a href="introduction.html#data-visualization"><i class="fa fa-check"></i><b>1.3.3</b> Data Visualization</a></li>
<li class="chapter" data-level="1.3.4" data-path="introduction.html"><a href="introduction.html#statistical-inference"><i class="fa fa-check"></i><b>1.3.4</b> Statistical Inference</a></li>
<li class="chapter" data-level="1.3.5" data-path="introduction.html"><a href="introduction.html#machine-learning"><i class="fa fa-check"></i><b>1.3.5</b> Machine Learning</a></li>
<li class="chapter" data-level="1.3.6" data-path="introduction.html"><a href="introduction.html#some-numerical-methods"><i class="fa fa-check"></i><b>1.3.6</b> Some Numerical Methods</a></li>
<li class="chapter" data-level="1.3.7" data-path="introduction.html"><a href="introduction.html#lastly"><i class="fa fa-check"></i><b>1.3.7</b> Lastly</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#lets-get-started"><i class="fa fa-check"></i><b>1.4</b> Letâ€™s Get Started</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#r-data-structures"><i class="fa fa-check"></i><b>1.5</b> R Data Structures</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="introduction.html"><a href="introduction.html#vectors"><i class="fa fa-check"></i><b>1.5.1</b> Vectors</a></li>
<li class="chapter" data-level="1.5.2" data-path="introduction.html"><a href="introduction.html#factors"><i class="fa fa-check"></i><b>1.5.2</b> Factors</a></li>
<li class="chapter" data-level="1.5.3" data-path="introduction.html"><a href="introduction.html#matrix"><i class="fa fa-check"></i><b>1.5.3</b> Matrix</a></li>
<li class="chapter" data-level="1.5.4" data-path="introduction.html"><a href="introduction.html#lists"><i class="fa fa-check"></i><b>1.5.4</b> Lists</a></li>
<li class="chapter" data-level="1.5.5" data-path="introduction.html"><a href="introduction.html#data-frames"><i class="fa fa-check"></i><b>1.5.5</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#operators"><i class="fa fa-check"></i><b>1.6</b> Operators</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="introduction.html"><a href="introduction.html#vectorized-operators"><i class="fa fa-check"></i><b>1.6.1</b> Vectorized Operators</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#built-in-functions"><i class="fa fa-check"></i><b>1.7</b> Built-in Functions</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="introduction.html"><a href="introduction.html#sort"><i class="fa fa-check"></i><b>1.7.1</b> <code>sort()</code></a></li>
<li class="chapter" data-level="1.7.2" data-path="introduction.html"><a href="introduction.html#seq"><i class="fa fa-check"></i><b>1.7.2</b> <code>seq()</code></a></li>
<li class="chapter" data-level="1.7.3" data-path="introduction.html"><a href="introduction.html#rep"><i class="fa fa-check"></i><b>1.7.3</b> <code>rep()</code></a></li>
<li class="chapter" data-level="1.7.4" data-path="introduction.html"><a href="introduction.html#pmax-pmin"><i class="fa fa-check"></i><b>1.7.4</b> <code>pmax</code>, <code>pmin</code></a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="introduction.html"><a href="introduction.html#some-useful-rstudio-shortcuts"><i class="fa fa-check"></i><b>1.8</b> Some Useful RStudio Shortcuts</a></li>
<li class="chapter" data-level="1.9" data-path="introduction.html"><a href="introduction.html#exercises"><i class="fa fa-check"></i><b>1.9</b> Exercises</a></li>
<li class="chapter" data-level="1.10" data-path="introduction.html"><a href="introduction.html#comments-to-exercises"><i class="fa fa-check"></i><b>1.10</b> Comments to Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="probability-and-simulation.html"><a href="probability-and-simulation.html"><i class="fa fa-check"></i><b>2</b> Probability and Simulation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="probability-and-simulation.html"><a href="probability-and-simulation.html#probability-distributions"><i class="fa fa-check"></i><b>2.1</b> Probability Distributions</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="probability-and-simulation.html"><a href="probability-and-simulation.html#common-distributions"><i class="fa fa-check"></i><b>2.1.1</b> Common Distributions</a></li>
<li class="chapter" data-level="2.1.2" data-path="probability-and-simulation.html"><a href="probability-and-simulation.html#exercises-1"><i class="fa fa-check"></i><b>2.1.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="probability-and-simulation.html"><a href="probability-and-simulation.html#simulation"><i class="fa fa-check"></i><b>2.2</b> Simulation</a></li>
<li class="chapter" data-level="2.3" data-path="probability-and-simulation.html"><a href="probability-and-simulation.html#additional-exercises"><i class="fa fa-check"></i><b>2.3</b> Additional Exercises:</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="programming-in-r.html"><a href="programming-in-r.html"><i class="fa fa-check"></i><b>3</b> Programming in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="programming-in-r.html"><a href="programming-in-r.html#writing-functions-in-r"><i class="fa fa-check"></i><b>3.1</b> Writing functions in R</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="programming-in-r.html"><a href="programming-in-r.html#argument-matching"><i class="fa fa-check"></i><b>3.1.1</b> Argument Matching</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="programming-in-r.html"><a href="programming-in-r.html#control-flow"><i class="fa fa-check"></i><b>3.2</b> Control Flow</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="programming-in-r.html"><a href="programming-in-r.html#for-loop"><i class="fa fa-check"></i><b>3.2.1</b> for loop</a></li>
<li class="chapter" data-level="3.2.2" data-path="programming-in-r.html"><a href="programming-in-r.html#nested-for-loop"><i class="fa fa-check"></i><b>3.2.2</b> nested for loop</a></li>
<li class="chapter" data-level="3.2.3" data-path="programming-in-r.html"><a href="programming-in-r.html#while-loop"><i class="fa fa-check"></i><b>3.2.3</b> while loop</a></li>
<li class="chapter" data-level="3.2.4" data-path="programming-in-r.html"><a href="programming-in-r.html#if-cond"><i class="fa fa-check"></i><b>3.2.4</b> if (cond)</a></li>
<li class="chapter" data-level="3.2.5" data-path="programming-in-r.html"><a href="programming-in-r.html#if-cond-else-expr"><i class="fa fa-check"></i><b>3.2.5</b> if (cond) else expr</a></li>
<li class="chapter" data-level="3.2.6" data-path="programming-in-r.html"><a href="programming-in-r.html#if-else-ladder"><i class="fa fa-check"></i><b>3.2.6</b> If else ladder</a></li>
<li class="chapter" data-level="3.2.7" data-path="programming-in-r.html"><a href="programming-in-r.html#switch"><i class="fa fa-check"></i><b>3.2.7</b> <code>switch</code></a></li>
<li class="chapter" data-level="3.2.8" data-path="programming-in-r.html"><a href="programming-in-r.html#next-break"><i class="fa fa-check"></i><b>3.2.8</b> <code>next</code>, <code>break</code></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="programming-in-r.html"><a href="programming-in-r.html#loop-functions"><i class="fa fa-check"></i><b>3.3</b> Loop functions</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="programming-in-r.html"><a href="programming-in-r.html#apply"><i class="fa fa-check"></i><b>3.3.1</b> <code>apply()</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="programming-in-r.html"><a href="programming-in-r.html#lapply"><i class="fa fa-check"></i><b>3.3.2</b> <code>lapply()</code></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="programming-in-r.html"><a href="programming-in-r.html#automatically-reindent-code"><i class="fa fa-check"></i><b>3.4</b> Automatically Reindent Code</a></li>
<li class="chapter" data-level="3.5" data-path="programming-in-r.html"><a href="programming-in-r.html#speed-consideration"><i class="fa fa-check"></i><b>3.5</b> Speed Consideration</a></li>
<li class="chapter" data-level="3.6" data-path="programming-in-r.html"><a href="programming-in-r.html#additional-exercises-1"><i class="fa fa-check"></i><b>3.6</b> Additional Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html"><i class="fa fa-check"></i><b>4</b> Managing Data with R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#missing-values"><i class="fa fa-check"></i><b>4.1</b> Missing Values</a></li>
<li class="chapter" data-level="4.2" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#saving-loading-and-removing-r-data-structures"><i class="fa fa-check"></i><b>4.2</b> Saving, loading, and removing R data structures</a></li>
<li class="chapter" data-level="4.3" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#importing-and-saving-data-from-csv-files"><i class="fa fa-check"></i><b>4.3</b> Importing and saving data from CSV files</a></li>
<li class="chapter" data-level="4.4" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#data-transformation-with-dplyr"><i class="fa fa-check"></i><b>4.4</b> Data Transformation with <code>dplyr</code></a></li>
<li class="chapter" data-level="4.5" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#arrange"><i class="fa fa-check"></i><b>4.5</b> <code>arrange()</code></a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#exercises-2"><i class="fa fa-check"></i><b>4.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#filter"><i class="fa fa-check"></i><b>4.6</b> <code>filter()</code></a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#exercises-3"><i class="fa fa-check"></i><b>4.6.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#select"><i class="fa fa-check"></i><b>4.7</b> <code>select()</code></a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#exercises-4"><i class="fa fa-check"></i><b>4.7.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#mutate"><i class="fa fa-check"></i><b>4.8</b> <code>mutate()</code></a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#exercises-5"><i class="fa fa-check"></i><b>4.8.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#summarize-group_by"><i class="fa fa-check"></i><b>4.9</b> <code>summarize(), group_by()</code></a></li>
<li class="chapter" data-level="4.10" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#combining-multiple-operations-with-pipe"><i class="fa fa-check"></i><b>4.10</b> Combining Multiple Operations with Pipe <code>%&gt;%</code></a></li>
<li class="chapter" data-level="4.11" data-path="managing-data-with-r.html"><a href="managing-data-with-r.html#summary"><i class="fa fa-check"></i><b>4.11</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html"><i class="fa fa-check"></i><b>5</b> Creating Some Basic Plots</a>
<ul>
<li class="chapter" data-level="5.1" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#scatter-plot"><i class="fa fa-check"></i><b>5.1</b> Scatter Plot</a></li>
<li class="chapter" data-level="5.2" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#line-graph"><i class="fa fa-check"></i><b>5.2</b> Line Graph</a></li>
<li class="chapter" data-level="5.3" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#bar-chart"><i class="fa fa-check"></i><b>5.3</b> Bar Chart</a></li>
<li class="chapter" data-level="5.4" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#histogram"><i class="fa fa-check"></i><b>5.4</b> Histogram</a></li>
<li class="chapter" data-level="5.5" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#box-plot"><i class="fa fa-check"></i><b>5.5</b> Box Plot</a></li>
<li class="chapter" data-level="5.6" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#plotting-a-function-curve"><i class="fa fa-check"></i><b>5.6</b> Plotting a function curve</a></li>
<li class="chapter" data-level="5.7" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#more-on-plots-with-base-r"><i class="fa fa-check"></i><b>5.7</b> More on plots with base R</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#multi-frame-plot"><i class="fa fa-check"></i><b>5.7.1</b> Multi-frame plot</a></li>
<li class="chapter" data-level="5.7.2" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#subsubsec:type_of_plot"><i class="fa fa-check"></i><b>5.7.2</b> Type of Plot</a></li>
<li class="chapter" data-level="5.7.3" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#parameters-of-a-plot"><i class="fa fa-check"></i><b>5.7.3</b> Parameters of a plot</a></li>
<li class="chapter" data-level="5.7.4" data-path="creating-some-basic-plots.html"><a href="creating-some-basic-plots.html#elements-on-plot"><i class="fa fa-check"></i><b>5.7.4</b> Elements on plot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html"><i class="fa fa-check"></i><b>6</b> Data Visualization with ggplot2</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#bar-charts"><i class="fa fa-check"></i><b>6.1</b> Bar charts</a></li>
<li class="chapter" data-level="6.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#line-graph-1"><i class="fa fa-check"></i><b>6.2</b> Line Graph</a></li>
<li class="chapter" data-level="6.3" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#scatter-plots"><i class="fa fa-check"></i><b>6.3</b> Scatter Plots</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#overplotting"><i class="fa fa-check"></i><b>6.3.1</b> Overplotting</a></li>
<li class="chapter" data-level="6.3.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#labelling-points-in-a-scatter-plot"><i class="fa fa-check"></i><b>6.3.2</b> Labelling points in a scatter plot</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#summarizing-data-distributions"><i class="fa fa-check"></i><b>6.4</b> Summarizing Data Distributions</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#histogram-1"><i class="fa fa-check"></i><b>6.4.1</b> Histogram</a></li>
<li class="chapter" data-level="6.4.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#kernel-density-estimate"><i class="fa fa-check"></i><b>6.4.2</b> Kernel Density Estimate</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#saving-your-plots"><i class="fa fa-check"></i><b>6.5</b> Saving your plots</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#outputting-to-pdf-vector-files"><i class="fa fa-check"></i><b>6.5.1</b> Outputting to pdf vector files</a></li>
<li class="chapter" data-level="6.5.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#outputting-to-bitmap-files"><i class="fa fa-check"></i><b>6.5.2</b> Outputting to bitmap files</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#axes-appearance"><i class="fa fa-check"></i><b>6.6</b> Axes, appearance</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#swapping-x--and-y-axes"><i class="fa fa-check"></i><b>6.6.1</b> Swapping X- and Y-axes</a></li>
<li class="chapter" data-level="6.6.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#setting-the-range-of-a-continuous-axis"><i class="fa fa-check"></i><b>6.6.2</b> Setting the range of a continuous axis</a></li>
<li class="chapter" data-level="6.6.3" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#changing-the-text-of-axis-labels"><i class="fa fa-check"></i><b>6.6.3</b> Changing the text of axis labels</a></li>
<li class="chapter" data-level="6.6.4" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#adding-title"><i class="fa fa-check"></i><b>6.6.4</b> Adding Title</a></li>
<li class="chapter" data-level="6.6.5" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#adding-subtitle"><i class="fa fa-check"></i><b>6.6.5</b> Adding Subtitle</a></li>
<li class="chapter" data-level="6.6.6" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#using-themes"><i class="fa fa-check"></i><b>6.6.6</b> Using Themes</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#summary-1"><i class="fa fa-check"></i><b>6.7</b> Summary</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#bar-charts-1"><i class="fa fa-check"></i><b>6.7.1</b> Bar charts</a></li>
<li class="chapter" data-level="6.7.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#line-graphs"><i class="fa fa-check"></i><b>6.7.2</b> Line graphs</a></li>
<li class="chapter" data-level="6.7.3" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#scatter-plot-1"><i class="fa fa-check"></i><b>6.7.3</b> Scatter plot</a></li>
<li class="chapter" data-level="6.7.4" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#summarizing-data-distributions-1"><i class="fa fa-check"></i><b>6.7.4</b> Summarizing data distributions</a></li>
<li class="chapter" data-level="6.7.5" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#saving-your-plots-1"><i class="fa fa-check"></i><b>6.7.5</b> Saving your plots</a></li>
<li class="chapter" data-level="6.7.6" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#axes-appearance-1"><i class="fa fa-check"></i><b>6.7.6</b> Axes, appearance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html"><i class="fa fa-check"></i><b>7</b> Statistical Inference in R</a>
<ul>
<li class="chapter" data-level="7.1" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#maximum-likelihood-estimation"><i class="fa fa-check"></i><b>7.1</b> Maximum Likelihood Estimation</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#exercises-on-mle"><i class="fa fa-check"></i><b>7.1.1</b> Exercises on MLE</a></li>
<li class="chapter" data-level="7.1.2" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#summary-2"><i class="fa fa-check"></i><b>7.1.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#interval-estimation-and-hypothesis-testing"><i class="fa fa-check"></i><b>7.2</b> Interval Estimation and Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#examples-of-hypothesis-testing"><i class="fa fa-check"></i><b>7.2.1</b> Examples of Hypothesis Testing</a></li>
<li class="chapter" data-level="7.2.2" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#null-hypotheses-alternative-hypotheses-and-p-values"><i class="fa fa-check"></i><b>7.2.2</b> Null Hypotheses, Alternative Hypotheses, and p-values</a></li>
<li class="chapter" data-level="7.2.3" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#type-i-error-and-type-ii-error"><i class="fa fa-check"></i><b>7.2.3</b> Type I error and Type II error</a></li>
<li class="chapter" data-level="7.2.4" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#inference-for-mean-of-one-sample"><i class="fa fa-check"></i><b>7.2.4</b> Inference for Mean of One Sample</a></li>
<li class="chapter" data-level="7.2.5" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#comparing-the-means-of-two-samples"><i class="fa fa-check"></i><b>7.2.5</b> Comparing the means of two samples</a></li>
<li class="chapter" data-level="7.2.6" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#inference-of-a-sample-proportion"><i class="fa fa-check"></i><b>7.2.6</b> Inference of a Sample Proportion</a></li>
<li class="chapter" data-level="7.2.7" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#testing-groups-for-equal-proportions"><i class="fa fa-check"></i><b>7.2.7</b> Testing groups for equal proportions</a></li>
<li class="chapter" data-level="7.2.8" data-path="statistical-inference-in-r.html"><a href="statistical-inference-in-r.html#testing-if-two-samples-have-the-same-underlying-distribution"><i class="fa fa-check"></i><b>7.2.8</b> Testing if two samples have the same underlying distribution</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="root-finding-and-optimization.html"><a href="root-finding-and-optimization.html"><i class="fa fa-check"></i><b>8</b> Root finding and optimization</a>
<ul>
<li class="chapter" data-level="8.1" data-path="root-finding-and-optimization.html"><a href="root-finding-and-optimization.html#root-finding"><i class="fa fa-check"></i><b>8.1</b> Root Finding</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="root-finding-and-optimization.html"><a href="root-finding-and-optimization.html#bisection-method"><i class="fa fa-check"></i><b>8.1.1</b> Bisection Method</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="root-finding-and-optimization.html"><a href="root-finding-and-optimization.html#newton-raphson-method"><i class="fa fa-check"></i><b>8.2</b> Newton-Raphson Method</a></li>
<li class="chapter" data-level="8.3" data-path="root-finding-and-optimization.html"><a href="root-finding-and-optimization.html#minimization-and-maximization"><i class="fa fa-check"></i><b>8.3</b> Minimization and Maximization</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="root-finding-and-optimization.html"><a href="root-finding-and-optimization.html#newton-raphson-method-1"><i class="fa fa-check"></i><b>8.3.1</b> Newton-Raphson Method</a></li>
<li class="chapter" data-level="8.3.2" data-path="root-finding-and-optimization.html"><a href="root-finding-and-optimization.html#gradient-descent"><i class="fa fa-check"></i><b>8.3.2</b> Gradient Descent</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="root-finding-and-optimization.html"><a href="root-finding-and-optimization.html#optim"><i class="fa fa-check"></i><b>8.4</b> <code>optim</code></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html"><i class="fa fa-check"></i><b>9</b> k-nearest neighbors</a>
<ul>
<li class="chapter" data-level="9.1" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html#introduction-1"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html#feature-scaling"><i class="fa fa-check"></i><b>9.2</b> Feature Scaling</a></li>
<li class="chapter" data-level="9.3" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html#example-classifying-breast-cancers"><i class="fa fa-check"></i><b>9.3</b> Example: Classifying Breast Cancers</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html#evaluating-model-performance"><i class="fa fa-check"></i><b>9.3.1</b> Evaluating Model Performance</a></li>
<li class="chapter" data-level="9.3.2" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html#using-z-score-standardization"><i class="fa fa-check"></i><b>9.3.2</b> Using <span class="math inline">\(z\)</span>-score standardization</a></li>
<li class="chapter" data-level="9.3.3" data-path="k-nearest-neighbors.html"><a href="k-nearest-neighbors.html#testing-alternative-values-of-k"><i class="fa fa-check"></i><b>9.3.3</b> Testing alternative values of <span class="math inline">\(k\)</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="linear-regression-models.html"><a href="linear-regression-models.html"><i class="fa fa-check"></i><b>10</b> Linear Regression Models</a>
<ul>
<li class="chapter" data-level="10.1" data-path="linear-regression-models.html"><a href="linear-regression-models.html#simple-linear-regression"><i class="fa fa-check"></i><b>10.1</b> Simple Linear Regression</a></li>
<li class="chapter" data-level="10.2" data-path="linear-regression-models.html"><a href="linear-regression-models.html#smoothed-conditional-means"><i class="fa fa-check"></i><b>10.2</b> Smoothed Conditional Means</a></li>
<li class="chapter" data-level="10.3" data-path="linear-regression-models.html"><a href="linear-regression-models.html#multiple-linear-regression"><i class="fa fa-check"></i><b>10.3</b> Multiple Linear Regression</a></li>
<li class="chapter" data-level="10.4" data-path="linear-regression-models.html"><a href="linear-regression-models.html#example-diamonds"><i class="fa fa-check"></i><b>10.4</b> Example: <code>diamonds</code></a></li>
<li class="chapter" data-level="10.5" data-path="linear-regression-models.html"><a href="linear-regression-models.html#categorical-predictors"><i class="fa fa-check"></i><b>10.5</b> Categorical Predictors</a></li>
<li class="chapter" data-level="10.6" data-path="linear-regression-models.html"><a href="linear-regression-models.html#compare-models-using-anova"><i class="fa fa-check"></i><b>10.6</b> Compare models using ANOVA</a></li>
<li class="chapter" data-level="10.7" data-path="linear-regression-models.html"><a href="linear-regression-models.html#prediction"><i class="fa fa-check"></i><b>10.7</b> Prediction</a></li>
<li class="chapter" data-level="10.8" data-path="linear-regression-models.html"><a href="linear-regression-models.html#interaction-terms"><i class="fa fa-check"></i><b>10.8</b> Interaction Terms</a></li>
<li class="chapter" data-level="10.9" data-path="linear-regression-models.html"><a href="linear-regression-models.html#variable-transformation"><i class="fa fa-check"></i><b>10.9</b> Variable Transformation</a></li>
<li class="chapter" data-level="10.10" data-path="linear-regression-models.html"><a href="linear-regression-models.html#polynomial-regression"><i class="fa fa-check"></i><b>10.10</b> Polynomial Regression</a></li>
<li class="chapter" data-level="10.11" data-path="linear-regression-models.html"><a href="linear-regression-models.html#stepwise-regression"><i class="fa fa-check"></i><b>10.11</b> Stepwise regression</a></li>
<li class="chapter" data-level="10.12" data-path="linear-regression-models.html"><a href="linear-regression-models.html#best-subset"><i class="fa fa-check"></i><b>10.12</b> Best subset</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="logistic-regression-model.html"><a href="logistic-regression-model.html"><i class="fa fa-check"></i><b>11</b> Logistic Regression Model</a></li>
<li class="chapter" data-level="12" data-path="multinomial-regression-model.html"><a href="multinomial-regression-model.html"><i class="fa fa-check"></i><b>12</b> Multinomial Regression Model</a></li>
<li class="chapter" data-level="13" data-path="decision-trees.html"><a href="decision-trees.html"><i class="fa fa-check"></i><b>13</b> Decision Trees</a>
<ul>
<li class="chapter" data-level="13.1" data-path="decision-trees.html"><a href="decision-trees.html#introduction-to-classification-tree"><i class="fa fa-check"></i><b>13.1</b> Introduction to Classification Tree</a></li>
<li class="chapter" data-level="13.2" data-path="decision-trees.html"><a href="decision-trees.html#introduction-to-regression-tree"><i class="fa fa-check"></i><b>13.2</b> Introduction to regression tree</a></li>
<li class="chapter" data-level="13.3" data-path="decision-trees.html"><a href="decision-trees.html#mathematical-formulation"><i class="fa fa-check"></i><b>13.3</b> Mathematical Formulation</a></li>
<li class="chapter" data-level="13.4" data-path="decision-trees.html"><a href="decision-trees.html#examples"><i class="fa fa-check"></i><b>13.4</b> Examples</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="decision-trees.html"><a href="decision-trees.html#classification-tree"><i class="fa fa-check"></i><b>13.4.1</b> Classification Tree</a></li>
<li class="chapter" data-level="13.4.2" data-path="decision-trees.html"><a href="decision-trees.html#regression-tree"><i class="fa fa-check"></i><b>13.4.2</b> Regression Tree</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="resampling-methods.html"><a href="resampling-methods.html"><i class="fa fa-check"></i><b>14</b> Resampling Methods</a>
<ul>
<li class="chapter" data-level="14.1" data-path="resampling-methods.html"><a href="resampling-methods.html#cross-validation"><i class="fa fa-check"></i><b>14.1</b> Cross-validation</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="resampling-methods.html"><a href="resampling-methods.html#estimate-test-errors"><i class="fa fa-check"></i><b>14.1.1</b> Estimate Test Errors</a></li>
<li class="chapter" data-level="14.1.2" data-path="resampling-methods.html"><a href="resampling-methods.html#model-selection"><i class="fa fa-check"></i><b>14.1.2</b> Model Selection</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="resampling-methods.html"><a href="resampling-methods.html#bootstrap-optional"><i class="fa fa-check"></i><b>14.2</b> Bootstrap (optional)</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="ensemble-methods.html"><a href="ensemble-methods.html"><i class="fa fa-check"></i><b>15</b> Ensemble Methods</a>
<ul>
<li class="chapter" data-level="15.1" data-path="ensemble-methods.html"><a href="ensemble-methods.html#bagging"><i class="fa fa-check"></i><b>15.1</b> Bagging</a></li>
<li class="chapter" data-level="15.2" data-path="ensemble-methods.html"><a href="ensemble-methods.html#random-forest"><i class="fa fa-check"></i><b>15.2</b> Random Forest</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="ensemble-methods.html"><a href="ensemble-methods.html#example"><i class="fa fa-check"></i><b>15.2.1</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="ensemble-methods.html"><a href="ensemble-methods.html#boosting"><i class="fa fa-check"></i><b>15.3</b> Boosting</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="ensemble-methods.html"><a href="ensemble-methods.html#example-1"><i class="fa fa-check"></i><b>15.3.1</b> Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>16</b> R Markdown</a>
<ul>
<li class="chapter" data-level="16.1" data-path="r-markdown.html"><a href="r-markdown.html#basic-formatting"><i class="fa fa-check"></i><b>16.1</b> Basic formatting</a></li>
<li class="chapter" data-level="16.2" data-path="r-markdown.html"><a href="r-markdown.html#this-is-a-subsection"><i class="fa fa-check"></i><b>16.2</b> This is a subsection</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="r-markdown.html"><a href="r-markdown.html#this-is-a-subsubsection"><i class="fa fa-check"></i><b>16.2.1</b> This is a subsubsection</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="r-markdown.html"><a href="r-markdown.html#formatting-text"><i class="fa fa-check"></i><b>16.3</b> Formatting Text</a></li>
<li class="chapter" data-level="16.4" data-path="r-markdown.html"><a href="r-markdown.html#list"><i class="fa fa-check"></i><b>16.4</b> List</a></li>
<li class="chapter" data-level="16.5" data-path="r-markdown.html"><a href="r-markdown.html#table"><i class="fa fa-check"></i><b>16.5</b> Table</a></li>
<li class="chapter" data-level="16.6" data-path="r-markdown.html"><a href="r-markdown.html#r-code"><i class="fa fa-check"></i><b>16.6</b> R code</a></li>
<li class="chapter" data-level="16.7" data-path="r-markdown.html"><a href="r-markdown.html#graphics"><i class="fa fa-check"></i><b>16.7</b> Graphics</a></li>
<li class="chapter" data-level="16.8" data-path="r-markdown.html"><a href="r-markdown.html#latex-equation"><i class="fa fa-check"></i><b>16.8</b> Latex Equation</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="k-means-clustering.html"><a href="k-means-clustering.html"><i class="fa fa-check"></i><b>17</b> k-means Clustering</a>
<ul>
<li class="chapter" data-level="17.1" data-path="k-means-clustering.html"><a href="k-means-clustering.html#introduction-2"><i class="fa fa-check"></i><b>17.1</b> Introduction</a></li>
<li class="chapter" data-level="17.2" data-path="k-means-clustering.html"><a href="k-means-clustering.html#applications"><i class="fa fa-check"></i><b>17.2</b> Applications</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="k-means-clustering.html"><a href="k-means-clustering.html#cluster-analysis"><i class="fa fa-check"></i><b>17.2.1</b> Cluster Analysis</a></li>
<li class="chapter" data-level="17.2.2" data-path="k-means-clustering.html"><a href="k-means-clustering.html#image-segementation-and-image-compression"><i class="fa fa-check"></i><b>17.2.2</b> Image Segementation and Image Compression</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html"><i class="fa fa-check"></i><b>18</b> Hierarchical Clustering</a>
<ul>
<li class="chapter" data-level="18.1" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#dissimilarity-measure-and-linkage"><i class="fa fa-check"></i><b>18.1</b> Dissimilarity measure and Linkage</a></li>
<li class="chapter" data-level="18.2" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#alogrithm"><i class="fa fa-check"></i><b>18.2</b> Alogrithm</a></li>
<li class="chapter" data-level="18.3" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#applications-1"><i class="fa fa-check"></i><b>18.3</b> Applications</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#nci60-data"><i class="fa fa-check"></i><b>18.3.1</b> NCI60 Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="shrinkage-methods.html"><a href="shrinkage-methods.html"><i class="fa fa-check"></i><b>19</b> Shrinkage Methods</a>
<ul>
<li class="chapter" data-level="19.1" data-path="shrinkage-methods.html"><a href="shrinkage-methods.html#ridge-regression"><i class="fa fa-check"></i><b>19.1</b> Ridge Regression</a></li>
<li class="chapter" data-level="19.2" data-path="shrinkage-methods.html"><a href="shrinkage-methods.html#lasso"><i class="fa fa-check"></i><b>19.2</b> LASSO</a></li>
<li class="chapter" data-level="19.3" data-path="shrinkage-methods.html"><a href="shrinkage-methods.html#selecting-the-tuning-parameter"><i class="fa fa-check"></i><b>19.3</b> Selecting the tuning parameter</a></li>
<li class="chapter" data-level="19.4" data-path="shrinkage-methods.html"><a href="shrinkage-methods.html#glmnet"><i class="fa fa-check"></i><b>19.4</b> <code>glmnet</code></a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="shrinkage-methods.html"><a href="shrinkage-methods.html#ridge-regression-1"><i class="fa fa-check"></i><b>19.4.1</b> Ridge Regression</a></li>
<li class="chapter" data-level="19.4.2" data-path="shrinkage-methods.html"><a href="shrinkage-methods.html#lasso-1"><i class="fa fa-check"></i><b>19.4.2</b> LASSO</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="shrinkage-methods.html"><a href="shrinkage-methods.html#penalized-logistic-regression"><i class="fa fa-check"></i><b>19.5</b> Penalized Logistic Regression</a></li>
<li class="chapter" data-level="19.6" data-path="shrinkage-methods.html"><a href="shrinkage-methods.html#penalized-multinomial-regression"><i class="fa fa-check"></i><b>19.6</b> Penalized Multinomial Regression</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html"><i class="fa fa-check"></i><b>20</b> Evaluating Model Performance</a>
<ul>
<li class="chapter" data-level="20.1" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#accuracy-and-confusion-matrix"><i class="fa fa-check"></i><b>20.1</b> Accuracy and Confusion Matrix</a></li>
<li class="chapter" data-level="20.2" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#other-measures-of-performance"><i class="fa fa-check"></i><b>20.2</b> Other Measures of Performance</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#the-kappa-statistic"><i class="fa fa-check"></i><b>20.2.1</b> The kappa statistic</a></li>
<li class="chapter" data-level="20.2.2" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#sensitivity-and-specificity"><i class="fa fa-check"></i><b>20.2.2</b> Sensitivity and specificity</a></li>
<li class="chapter" data-level="20.2.3" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#precision-and-recall"><i class="fa fa-check"></i><b>20.2.3</b> Precision and Recall</a></li>
<li class="chapter" data-level="20.2.4" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#roc-and-auc"><i class="fa fa-check"></i><b>20.2.4</b> ROC and AUC</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#estimating-future-performances"><i class="fa fa-check"></i><b>20.3</b> Estimating future performances</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#cross-validation-1"><i class="fa fa-check"></i><b>20.3.1</b> Cross-validation</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="evaluating-model-performance-1.html"><a href="evaluating-model-performance-1.html#class-imbalance-in-classification"><i class="fa fa-check"></i><b>20.4</b> Class Imbalance in Classification</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="using-c-in-r-with-rcpp.html"><a href="using-c-in-r-with-rcpp.html"><i class="fa fa-check"></i><b>21</b> Using C++ in R with Rcpp</a>
<ul>
<li class="chapter" data-level="21.1" data-path="using-c-in-r-with-rcpp.html"><a href="using-c-in-r-with-rcpp.html#basic-examples"><i class="fa fa-check"></i><b>21.1</b> Basic Examples</a></li>
<li class="chapter" data-level="21.2" data-path="using-c-in-r-with-rcpp.html"><a href="using-c-in-r-with-rcpp.html#scalar-input-scalar-output"><i class="fa fa-check"></i><b>21.2</b> Scalar Input, Scalar Output</a></li>
<li class="chapter" data-level="21.3" data-path="using-c-in-r-with-rcpp.html"><a href="using-c-in-r-with-rcpp.html#vector-input-scalar-ouptut"><i class="fa fa-check"></i><b>21.3</b> Vector Input, Scalar Ouptut</a></li>
<li class="chapter" data-level="21.4" data-path="using-c-in-r-with-rcpp.html"><a href="using-c-in-r-with-rcpp.html#vector-input-vector-output"><i class="fa fa-check"></i><b>21.4</b> Vector Input, Vector Output</a></li>
<li class="chapter" data-level="21.5" data-path="using-c-in-r-with-rcpp.html"><a href="using-c-in-r-with-rcpp.html#returning-a-list"><i class="fa fa-check"></i><b>21.5</b> Returning a list</a></li>
<li class="chapter" data-level="21.6" data-path="using-c-in-r-with-rcpp.html"><a href="using-c-in-r-with-rcpp.html#using-sourcecpp"><i class="fa fa-check"></i><b>21.6</b> Using <code>sourceCpp</code></a></li>
<li class="chapter" data-level="21.7" data-path="using-c-in-r-with-rcpp.html"><a href="using-c-in-r-with-rcpp.html#example-gibbs-sampler"><i class="fa fa-check"></i><b>21.7</b> Example: Gibbs Sampler</a></li>
<li class="chapter" data-level="21.8" data-path="using-c-in-r-with-rcpp.html"><a href="using-c-in-r-with-rcpp.html#more-details"><i class="fa fa-check"></i><b>21.8</b> More Details</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="deep-learning.html"><a href="deep-learning.html"><i class="fa fa-check"></i><b>22</b> Deep Learning</a>
<ul>
<li class="chapter" data-level="22.1" data-path="deep-learning.html"><a href="deep-learning.html#introduction-3"><i class="fa fa-check"></i><b>22.1</b> Introduction</a></li>
<li class="chapter" data-level="22.2" data-path="deep-learning.html"><a href="deep-learning.html#single-layer-neural-netowrks"><i class="fa fa-check"></i><b>22.2</b> Single Layer Neural Netowrks</a></li>
<li class="chapter" data-level="22.3" data-path="deep-learning.html"><a href="deep-learning.html#multilayer-neural-networks"><i class="fa fa-check"></i><b>22.3</b> Multilayer Neural Networks</a></li>
<li class="chapter" data-level="22.4" data-path="deep-learning.html"><a href="deep-learning.html#examples-1"><i class="fa fa-check"></i><b>22.4</b> Examples</a>
<ul>
<li class="chapter" data-level="22.4.1" data-path="deep-learning.html"><a href="deep-learning.html#mnist"><i class="fa fa-check"></i><b>22.4.1</b> MNIST</a></li>
<li class="chapter" data-level="22.4.2" data-path="deep-learning.html"><a href="deep-learning.html#encoding-the-data"><i class="fa fa-check"></i><b>22.4.2</b> Encoding the data</a></li>
<li class="chapter" data-level="22.4.3" data-path="deep-learning.html"><a href="deep-learning.html#implementation"><i class="fa fa-check"></i><b>22.4.3</b> Implementation</a></li>
<li class="chapter" data-level="22.4.4" data-path="deep-learning.html"><a href="deep-learning.html#multilayer-neural-network"><i class="fa fa-check"></i><b>22.4.4</b> Multilayer Neural Network</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">STAT 362 R for Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="using-c-in-r-with-rcpp" class="section level1 hasAnchor" number="21">
<h1><span class="header-section-number">Chapter 21</span> Using C++ in R with Rcpp<a href="using-c-in-r-with-rcpp.html#using-c-in-r-with-rcpp" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<ul>
<li><p>Sometimes R code is not fast enough no matter how hard you try</p></li>
<li><p>In that case, you can consider writing that slow part of your program in C++</p></li>
<li><p>With the package <code>Rcpp</code>, you can connect C++ with R easily</p></li>
<li><p>A typical bottleneck that C++ can address is loops that cannot be (easily) vectorized because subsequent iterations depend on previous ones (e.g., Gibbs sampling when one perform Bayesian inference)</p></li>
</ul>
<p>Basic references: <a href="https://adv-r.hadley.nz/rcpp.html" class="uri">https://adv-r.hadley.nz/rcpp.html</a> (this notes is almost completely following this link)</p>
<p>More examples: <a href="https://gallery.rcpp.org/" class="uri">https://gallery.rcpp.org/</a></p>
<p>Useful Reference: <a href="https://teuder.github.io/rcpp4everyone_en/" class="uri">https://teuder.github.io/rcpp4everyone_en/</a></p>
<p>Installation:</p>
<ul>
<li><p>On Windows, install Rtools (this is not a R package).</p></li>
<li><p>On Mac, install Xcode from the app store.</p></li>
</ul>
<p>Then, install <code>Rcpp</code> using <code>install.packages("Rcpp")</code> in R.</p>
<div id="basic-examples" class="section level2 hasAnchor" number="21.1">
<h2><span class="header-section-number">21.1</span> Basic Examples<a href="using-c-in-r-with-rcpp.html#basic-examples" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb549"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb549-1"><a href="using-c-in-r-with-rcpp.html#cb549-1" tabindex="-1"></a><span class="fu">library</span>(Rcpp)</span></code></pre></div>
<p>Consider this R function that add <span class="math inline">\(3\)</span> numbers:</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="using-c-in-r-with-rcpp.html#cb550-1" tabindex="-1"></a>add_R <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y, z) {</span>
<span id="cb550-2"><a href="using-c-in-r-with-rcpp.html#cb550-2" tabindex="-1"></a>  x <span class="sc">+</span> y <span class="sc">+</span> z</span>
<span id="cb550-3"><a href="using-c-in-r-with-rcpp.html#cb550-3" tabindex="-1"></a>}</span>
<span id="cb550-4"><a href="using-c-in-r-with-rcpp.html#cb550-4" tabindex="-1"></a><span class="fu">add_R</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb550-5"><a href="using-c-in-r-with-rcpp.html#cb550-5" tabindex="-1"></a><span class="do">## [1] 6</span></span></code></pre></div>
<p>Letâ€™s write the C++ equivalent:</p>
<div class="sourceCode" id="cb551"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb551-1"><a href="using-c-in-r-with-rcpp.html#cb551-1" tabindex="-1"></a><span class="co"># need to use &#39; &#39;  or &quot; &quot; inside cppFunction()</span></span>
<span id="cb551-2"><a href="using-c-in-r-with-rcpp.html#cb551-2" tabindex="-1"></a><span class="fu">cppFunction</span>(</span>
<span id="cb551-3"><a href="using-c-in-r-with-rcpp.html#cb551-3" tabindex="-1"></a><span class="st">&#39;int add_C(int x, int y, int z) {</span></span>
<span id="cb551-4"><a href="using-c-in-r-with-rcpp.html#cb551-4" tabindex="-1"></a><span class="st">  int sum = x + y + z;</span></span>
<span id="cb551-5"><a href="using-c-in-r-with-rcpp.html#cb551-5" tabindex="-1"></a><span class="st">  return sum;</span></span>
<span id="cb551-6"><a href="using-c-in-r-with-rcpp.html#cb551-6" tabindex="-1"></a><span class="st">}&#39;</span></span>
<span id="cb551-7"><a href="using-c-in-r-with-rcpp.html#cb551-7" tabindex="-1"></a>)</span></code></pre></div>
<p>When you run this code, Rcpp will compile the C++ code and construct an R function that connects to the compiled C++ function.</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="using-c-in-r-with-rcpp.html#cb552-1" tabindex="-1"></a><span class="co"># add works like a regular R function</span></span>
<span id="cb552-2"><a href="using-c-in-r-with-rcpp.html#cb552-2" tabindex="-1"></a>add_C</span>
<span id="cb552-3"><a href="using-c-in-r-with-rcpp.html#cb552-3" tabindex="-1"></a><span class="do">## function (x, y, z) </span></span>
<span id="cb552-4"><a href="using-c-in-r-with-rcpp.html#cb552-4" tabindex="-1"></a><span class="do">## .Call(&lt;pointer: 0x00007fff86cd1610&gt;, x, y, z)</span></span>
<span id="cb552-5"><a href="using-c-in-r-with-rcpp.html#cb552-5" tabindex="-1"></a></span>
<span id="cb552-6"><a href="using-c-in-r-with-rcpp.html#cb552-6" tabindex="-1"></a><span class="fu">add_C</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb552-7"><a href="using-c-in-r-with-rcpp.html#cb552-7" tabindex="-1"></a><span class="do">## [1] 6</span></span></code></pre></div>
<p>Important differences for writing functions between R and C++:</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>R</th>
<th>C++</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Declare output type</td>
<td>no</td>
<td>yes</td>
</tr>
<tr class="even">
<td>Declare input type</td>
<td>no</td>
<td>yes</td>
</tr>
<tr class="odd">
<td>Require explicit return statement</td>
<td>no</td>
<td>yes</td>
</tr>
<tr class="even">
<td>Statements end with;</td>
<td>no</td>
<td>yes</td>
</tr>
</tbody>
</table>
<p>The common data types are:</p>
<table>
<thead>
<tr class="header">
<th>Type</th>
<th>Vector</th>
<th>Scalar</th>
<th>Matrix</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>numeric</td>
<td><code>NumericVector</code></td>
<td><code>double</code></td>
<td><code>NumericMatrix</code></td>
</tr>
<tr class="even">
<td>integer</td>
<td><code>IntegerVector</code></td>
<td><code>int</code></td>
<td><code>IntegerMatrix</code></td>
</tr>
<tr class="odd">
<td>character</td>
<td><code>CharacterVector</code></td>
<td><code>String</code></td>
<td><code>CharacterMatrix</code></td>
</tr>
<tr class="even">
<td>logical</td>
<td><code>LogicalVector</code></td>
<td><code>bool</code></td>
<td><code>LogicalMatrix</code></td>
</tr>
</tbody>
</table>
</div>
<div id="scalar-input-scalar-output" class="section level2 hasAnchor" number="21.2">
<h2><span class="header-section-number">21.2</span> Scalar Input, Scalar Output<a href="using-c-in-r-with-rcpp.html#scalar-input-scalar-output" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb553"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb553-1"><a href="using-c-in-r-with-rcpp.html#cb553-1" tabindex="-1"></a>sign_R <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb553-2"><a href="using-c-in-r-with-rcpp.html#cb553-2" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb553-3"><a href="using-c-in-r-with-rcpp.html#cb553-3" tabindex="-1"></a>    <span class="dv">1</span></span>
<span id="cb553-4"><a href="using-c-in-r-with-rcpp.html#cb553-4" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (x <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb553-5"><a href="using-c-in-r-with-rcpp.html#cb553-5" tabindex="-1"></a>    <span class="dv">0</span></span>
<span id="cb553-6"><a href="using-c-in-r-with-rcpp.html#cb553-6" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb553-7"><a href="using-c-in-r-with-rcpp.html#cb553-7" tabindex="-1"></a>    <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb553-8"><a href="using-c-in-r-with-rcpp.html#cb553-8" tabindex="-1"></a>  }</span>
<span id="cb553-9"><a href="using-c-in-r-with-rcpp.html#cb553-9" tabindex="-1"></a>}</span>
<span id="cb553-10"><a href="using-c-in-r-with-rcpp.html#cb553-10" tabindex="-1"></a></span>
<span id="cb553-11"><a href="using-c-in-r-with-rcpp.html#cb553-11" tabindex="-1"></a><span class="fu">cppFunction</span>(</span>
<span id="cb553-12"><a href="using-c-in-r-with-rcpp.html#cb553-12" tabindex="-1"></a><span class="st">&#39;int sign_C(int x) {</span></span>
<span id="cb553-13"><a href="using-c-in-r-with-rcpp.html#cb553-13" tabindex="-1"></a><span class="st">  if (x &gt; 0) {</span></span>
<span id="cb553-14"><a href="using-c-in-r-with-rcpp.html#cb553-14" tabindex="-1"></a><span class="st">    return 1;</span></span>
<span id="cb553-15"><a href="using-c-in-r-with-rcpp.html#cb553-15" tabindex="-1"></a><span class="st">  } else if (x == 0) {</span></span>
<span id="cb553-16"><a href="using-c-in-r-with-rcpp.html#cb553-16" tabindex="-1"></a><span class="st">    return 0;</span></span>
<span id="cb553-17"><a href="using-c-in-r-with-rcpp.html#cb553-17" tabindex="-1"></a><span class="st">  } else {</span></span>
<span id="cb553-18"><a href="using-c-in-r-with-rcpp.html#cb553-18" tabindex="-1"></a><span class="st">    return -1;</span></span>
<span id="cb553-19"><a href="using-c-in-r-with-rcpp.html#cb553-19" tabindex="-1"></a><span class="st">  }</span></span>
<span id="cb553-20"><a href="using-c-in-r-with-rcpp.html#cb553-20" tabindex="-1"></a><span class="st">}&#39;</span></span>
<span id="cb553-21"><a href="using-c-in-r-with-rcpp.html#cb553-21" tabindex="-1"></a>)</span></code></pre></div>
<ul>
<li><code>if</code> syntax is identical</li>
</ul>
</div>
<div id="vector-input-scalar-ouptut" class="section level2 hasAnchor" number="21.3">
<h2><span class="header-section-number">21.3</span> Vector Input, Scalar Ouptut<a href="using-c-in-r-with-rcpp.html#vector-input-scalar-ouptut" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="using-c-in-r-with-rcpp.html#cb554-1" tabindex="-1"></a>sum_R <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb554-2"><a href="using-c-in-r-with-rcpp.html#cb554-2" tabindex="-1"></a>  total <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb554-3"><a href="using-c-in-r-with-rcpp.html#cb554-3" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">length</span>(x)</span>
<span id="cb554-4"><a href="using-c-in-r-with-rcpp.html#cb554-4" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n) {</span>
<span id="cb554-5"><a href="using-c-in-r-with-rcpp.html#cb554-5" tabindex="-1"></a>    total <span class="ot">&lt;-</span> total <span class="sc">+</span> x[i]</span>
<span id="cb554-6"><a href="using-c-in-r-with-rcpp.html#cb554-6" tabindex="-1"></a>  }</span>
<span id="cb554-7"><a href="using-c-in-r-with-rcpp.html#cb554-7" tabindex="-1"></a>  total</span>
<span id="cb554-8"><a href="using-c-in-r-with-rcpp.html#cb554-8" tabindex="-1"></a>}</span>
<span id="cb554-9"><a href="using-c-in-r-with-rcpp.html#cb554-9" tabindex="-1"></a></span>
<span id="cb554-10"><a href="using-c-in-r-with-rcpp.html#cb554-10" tabindex="-1"></a><span class="fu">cppFunction</span>(</span>
<span id="cb554-11"><a href="using-c-in-r-with-rcpp.html#cb554-11" tabindex="-1"></a><span class="st">&#39;double sum_C(NumericVector x) {</span></span>
<span id="cb554-12"><a href="using-c-in-r-with-rcpp.html#cb554-12" tabindex="-1"></a><span class="st">  int n = x.size();</span></span>
<span id="cb554-13"><a href="using-c-in-r-with-rcpp.html#cb554-13" tabindex="-1"></a><span class="st">  double total = 0;</span></span>
<span id="cb554-14"><a href="using-c-in-r-with-rcpp.html#cb554-14" tabindex="-1"></a><span class="st">  for (int i = 0; i &lt; n; ++i) {</span></span>
<span id="cb554-15"><a href="using-c-in-r-with-rcpp.html#cb554-15" tabindex="-1"></a><span class="st">    total = total + x[i];</span></span>
<span id="cb554-16"><a href="using-c-in-r-with-rcpp.html#cb554-16" tabindex="-1"></a><span class="st">  }</span></span>
<span id="cb554-17"><a href="using-c-in-r-with-rcpp.html#cb554-17" tabindex="-1"></a><span class="st">  return total;</span></span>
<span id="cb554-18"><a href="using-c-in-r-with-rcpp.html#cb554-18" tabindex="-1"></a><span class="st">}&#39;</span></span>
<span id="cb554-19"><a href="using-c-in-r-with-rcpp.html#cb554-19" tabindex="-1"></a>)</span></code></pre></div>
<ul>
<li><p>Need to declare the type of each variable (<code>n</code>, <code>total</code>, <code>i</code>)</p></li>
<li><p><code>for</code> loop syntax is different.</p></li>
<li><p>In C++, need to use <code>=</code>, not <code>&lt;-</code></p></li>
<li><p>Can also use <code>total += x[i]</code></p></li>
<li><p>To find the length of a vector in C++, use <code>.size()</code></p></li>
<li><p>IMPORTANT: in C++, vector indices start at <span class="math inline">\(0\)</span>. If your vector has <span class="math inline">\(n\)</span> elements, the last position is at <span class="math inline">\(n-1\)</span>.</p></li>
</ul>
<p>Comparing performance using <code>mark()</code> from the package <code>bench</code></p>
<div class="sourceCode" id="cb555"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb555-1"><a href="using-c-in-r-with-rcpp.html#cb555-1" tabindex="-1"></a><span class="fu">library</span>(bench)</span>
<span id="cb555-2"><a href="using-c-in-r-with-rcpp.html#cb555-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1000</span>)</span>
<span id="cb555-3"><a href="using-c-in-r-with-rcpp.html#cb555-3" tabindex="-1"></a><span class="fu">mark</span>(</span>
<span id="cb555-4"><a href="using-c-in-r-with-rcpp.html#cb555-4" tabindex="-1"></a>  <span class="fu">sum</span>(x),</span>
<span id="cb555-5"><a href="using-c-in-r-with-rcpp.html#cb555-5" tabindex="-1"></a>  <span class="fu">sum_R</span>(x),</span>
<span id="cb555-6"><a href="using-c-in-r-with-rcpp.html#cb555-6" tabindex="-1"></a>  <span class="fu">sum_C</span>(x)</span>
<span id="cb555-7"><a href="using-c-in-r-with-rcpp.html#cb555-7" tabindex="-1"></a>)</span>
<span id="cb555-8"><a href="using-c-in-r-with-rcpp.html#cb555-8" tabindex="-1"></a><span class="do">## # A tibble: 3 Ã— 6</span></span>
<span id="cb555-9"><a href="using-c-in-r-with-rcpp.html#cb555-9" tabindex="-1"></a><span class="do">##   expression      min   median `itr/sec` mem_alloc `gc/sec`</span></span>
<span id="cb555-10"><a href="using-c-in-r-with-rcpp.html#cb555-10" tabindex="-1"></a><span class="do">##   &lt;bch:expr&gt; &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;</span></span>
<span id="cb555-11"><a href="using-c-in-r-with-rcpp.html#cb555-11" tabindex="-1"></a><span class="do">## 1 sum(x)        600ns    700ns  1373136.        0B        0</span></span>
<span id="cb555-12"><a href="using-c-in-r-with-rcpp.html#cb555-12" tabindex="-1"></a><span class="do">## 2 sum_R(x)     13.3Âµs   16.6Âµs    57293.   23.24KB        0</span></span>
<span id="cb555-13"><a href="using-c-in-r-with-rcpp.html#cb555-13" tabindex="-1"></a><span class="do">## 3 sum_C(x)      800ns      1Âµs   669550.    2.49KB        0</span></span></code></pre></div>
<p>You can see <code>sum_R</code> is much slower than the built-in <code>sum</code> (which is highly optimized).</p>
<p><code>sum_C</code> is much faster than <code>sum_R</code></p>
</div>
<div id="vector-input-vector-output" class="section level2 hasAnchor" number="21.4">
<h2><span class="header-section-number">21.4</span> Vector Input, Vector Output<a href="using-c-in-r-with-rcpp.html#vector-input-vector-output" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Consider a function that computes
<span class="math display">\[\begin{equation*}
\sqrt{(y_i - x)^2}, \quad i=1,\ldots,n.
\end{equation*}\]</span></p>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="using-c-in-r-with-rcpp.html#cb556-1" tabindex="-1"></a><span class="co"># vectorized R function</span></span>
<span id="cb556-2"><a href="using-c-in-r-with-rcpp.html#cb556-2" tabindex="-1"></a>pdist_R <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb556-3"><a href="using-c-in-r-with-rcpp.html#cb556-3" tabindex="-1"></a>  <span class="fu">sqrt</span>((y <span class="sc">-</span> x) <span class="sc">^</span> <span class="dv">2</span>)</span>
<span id="cb556-4"><a href="using-c-in-r-with-rcpp.html#cb556-4" tabindex="-1"></a>}</span>
<span id="cb556-5"><a href="using-c-in-r-with-rcpp.html#cb556-5" tabindex="-1"></a></span>
<span id="cb556-6"><a href="using-c-in-r-with-rcpp.html#cb556-6" tabindex="-1"></a><span class="co"># R function with for loop</span></span>
<span id="cb556-7"><a href="using-c-in-r-with-rcpp.html#cb556-7" tabindex="-1"></a>pdist_R_for <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb556-8"><a href="using-c-in-r-with-rcpp.html#cb556-8" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">length</span>(y)</span>
<span id="cb556-9"><a href="using-c-in-r-with-rcpp.html#cb556-9" tabindex="-1"></a>  out <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>, n)</span>
<span id="cb556-10"><a href="using-c-in-r-with-rcpp.html#cb556-10" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n) {</span>
<span id="cb556-11"><a href="using-c-in-r-with-rcpp.html#cb556-11" tabindex="-1"></a>    out[i] <span class="ot">=</span> <span class="fu">sqrt</span>((y[i] <span class="sc">-</span> x)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb556-12"><a href="using-c-in-r-with-rcpp.html#cb556-12" tabindex="-1"></a>  }</span>
<span id="cb556-13"><a href="using-c-in-r-with-rcpp.html#cb556-13" tabindex="-1"></a>  out</span>
<span id="cb556-14"><a href="using-c-in-r-with-rcpp.html#cb556-14" tabindex="-1"></a>}</span>
<span id="cb556-15"><a href="using-c-in-r-with-rcpp.html#cb556-15" tabindex="-1"></a></span>
<span id="cb556-16"><a href="using-c-in-r-with-rcpp.html#cb556-16" tabindex="-1"></a><span class="fu">cppFunction</span>(</span>
<span id="cb556-17"><a href="using-c-in-r-with-rcpp.html#cb556-17" tabindex="-1"></a><span class="st">&#39;NumericVector pdist_C(double x, NumericVector y) {</span></span>
<span id="cb556-18"><a href="using-c-in-r-with-rcpp.html#cb556-18" tabindex="-1"></a><span class="st">  int n = y.size();</span></span>
<span id="cb556-19"><a href="using-c-in-r-with-rcpp.html#cb556-19" tabindex="-1"></a><span class="st">  NumericVector out(n);</span></span>
<span id="cb556-20"><a href="using-c-in-r-with-rcpp.html#cb556-20" tabindex="-1"></a></span>
<span id="cb556-21"><a href="using-c-in-r-with-rcpp.html#cb556-21" tabindex="-1"></a><span class="st">  for(int i = 0; i &lt; n; ++i) {</span></span>
<span id="cb556-22"><a href="using-c-in-r-with-rcpp.html#cb556-22" tabindex="-1"></a><span class="st">    out[i] = sqrt(pow(y[i] - x, 2.0));</span></span>
<span id="cb556-23"><a href="using-c-in-r-with-rcpp.html#cb556-23" tabindex="-1"></a><span class="st">  }</span></span>
<span id="cb556-24"><a href="using-c-in-r-with-rcpp.html#cb556-24" tabindex="-1"></a><span class="st">  return out;</span></span>
<span id="cb556-25"><a href="using-c-in-r-with-rcpp.html#cb556-25" tabindex="-1"></a><span class="st">}&#39;</span></span>
<span id="cb556-26"><a href="using-c-in-r-with-rcpp.html#cb556-26" tabindex="-1"></a>)</span></code></pre></div>
<ul>
<li><p>To create a numeric vector called <code>out</code> with length <span class="math inline">\(n\)</span>, use <code>NumericVector out(n)</code></p></li>
<li><p>C++ uses <code>pow()</code>, not <code>^</code>, for exponentiation</p></li>
</ul>
<p>Compare the performance:</p>
<div class="sourceCode" id="cb557"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb557-1"><a href="using-c-in-r-with-rcpp.html#cb557-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="fl">1e6</span>)</span>
<span id="cb557-2"><a href="using-c-in-r-with-rcpp.html#cb557-2" tabindex="-1"></a><span class="fu">mark</span>(</span>
<span id="cb557-3"><a href="using-c-in-r-with-rcpp.html#cb557-3" tabindex="-1"></a>  <span class="fu">pdist_R</span>(<span class="fl">0.5</span>, y),</span>
<span id="cb557-4"><a href="using-c-in-r-with-rcpp.html#cb557-4" tabindex="-1"></a>  <span class="fu">pdist_R_for</span>(<span class="fl">0.5</span>, y),</span>
<span id="cb557-5"><a href="using-c-in-r-with-rcpp.html#cb557-5" tabindex="-1"></a>  <span class="fu">pdist_C</span>(<span class="fl">0.5</span>, y)</span>
<span id="cb557-6"><a href="using-c-in-r-with-rcpp.html#cb557-6" tabindex="-1"></a>)</span>
<span id="cb557-7"><a href="using-c-in-r-with-rcpp.html#cb557-7" tabindex="-1"></a><span class="do">## # A tibble: 3 Ã— 6</span></span>
<span id="cb557-8"><a href="using-c-in-r-with-rcpp.html#cb557-8" tabindex="-1"></a><span class="do">##   expression               min   median `itr/sec` mem_alloc `gc/sec`</span></span>
<span id="cb557-9"><a href="using-c-in-r-with-rcpp.html#cb557-9" tabindex="-1"></a><span class="do">##   &lt;bch:expr&gt;          &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;</span></span>
<span id="cb557-10"><a href="using-c-in-r-with-rcpp.html#cb557-10" tabindex="-1"></a><span class="do">## 1 pdist_R(0.5, y)        3.9ms   4.38ms     224.     7.63MB     9.34</span></span>
<span id="cb557-11"><a href="using-c-in-r-with-rcpp.html#cb557-11" tabindex="-1"></a><span class="do">## 2 pdist_R_for(0.5, y)  43.15ms  45.24ms      21.9    7.67MB     0   </span></span>
<span id="cb557-12"><a href="using-c-in-r-with-rcpp.html#cb557-12" tabindex="-1"></a><span class="do">## 3 pdist_C(0.5, y)       2.43ms   2.59ms     361.     7.63MB    14.6</span></span></code></pre></div>
<p>The C++ version is faster than the vectorized R function in this case.</p>
<p>In general, I recommend if you can use a vectorized R function, you do not have to write the C++ version (at least not the first part to be considered when you are optimizing your code).</p>
</div>
<div id="returning-a-list" class="section level2 hasAnchor" number="21.5">
<h2><span class="header-section-number">21.5</span> Returning a list<a href="using-c-in-r-with-rcpp.html#returning-a-list" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Return a list with two elements with names <code>sum</code> and <code>diff</code>:</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="using-c-in-r-with-rcpp.html#cb558-1" tabindex="-1"></a><span class="fu">cppFunction</span>(<span class="st">&#39;</span></span>
<span id="cb558-2"><a href="using-c-in-r-with-rcpp.html#cb558-2" tabindex="-1"></a><span class="st">List sum_diff_C(double x, double y) {</span></span>
<span id="cb558-3"><a href="using-c-in-r-with-rcpp.html#cb558-3" tabindex="-1"></a><span class="st">  return List::create(Named(&quot;sum&quot;) = x + y, Named(&quot;diff&quot;) = x - y);</span></span>
<span id="cb558-4"><a href="using-c-in-r-with-rcpp.html#cb558-4" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb558-5"><a href="using-c-in-r-with-rcpp.html#cb558-5" tabindex="-1"></a><span class="st">&#39;</span>)</span>
<span id="cb558-6"><a href="using-c-in-r-with-rcpp.html#cb558-6" tabindex="-1"></a></span>
<span id="cb558-7"><a href="using-c-in-r-with-rcpp.html#cb558-7" tabindex="-1"></a><span class="fu">sum_diff_C</span>(<span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb558-8"><a href="using-c-in-r-with-rcpp.html#cb558-8" tabindex="-1"></a><span class="do">## $sum</span></span>
<span id="cb558-9"><a href="using-c-in-r-with-rcpp.html#cb558-9" tabindex="-1"></a><span class="do">## [1] 5</span></span>
<span id="cb558-10"><a href="using-c-in-r-with-rcpp.html#cb558-10" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb558-11"><a href="using-c-in-r-with-rcpp.html#cb558-11" tabindex="-1"></a><span class="do">## $diff</span></span>
<span id="cb558-12"><a href="using-c-in-r-with-rcpp.html#cb558-12" tabindex="-1"></a><span class="do">## [1] -1</span></span></code></pre></div>
</div>
<div id="using-sourcecpp" class="section level2 hasAnchor" number="21.6">
<h2><span class="header-section-number">21.6</span> Using <code>sourceCpp</code><a href="using-c-in-r-with-rcpp.html#using-sourcecpp" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We have illustrated how to write simple C++ functions with <code>cppFunction()</code>. For real problems, we have to break down our program in various pieces and we should use stand-alone C++ files.</p>
<p>For example, create a file called <code>my_Rcpp.cpp</code> that contains the following code:</p>
<div class="sourceCode" id="cb559"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb559-1"><a href="using-c-in-r-with-rcpp.html#cb559-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;Rcpp.h&gt;</span></span>
<span id="cb559-2"><a href="using-c-in-r-with-rcpp.html#cb559-2" tabindex="-1"></a><span class="kw">using</span> <span class="kw">namespace</span> Rcpp<span class="op">;</span></span>
<span id="cb559-3"><a href="using-c-in-r-with-rcpp.html#cb559-3" tabindex="-1"></a></span>
<span id="cb559-4"><a href="using-c-in-r-with-rcpp.html#cb559-4" tabindex="-1"></a><span class="co">// [[Rcpp::export]]</span></span>
<span id="cb559-5"><a href="using-c-in-r-with-rcpp.html#cb559-5" tabindex="-1"></a><span class="dt">double</span> mean_C<span class="op">(</span>NumericVector x<span class="op">)</span> <span class="op">{</span></span>
<span id="cb559-6"><a href="using-c-in-r-with-rcpp.html#cb559-6" tabindex="-1"></a>  <span class="dt">int</span> n <span class="op">=</span> x<span class="op">.</span>size<span class="op">();</span></span>
<span id="cb559-7"><a href="using-c-in-r-with-rcpp.html#cb559-7" tabindex="-1"></a>  <span class="dt">double</span> total <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb559-8"><a href="using-c-in-r-with-rcpp.html#cb559-8" tabindex="-1"></a></span>
<span id="cb559-9"><a href="using-c-in-r-with-rcpp.html#cb559-9" tabindex="-1"></a>  <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb559-10"><a href="using-c-in-r-with-rcpp.html#cb559-10" tabindex="-1"></a>    total <span class="op">=</span> total <span class="op">+</span> x<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb559-11"><a href="using-c-in-r-with-rcpp.html#cb559-11" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb559-12"><a href="using-c-in-r-with-rcpp.html#cb559-12" tabindex="-1"></a>  <span class="cf">return</span> total <span class="op">/</span> n<span class="op">;</span></span>
<span id="cb559-13"><a href="using-c-in-r-with-rcpp.html#cb559-13" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>In R, use <code>sourceCpp()</code> to compile your <code>my_Rcpp.cpp</code> file.</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="using-c-in-r-with-rcpp.html#cb560-1" tabindex="-1"></a><span class="fu">sourceCpp</span>(<span class="st">&quot;my_Rcpp.cpp&quot;</span>)</span></code></pre></div>
<p>Compare the performance:</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="using-c-in-r-with-rcpp.html#cb561-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="fl">1e5</span>)</span>
<span id="cb561-2"><a href="using-c-in-r-with-rcpp.html#cb561-2" tabindex="-1"></a><span class="fu">mark</span>(</span>
<span id="cb561-3"><a href="using-c-in-r-with-rcpp.html#cb561-3" tabindex="-1"></a>  <span class="fu">mean</span>(x),</span>
<span id="cb561-4"><a href="using-c-in-r-with-rcpp.html#cb561-4" tabindex="-1"></a>  <span class="fu">mean_C</span>(x)</span>
<span id="cb561-5"><a href="using-c-in-r-with-rcpp.html#cb561-5" tabindex="-1"></a>)</span>
<span id="cb561-6"><a href="using-c-in-r-with-rcpp.html#cb561-6" tabindex="-1"></a><span class="do">## # A tibble: 2 Ã— 6</span></span>
<span id="cb561-7"><a href="using-c-in-r-with-rcpp.html#cb561-7" tabindex="-1"></a><span class="do">##   expression      min   median `itr/sec` mem_alloc `gc/sec`</span></span>
<span id="cb561-8"><a href="using-c-in-r-with-rcpp.html#cb561-8" tabindex="-1"></a><span class="do">##   &lt;bch:expr&gt; &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;</span></span>
<span id="cb561-9"><a href="using-c-in-r-with-rcpp.html#cb561-9" tabindex="-1"></a><span class="do">## 1 mean(x)     123.6Âµs  130.8Âµs     7312.        0B        0</span></span>
<span id="cb561-10"><a href="using-c-in-r-with-rcpp.html#cb561-10" tabindex="-1"></a><span class="do">## 2 mean_C(x)    40.6Âµs   42.6Âµs    22568.    2.49KB        0</span></span></code></pre></div>
</div>
<div id="example-gibbs-sampler" class="section level2 hasAnchor" number="21.7">
<h2><span class="header-section-number">21.7</span> Example: Gibbs Sampler<a href="using-c-in-r-with-rcpp.html#example-gibbs-sampler" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R code:</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="using-c-in-r-with-rcpp.html#cb562-1" tabindex="-1"></a>gibbs_R <span class="ot">&lt;-</span> <span class="cf">function</span>(N, thin) {</span>
<span id="cb562-2"><a href="using-c-in-r-with-rcpp.html#cb562-2" tabindex="-1"></a>  mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">nrow =</span> N, <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb562-3"><a href="using-c-in-r-with-rcpp.html#cb562-3" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb562-4"><a href="using-c-in-r-with-rcpp.html#cb562-4" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb562-5"><a href="using-c-in-r-with-rcpp.html#cb562-5" tabindex="-1"></a></span>
<span id="cb562-6"><a href="using-c-in-r-with-rcpp.html#cb562-6" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>N) {</span>
<span id="cb562-7"><a href="using-c-in-r-with-rcpp.html#cb562-7" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>thin) {</span>
<span id="cb562-8"><a href="using-c-in-r-with-rcpp.html#cb562-8" tabindex="-1"></a>      x <span class="ot">&lt;-</span> <span class="fu">rgamma</span>(<span class="dv">1</span>, <span class="dv">3</span>, y <span class="sc">*</span> y <span class="sc">+</span> <span class="dv">4</span>)</span>
<span id="cb562-9"><a href="using-c-in-r-with-rcpp.html#cb562-9" tabindex="-1"></a>      y <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1</span>, <span class="dv">1</span> <span class="sc">/</span> (x <span class="sc">+</span> <span class="dv">1</span>), <span class="dv">1</span> <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="dv">2</span> <span class="sc">*</span> (x <span class="sc">+</span> <span class="dv">1</span>)))</span>
<span id="cb562-10"><a href="using-c-in-r-with-rcpp.html#cb562-10" tabindex="-1"></a>    }</span>
<span id="cb562-11"><a href="using-c-in-r-with-rcpp.html#cb562-11" tabindex="-1"></a>    mat[i, ] <span class="ot">&lt;-</span> <span class="fu">c</span>(x, y)</span>
<span id="cb562-12"><a href="using-c-in-r-with-rcpp.html#cb562-12" tabindex="-1"></a>  }</span>
<span id="cb562-13"><a href="using-c-in-r-with-rcpp.html#cb562-13" tabindex="-1"></a>  mat</span>
<span id="cb562-14"><a href="using-c-in-r-with-rcpp.html#cb562-14" tabindex="-1"></a>}</span></code></pre></div>
<p>C++:</p>
<div class="sourceCode" id="cb563"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb563-1"><a href="using-c-in-r-with-rcpp.html#cb563-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;Rcpp.h&gt;</span></span>
<span id="cb563-2"><a href="using-c-in-r-with-rcpp.html#cb563-2" tabindex="-1"></a><span class="kw">using</span> <span class="kw">namespace</span> Rcpp<span class="op">;</span></span>
<span id="cb563-3"><a href="using-c-in-r-with-rcpp.html#cb563-3" tabindex="-1"></a></span>
<span id="cb563-4"><a href="using-c-in-r-with-rcpp.html#cb563-4" tabindex="-1"></a><span class="co">// [[Rcpp::export]]</span></span>
<span id="cb563-5"><a href="using-c-in-r-with-rcpp.html#cb563-5" tabindex="-1"></a>NumericMatrix gibbs_C<span class="op">(</span><span class="dt">int</span> N<span class="op">,</span> <span class="dt">int</span> thin<span class="op">)</span> <span class="op">{</span></span>
<span id="cb563-6"><a href="using-c-in-r-with-rcpp.html#cb563-6" tabindex="-1"></a>  NumericMatrix mat<span class="op">(</span>N<span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb563-7"><a href="using-c-in-r-with-rcpp.html#cb563-7" tabindex="-1"></a>  <span class="dt">double</span> x <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb563-8"><a href="using-c-in-r-with-rcpp.html#cb563-8" tabindex="-1"></a>  <span class="dt">double</span> y <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb563-9"><a href="using-c-in-r-with-rcpp.html#cb563-9" tabindex="-1"></a></span>
<span id="cb563-10"><a href="using-c-in-r-with-rcpp.html#cb563-10" tabindex="-1"></a>  <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> N<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb563-11"><a href="using-c-in-r-with-rcpp.html#cb563-11" tabindex="-1"></a>    <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> thin<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb563-12"><a href="using-c-in-r-with-rcpp.html#cb563-12" tabindex="-1"></a>      x <span class="op">=</span> rgamma<span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">1</span> <span class="op">/</span> <span class="op">(</span>y <span class="op">*</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">))[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb563-13"><a href="using-c-in-r-with-rcpp.html#cb563-13" tabindex="-1"></a>      y <span class="op">=</span> rnorm<span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">1</span> <span class="op">/</span> <span class="op">(</span>x <span class="op">+</span> <span class="dv">1</span><span class="op">),</span> <span class="dv">1</span> <span class="op">/</span> sqrt<span class="op">(</span><span class="dv">2</span> <span class="op">*</span> <span class="op">(</span>x <span class="op">+</span> <span class="dv">1</span><span class="op">)))[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb563-14"><a href="using-c-in-r-with-rcpp.html#cb563-14" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb563-15"><a href="using-c-in-r-with-rcpp.html#cb563-15" tabindex="-1"></a>    mat<span class="op">(</span>i<span class="op">,</span> <span class="dv">0</span><span class="op">)</span> <span class="op">=</span> x<span class="op">;</span></span>
<span id="cb563-16"><a href="using-c-in-r-with-rcpp.html#cb563-16" tabindex="-1"></a>    mat<span class="op">(</span>i<span class="op">,</span> <span class="dv">1</span><span class="op">)</span> <span class="op">=</span> y<span class="op">;</span></span>
<span id="cb563-17"><a href="using-c-in-r-with-rcpp.html#cb563-17" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb563-18"><a href="using-c-in-r-with-rcpp.html#cb563-18" tabindex="-1"></a>  <span class="cf">return</span><span class="op">(</span>mat<span class="op">);</span></span>
<span id="cb563-19"><a href="using-c-in-r-with-rcpp.html#cb563-19" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<ul>
<li><p>Use <code>(</code> instead of <code>[</code> to index into the matrix</p></li>
<li><p><code>[0]</code> is to convert the vector output into scalar</p></li>
</ul>
<p>C++ version is about 20 times faster:</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="using-c-in-r-with-rcpp.html#cb564-1" tabindex="-1"></a><span class="fu">mark</span>(</span>
<span id="cb564-2"><a href="using-c-in-r-with-rcpp.html#cb564-2" tabindex="-1"></a>  <span class="fu">gibbs_R</span>(<span class="dv">100</span>, <span class="dv">10</span>),</span>
<span id="cb564-3"><a href="using-c-in-r-with-rcpp.html#cb564-3" tabindex="-1"></a>  <span class="fu">gibbs_C</span>(<span class="dv">100</span>, <span class="dv">10</span>),</span>
<span id="cb564-4"><a href="using-c-in-r-with-rcpp.html#cb564-4" tabindex="-1"></a>  <span class="at">check =</span> <span class="cn">FALSE</span></span>
<span id="cb564-5"><a href="using-c-in-r-with-rcpp.html#cb564-5" tabindex="-1"></a>)</span>
<span id="cb564-6"><a href="using-c-in-r-with-rcpp.html#cb564-6" tabindex="-1"></a><span class="do">## # A tibble: 2 Ã— 6</span></span>
<span id="cb564-7"><a href="using-c-in-r-with-rcpp.html#cb564-7" tabindex="-1"></a><span class="do">##   expression            min   median `itr/sec` mem_alloc `gc/sec`</span></span>
<span id="cb564-8"><a href="using-c-in-r-with-rcpp.html#cb564-8" tabindex="-1"></a><span class="do">##   &lt;bch:expr&gt;       &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;</span></span>
<span id="cb564-9"><a href="using-c-in-r-with-rcpp.html#cb564-9" tabindex="-1"></a><span class="do">## 1 gibbs_R(100, 10)   1.81ms   2.19ms      421.    4.94MB     9.57</span></span>
<span id="cb564-10"><a href="using-c-in-r-with-rcpp.html#cb564-10" tabindex="-1"></a><span class="do">## 2 gibbs_C(100, 10)  153.9Âµs  191.3Âµs     4922.     4.1KB     6.36</span></span></code></pre></div>
</div>
<div id="more-details" class="section level2 hasAnchor" number="21.8">
<h2><span class="header-section-number">21.8</span> More Details<a href="using-c-in-r-with-rcpp.html#more-details" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Comment in C++ is <code>//</code>.</li>
</ul>
<p><strong>Vector</strong></p>
<p>Access an individual element of a vector using <code>[]</code> or <code>()</code>.</p>
<table>
<thead>
<tr class="header">
<th>R</th>
<th>Rcpp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x &lt;- rep(0, 5)</code></td>
<td><code>NumericVector x(5);</code></td>
</tr>
<tr class="even">
<td><code>x &lt;- rep(1, 5)</code></td>
<td><code>NumericVector x(5, 1);</code></td>
</tr>
<tr class="odd">
<td><code>x &lt;- c(1, 2, 3)</code></td>
<td><code>NumericVector x = {1, 2, 3};</code></td>
</tr>
<tr class="even">
<td><code>x[2]</code></td>
<td><code>x[1]</code> or <code>x(1)</code></td>
</tr>
</tbody>
</table>
<p>Elementwise arithmetic operations are possible for <code>NumericVector</code></p>
<p>For example:</p>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb565-1"><a href="using-c-in-r-with-rcpp.html#cb565-1" tabindex="-1"></a><span class="fu">cppFunction</span>(<span class="st">&#39;</span></span>
<span id="cb565-2"><a href="using-c-in-r-with-rcpp.html#cb565-2" tabindex="-1"></a><span class="st">NumericVector vector_sum(NumericVector x, NumericVector y) {</span></span>
<span id="cb565-3"><a href="using-c-in-r-with-rcpp.html#cb565-3" tabindex="-1"></a><span class="st">  NumericVector sum = x + y;</span></span>
<span id="cb565-4"><a href="using-c-in-r-with-rcpp.html#cb565-4" tabindex="-1"></a><span class="st">  return sum;</span></span>
<span id="cb565-5"><a href="using-c-in-r-with-rcpp.html#cb565-5" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb565-6"><a href="using-c-in-r-with-rcpp.html#cb565-6" tabindex="-1"></a><span class="st">&#39;</span>)</span>
<span id="cb565-7"><a href="using-c-in-r-with-rcpp.html#cb565-7" tabindex="-1"></a></span>
<span id="cb565-8"><a href="using-c-in-r-with-rcpp.html#cb565-8" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb565-9"><a href="using-c-in-r-with-rcpp.html#cb565-9" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb565-10"><a href="using-c-in-r-with-rcpp.html#cb565-10" tabindex="-1"></a><span class="fu">vector_sum</span>(x, y)</span>
<span id="cb565-11"><a href="using-c-in-r-with-rcpp.html#cb565-11" tabindex="-1"></a><span class="do">## [1]  3  5  7  9 11</span></span></code></pre></div>
<p>For comparison operators, we need to use logical vectors with <code>LogicalVector</code>.</p>
<p>For example:</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="using-c-in-r-with-rcpp.html#cb566-1" tabindex="-1"></a><span class="fu">cppFunction</span>(<span class="st">&#39;</span></span>
<span id="cb566-2"><a href="using-c-in-r-with-rcpp.html#cb566-2" tabindex="-1"></a><span class="st">LogicalVector vector_greater(NumericVector x, NumericVector y) {</span></span>
<span id="cb566-3"><a href="using-c-in-r-with-rcpp.html#cb566-3" tabindex="-1"></a><span class="st">  LogicalVector comp = x &gt; y;</span></span>
<span id="cb566-4"><a href="using-c-in-r-with-rcpp.html#cb566-4" tabindex="-1"></a><span class="st">  return comp;</span></span>
<span id="cb566-5"><a href="using-c-in-r-with-rcpp.html#cb566-5" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb566-6"><a href="using-c-in-r-with-rcpp.html#cb566-6" tabindex="-1"></a><span class="st">&#39;</span>)</span>
<span id="cb566-7"><a href="using-c-in-r-with-rcpp.html#cb566-7" tabindex="-1"></a></span>
<span id="cb566-8"><a href="using-c-in-r-with-rcpp.html#cb566-8" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb566-9"><a href="using-c-in-r-with-rcpp.html#cb566-9" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb566-10"><a href="using-c-in-r-with-rcpp.html#cb566-10" tabindex="-1"></a><span class="fu">vector_greater</span>(x, y)</span>
<span id="cb566-11"><a href="using-c-in-r-with-rcpp.html#cb566-11" tabindex="-1"></a><span class="do">## [1] FALSE FALSE FALSE FALSE FALSE</span></span></code></pre></div>
<p>Other comparison operators: <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;=</code></p>
<p><strong>Matrix</strong></p>
<table>
<thead>
<tr class="header">
<th>R</th>
<th>Rcpp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>A &lt;- matrix(0, nrow = 2, ncol = 3)</code></td>
<td><code>NumericMatrix A(2, 3);</code></td>
</tr>
<tr class="even">
<td><code>x &lt;- A[1, 2]</code></td>
<td><code>double x = A(0, 1);</code></td>
</tr>
<tr class="odd">
<td><code>x &lt;- A[, 2]</code></td>
<td><code>NumericVector x = A(_, 1);</code></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="using-c-in-r-with-rcpp.html#cb567-1" tabindex="-1"></a><span class="fu">cppFunction</span>(<span class="st">&#39;</span></span>
<span id="cb567-2"><a href="using-c-in-r-with-rcpp.html#cb567-2" tabindex="-1"></a><span class="st">List matrix_operation(NumericMatrix A) {</span></span>
<span id="cb567-3"><a href="using-c-in-r-with-rcpp.html#cb567-3" tabindex="-1"></a><span class="st">  return List::create(Named(&quot;A&quot;) = A, </span></span>
<span id="cb567-4"><a href="using-c-in-r-with-rcpp.html#cb567-4" tabindex="-1"></a><span class="st">  Named(&quot;row_number&quot;) = A.nrow(),</span></span>
<span id="cb567-5"><a href="using-c-in-r-with-rcpp.html#cb567-5" tabindex="-1"></a><span class="st">  Named(&quot;col_number&quot;) = A.ncol(),</span></span>
<span id="cb567-6"><a href="using-c-in-r-with-rcpp.html#cb567-6" tabindex="-1"></a><span class="st">  Named(&quot;transpose&quot;) = transpose(A));</span></span>
<span id="cb567-7"><a href="using-c-in-r-with-rcpp.html#cb567-7" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb567-8"><a href="using-c-in-r-with-rcpp.html#cb567-8" tabindex="-1"></a><span class="st">&#39;</span>)</span>
<span id="cb567-9"><a href="using-c-in-r-with-rcpp.html#cb567-9" tabindex="-1"></a></span>
<span id="cb567-10"><a href="using-c-in-r-with-rcpp.html#cb567-10" tabindex="-1"></a></span>
<span id="cb567-11"><a href="using-c-in-r-with-rcpp.html#cb567-11" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb567-12"><a href="using-c-in-r-with-rcpp.html#cb567-12" tabindex="-1"></a><span class="fu">matrix_operation</span>(A)</span>
<span id="cb567-13"><a href="using-c-in-r-with-rcpp.html#cb567-13" tabindex="-1"></a><span class="do">## $A</span></span>
<span id="cb567-14"><a href="using-c-in-r-with-rcpp.html#cb567-14" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3] [,4]</span></span>
<span id="cb567-15"><a href="using-c-in-r-with-rcpp.html#cb567-15" tabindex="-1"></a><span class="do">## [1,]    1    4    7   10</span></span>
<span id="cb567-16"><a href="using-c-in-r-with-rcpp.html#cb567-16" tabindex="-1"></a><span class="do">## [2,]    2    5    8   11</span></span>
<span id="cb567-17"><a href="using-c-in-r-with-rcpp.html#cb567-17" tabindex="-1"></a><span class="do">## [3,]    3    6    9   12</span></span>
<span id="cb567-18"><a href="using-c-in-r-with-rcpp.html#cb567-18" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb567-19"><a href="using-c-in-r-with-rcpp.html#cb567-19" tabindex="-1"></a><span class="do">## $row_number</span></span>
<span id="cb567-20"><a href="using-c-in-r-with-rcpp.html#cb567-20" tabindex="-1"></a><span class="do">## [1] 3</span></span>
<span id="cb567-21"><a href="using-c-in-r-with-rcpp.html#cb567-21" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb567-22"><a href="using-c-in-r-with-rcpp.html#cb567-22" tabindex="-1"></a><span class="do">## $col_number</span></span>
<span id="cb567-23"><a href="using-c-in-r-with-rcpp.html#cb567-23" tabindex="-1"></a><span class="do">## [1] 4</span></span>
<span id="cb567-24"><a href="using-c-in-r-with-rcpp.html#cb567-24" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb567-25"><a href="using-c-in-r-with-rcpp.html#cb567-25" tabindex="-1"></a><span class="do">## $transpose</span></span>
<span id="cb567-26"><a href="using-c-in-r-with-rcpp.html#cb567-26" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3]</span></span>
<span id="cb567-27"><a href="using-c-in-r-with-rcpp.html#cb567-27" tabindex="-1"></a><span class="do">## [1,]    1    2    3</span></span>
<span id="cb567-28"><a href="using-c-in-r-with-rcpp.html#cb567-28" tabindex="-1"></a><span class="do">## [2,]    4    5    6</span></span>
<span id="cb567-29"><a href="using-c-in-r-with-rcpp.html#cb567-29" tabindex="-1"></a><span class="do">## [3,]    7    8    9</span></span>
<span id="cb567-30"><a href="using-c-in-r-with-rcpp.html#cb567-30" tabindex="-1"></a><span class="do">## [4,]   10   11   12</span></span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="evaluating-model-performance-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="deep-learning.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Book.pdf", "Book.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
